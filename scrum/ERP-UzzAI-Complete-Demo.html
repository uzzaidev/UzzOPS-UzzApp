<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ERP-UzzAI - Sistema Completo de Gestão</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <!-- Google Fonts: Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">

    <!-- Tailwind Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        primary: {
                            blue: '#3B82F6',
                            dark: '#1E40AF',
                            light: '#DBEAFE',
                            lighter: '#EFF6FF',
                        },
                        status: {
                            success: '#10B981',
                            warning: '#F59E0B',
                            danger: '#EF4444',
                            info: '#8B5CF6',
                        },
                        gray: {
                            superlight: '#F9FAFB',
                            light: '#F3F4F6',
                            medium: '#9CA3AF',
                            dark: '#374151',
                            darker: '#111827',
                        }
                    },
                    boxShadow: {
                        'card': '0 1px 3px rgba(0,0,0,0.05)',
                        'card-hover': '0 4px 12px rgba(0,0,0,0.1)',
                    }
                }
            }
        }
    </script>

    <style>
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #d1d5db;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #9ca3af;
        }

        /* Drag and Drop */
        .card-draggable {
            cursor: grab;
            transition: all 0.2s ease;
        }
        .card-draggable.dragging {
            opacity: 0.5;
            cursor: grabbing;
            transform: scale(0.98);
        }
        .kanban-col.drag-over {
            background-color: #E5E7EB;
            border: 2px dashed #3B82F6;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fadeIn 0.3s ease-out forwards;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }
        .animate-slide-in {
            animation: slideIn 0.3s ease-out forwards;
        }

        /* Checkbox custom */
        .custom-checkbox:checked + div {
            text-decoration: line-through;
            color: #9CA3AF;
        }

        /* Progress bar animation */
        @keyframes progressGrow {
            from { width: 0; }
        }
        .progress-bar {
            animation: progressGrow 1s ease-out;
        }

        /* Pulse animation for alerts */
        @keyframes pulse-soft {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        .pulse-soft {
            animation: pulse-soft 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        /* Hidden class */
        .hidden {
            display: none !important;
        }

        /* Sidebar collapse */
        #sidebar.collapsed {
            width: 60px;
        }
        #sidebar.collapsed .nav-text,
        #sidebar.collapsed .nav-badge,
        #sidebar.collapsed .section-title {
            display: none;
        }
        #sidebar.collapsed .logo-text {
            display: none;
        }
    </style>
</head>

<body class="bg-gray-superlight text-gray-darker font-sans h-screen overflow-hidden flex text-sm">

    <!-- ========================================
         SIDEBAR (240px Fixed, Collapsible)
         ======================================== -->
    <aside id="sidebar" class="w-[240px] bg-white border-r border-gray-200 flex flex-col flex-shrink-0 h-full transition-all duration-300">

        <!-- Logo -->
        <div class="h-16 flex items-center px-6 border-b border-gray-100 justify-between">
            <div class="flex items-center">
                <div class="w-8 h-8 bg-primary-blue rounded flex items-center justify-center text-white mr-3">
                    <i class="fa-solid fa-cube"></i>
                </div>
                <span class="logo-text font-bold text-lg text-gray-900 tracking-tight">UzzAI</span>
            </div>
            <button onclick="toggleSidebar()" class="text-gray-400 hover:text-gray-600 transition-colors">
                <i class="fa-solid fa-bars text-sm"></i>
            </button>
        </div>

        <!-- Navigation -->
        <nav class="flex-1 overflow-y-auto py-4 px-3 space-y-1">

            <!-- Main Section -->
            <button onclick="switchView('dashboard')" class="nav-item w-full flex items-center px-4 py-3 text-primary-dark bg-primary-lighter border-l-[3px] border-primary-blue rounded-r-md transition-colors group" data-view="dashboard">
                <i class="fa-solid fa-house w-6"></i>
                <span class="nav-text font-medium">Dashboard</span>
            </button>

            <button onclick="switchView('projetos')" class="nav-item w-full flex items-center px-4 py-3 text-gray-dark hover:bg-gray-100 rounded-md transition-colors group" data-view="projetos">
                <i class="fa-solid fa-chart-simple w-6 group-hover:text-primary-blue transition-colors"></i>
                <span class="nav-text font-medium">Projetos</span>
            </button>

            <button onclick="switchView('kanban')" class="nav-item w-full flex items-center px-4 py-3 text-gray-dark hover:bg-gray-100 rounded-md transition-colors group justify-between" data-view="kanban">
                <div class="flex items-center">
                    <i class="fa-solid fa-bullseye w-6 group-hover:text-primary-blue transition-colors"></i>
                    <span class="nav-text font-medium">Kanban</span>
                </div>
                <span class="nav-badge bg-status-danger text-white text-[10px] font-bold h-5 w-5 rounded-full flex items-center justify-center">3</span>
            </button>

            <button onclick="switchView('backlog')" class="nav-item w-full flex items-center px-4 py-3 text-gray-dark hover:bg-gray-100 rounded-md transition-colors group" data-view="backlog">
                <i class="fa-solid fa-list-check w-6 group-hover:text-primary-blue transition-colors"></i>
                <span class="nav-text font-medium">Backlog</span>
            </button>

            <!-- Divider -->
            <div class="h-px bg-gray-200 my-4 mx-2"></div>

            <!-- Sprint Section -->
            <div class="section-title px-4 py-2 text-xs font-semibold text-gray-400 uppercase tracking-wider">
                Sprint Atual
            </div>

            <button onclick="switchView('planning')" class="nav-item w-full flex items-center px-4 py-2 text-gray-dark hover:bg-gray-100 rounded-md transition-colors group ml-2" data-view="planning">
                <i class="fa-solid fa-stopwatch w-6 text-gray-400 group-hover:text-primary-blue"></i>
                <span class="nav-text">Planning</span>
            </button>

            <button onclick="switchView('daily')" class="nav-item w-full flex items-center px-4 py-2 text-gray-dark hover:bg-gray-100 rounded-md transition-colors group ml-2" data-view="daily">
                <i class="fa-solid fa-sun w-6 text-gray-400 group-hover:text-primary-blue"></i>
                <span class="nav-text">Daily Standup</span>
            </button>

            <button onclick="switchView('review')" class="nav-item w-full flex items-center px-4 py-2 text-gray-dark hover:bg-gray-100 rounded-md transition-colors group ml-2" data-view="review">
                <i class="fa-solid fa-clipboard-check w-6 text-gray-400 group-hover:text-primary-blue"></i>
                <span class="nav-text">Sprint Review</span>
            </button>

            <button onclick="switchView('retro')" class="nav-item w-full flex items-center px-4 py-2 text-gray-dark hover:bg-gray-100 rounded-md transition-colors group ml-2" data-view="retro">
                <i class="fa-solid fa-rotate-left w-6 text-gray-400 group-hover:text-primary-blue"></i>
                <span class="nav-text">Retrospective</span>
            </button>

            <!-- Divider -->
            <div class="h-px bg-gray-200 my-4 mx-2"></div>

            <!-- Analytics Section -->
            <div class="section-title px-4 py-2 text-xs font-semibold text-gray-400 uppercase tracking-wider">
                Analytics
            </div>

            <button onclick="switchView('burndown')" class="nav-item w-full flex items-center px-4 py-2 text-gray-dark hover:bg-gray-100 rounded-md transition-colors group ml-2" data-view="burndown">
                <i class="fa-solid fa-chart-line w-6 text-gray-400 group-hover:text-primary-blue"></i>
                <span class="nav-text">Burndown</span>
            </button>

            <button onclick="switchView('velocity')" class="nav-item w-full flex items-center px-4 py-2 text-gray-dark hover:bg-gray-100 rounded-md transition-colors group ml-2" data-view="velocity">
                <i class="fa-solid fa-bolt w-6 text-gray-400 group-hover:text-primary-blue"></i>
                <span class="nav-text">Velocity</span>
            </button>

            <button onclick="switchView('gantt')" class="nav-item w-full flex items-center px-4 py-2 text-gray-dark hover:bg-gray-100 rounded-md transition-colors group ml-2" data-view="gantt">
                <i class="fa-solid fa-calendar-days w-6 text-gray-400 group-hover:text-primary-blue"></i>
                <span class="nav-text">Gantt</span>
            </button>

            <!-- Divider -->
            <div class="h-px bg-gray-200 my-4 mx-2"></div>

            <!-- People Management (NEW) -->
            <button onclick="switchView('equipe')" class="nav-item w-full flex items-center px-4 py-3 text-gray-dark hover:bg-gray-100 rounded-md transition-colors group justify-between" data-view="equipe">
                <div class="flex items-center">
                    <i class="fa-solid fa-users w-6 group-hover:text-primary-blue transition-colors"></i>
                    <span class="nav-text font-medium">Equipe</span>
                </div>
            </button>

            <button onclick="switchView('capacity')" class="nav-item w-full flex items-center px-4 py-2 text-gray-dark hover:bg-gray-100 rounded-md transition-colors group ml-2" data-view="capacity">
                <i class="fa-solid fa-gauge-high w-6 text-gray-400 group-hover:text-primary-blue"></i>
                <span class="nav-text">Capacidade</span>
            </button>

            <!-- Divider -->
            <div class="h-px bg-gray-200 my-4 mx-2"></div>

            <!-- Manager Cockpit (NEW) -->
            <button onclick="switchView('cockpit')" class="nav-item w-full flex items-center px-4 py-3 text-gray-dark hover:bg-gray-100 rounded-md transition-colors group justify-between" data-view="cockpit">
                <div class="flex items-center">
                    <i class="fa-solid fa-gauge w-6 group-hover:text-primary-blue transition-colors"></i>
                    <span class="nav-text font-medium">Cockpit</span>
                </div>
                <span class="nav-badge bg-status-warning text-white text-[10px] font-bold h-5 w-5 rounded-full flex items-center justify-center">5</span>
            </button>
        </nav>

        <!-- Sidebar Footer -->
        <div class="p-4 border-t border-gray-200">
            <button onclick="switchView('settings')" class="nav-item w-full flex items-center text-gray-500 hover:text-gray-900 transition-colors" data-view="settings">
                <i class="fa-solid fa-cog w-6"></i>
                <span class="nav-text text-sm font-medium">Configurações</span>
            </button>
        </div>
    </aside>

    <!-- ========================================
         MAIN CONTENT AREA
         ======================================== -->
    <div class="flex-1 flex flex-col h-full overflow-hidden relative">

        <!-- TOPBAR (64px Fixed) -->
        <header class="h-16 bg-white border-b border-gray-200 shadow-sm flex items-center justify-between px-6 z-10 shrink-0">

            <!-- Left: Breadcrumbs -->
            <div class="flex items-center text-gray-500 text-sm">
                <span class="hover:text-primary-blue cursor-pointer">Dashboard</span>
                <span class="mx-2 text-gray-300">/</span>
                <span class="font-semibold text-gray-900" id="page-title">Visão Geral</span>
            </div>

            <!-- Center: Search -->
            <div class="flex-1 max-w-xl px-8 relative">
                <div class="relative">
                    <span class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                        <i class="fa-solid fa-magnifying-glass text-gray-400"></i>
                    </span>
                    <input type="text"
                        class="block w-full pl-10 pr-12 py-2 border border-gray-200 rounded-lg leading-5 bg-gray-50 placeholder-gray-400 focus:outline-none focus:bg-white focus:border-primary-blue focus:ring-1 focus:ring-primary-blue sm:text-sm transition-all"
                        placeholder="Buscar tasks, projetos, pessoas... (Ctrl+K)">
                    <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
                        <span class="text-gray-400 text-xs border border-gray-200 rounded px-1.5 py-0.5">⌘K</span>
                    </div>
                </div>
            </div>

            <!-- Right: Actions -->
            <div class="flex items-center space-x-6">
                <!-- Notifications -->
                <button class="relative text-gray-400 hover:text-gray-600 transition-colors">
                    <i class="fa-regular fa-bell text-xl"></i>
                    <span class="absolute -top-1 -right-1 h-4 w-4 bg-status-danger rounded-full flex items-center justify-center text-[10px] text-white font-bold border-2 border-white">3</span>
                </button>

                <!-- User Profile -->
                <div class="flex items-center space-x-3 cursor-pointer group">
                    <div class="text-right hidden md:block">
                        <p class="text-sm font-medium text-gray-900 group-hover:text-primary-blue">Pedro V.</p>
                        <p class="text-xs text-gray-500">Product Owner</p>
                    </div>
                    <img class="h-9 w-9 rounded-full border border-gray-200" src="https://ui-avatars.com/api/?name=Pedro+V&background=0D8ABC&color=fff" alt="Avatar">
                    <i class="fa-solid fa-chevron-down text-xs text-gray-400"></i>
                </div>
            </div>
        </header>

        <!-- MAIN SCROLLABLE AREA -->
        <main class="flex-1 overflow-x-hidden overflow-y-auto bg-gray-superlight p-6 relative">

            <!-- All views will be injected here by JavaScript -->
            <div id="content-container"></div>

        </main>
    </div>

    <!-- ========================================
         MODALS
         ======================================== -->

    <!-- Modal: Nova Task Rápida -->
    <div id="modalNovaTask" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-hidden flex flex-col">
            <!-- Header -->
            <div class="px-6 py-4 border-b border-gray-200 flex justify-between items-center bg-gradient-to-r from-primary-blue to-blue-600">
                <h3 class="text-lg font-bold text-white flex items-center">
                    <i class="fa-solid fa-plus-circle mr-2"></i>
                    Nova Task Rápida
                </h3>
                <button onclick="closeModal('modalNovaTask')" class="text-white hover:text-gray-200 transition-colors">
                    <i class="fa-solid fa-times text-xl"></i>
                </button>
            </div>

            <!-- Body -->
            <div class="p-6 overflow-y-auto flex-1">
                <form id="formNovaTask" class="space-y-6">

                    <!-- Row 1: Título + Projeto -->
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                <i class="fa-solid fa-heading text-gray-400 mr-1"></i>
                                Título da Task *
                            </label>
                            <input type="text" required
                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-blue"
                                placeholder="Ex: Implementar login OAuth">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                <i class="fa-solid fa-folder text-gray-400 mr-1"></i>
                                Projeto *
                            </label>
                            <select required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-blue">
                                <option value="">Selecione...</option>
                                <option value="chatbot">CHATBOT</option>
                                <option value="site-builder">SITE-BUILDER</option>
                                <option value="nutritrain">NUTRITRAIN</option>
                                <option value="uzzbim">UZZBIM</option>
                            </select>
                        </div>
                    </div>

                    <!-- Row 2: Sprint + Assignee -->
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                <i class="fa-solid fa-stopwatch text-gray-400 mr-1"></i>
                                Sprint
                            </label>
                            <select class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-blue">
                                <option value="">Backlog (sem sprint)</option>
                                <option value="Sprint-2025-W02">Sprint-2025-W02 (Atual)</option>
                                <option value="Sprint-2025-W03">Sprint-2025-W03 (Próximo)</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                <i class="fa-solid fa-user text-gray-400 mr-1"></i>
                                Responsável
                            </label>
                            <select class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-blue">
                                <option value="">Não atribuído</option>
                                <option value="pedrov">Pedro Vitor</option>
                                <option value="luis">Luis Boff</option>
                                <option value="vitinho">Vitinho</option>
                                <option value="maria">Maria Silva</option>
                            </select>
                        </div>
                    </div>

                    <!-- Row 3: Descrição -->
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            <i class="fa-solid fa-align-left text-gray-400 mr-1"></i>
                            Descrição
                        </label>
                        <textarea rows="3"
                            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-blue"
                            placeholder="Descreva os critérios de aceitação e detalhes técnicos..."></textarea>
                    </div>

                    <!-- Divider -->
                    <div class="border-t border-gray-200 pt-6">
                        <h4 class="text-sm font-bold text-gray-700 mb-4 flex items-center">
                            <span class="bg-blue-100 text-primary-blue px-2 py-1 rounded text-xs mr-2">PRIORIZAÇÃO</span>
                            Matriz GUT + Planning Poker
                        </h4>
                    </div>

                    <!-- Row 4: Priority + Due Date -->
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                <i class="fa-solid fa-flag text-gray-400 mr-1"></i>
                                Prioridade
                            </label>
                            <select class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-blue">
                                <option value="P0" class="font-bold text-red-600">P0 - Crítico</option>
                                <option value="P1" class="font-bold text-orange-600">P1 - Alto</option>
                                <option value="P2" selected class="font-bold text-yellow-600">P2 - Médio</option>
                                <option value="P3" class="font-bold text-green-600">P3 - Baixo</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                <i class="fa-solid fa-calendar text-gray-400 mr-1"></i>
                                Prazo (Due Date)
                            </label>
                            <input type="date"
                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-blue">
                        </div>
                    </div>

                    <!-- Row 5: Matriz GUT -->
                    <div class="bg-yellow-50 border border-yellow-200 rounded-md p-4">
                        <h5 class="text-sm font-bold text-gray-900 mb-3 flex items-center">
                            <i class="fa-solid fa-table-cells text-yellow-600 mr-2"></i>
                            Matriz GUT (Gravidade × Urgência × Tendência)
                        </h5>
                        <div class="grid grid-cols-3 gap-4 mb-3">
                            <div>
                                <label class="block text-xs font-semibold text-gray-600 mb-1">
                                    Gravidade (1-5)
                                </label>
                                <select id="gutG" onchange="calculateGUT()" class="w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md">
                                    <option value="1">1 - Sem gravidade</option>
                                    <option value="2">2 - Pouco grave</option>
                                    <option value="3" selected>3 - Grave</option>
                                    <option value="4">4 - Muito grave</option>
                                    <option value="5">5 - Extremamente grave</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-xs font-semibold text-gray-600 mb-1">
                                    Urgência (1-5)
                                </label>
                                <select id="gutU" onchange="calculateGUT()" class="w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md">
                                    <option value="1">1 - Pode esperar</option>
                                    <option value="2">2 - Pouco urgente</option>
                                    <option value="3" selected>3 - Urgente</option>
                                    <option value="4">4 - Muito urgente</option>
                                    <option value="5">5 - Precisa ação imediata</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-xs font-semibold text-gray-600 mb-1">
                                    Tendência (1-5)
                                </label>
                                <select id="gutT" onchange="calculateGUT()" class="w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md">
                                    <option value="1">1 - Não vai piorar</option>
                                    <option value="2">2 - Vai piorar longo prazo</option>
                                    <option value="3" selected>3 - Vai piorar médio prazo</option>
                                    <option value="4">4 - Vai piorar curto prazo</option>
                                    <option value="5">5 - Vai piorar rapidamente</option>
                                </select>
                            </div>
                        </div>
                        <div class="flex items-center justify-between bg-white border-2 border-yellow-400 rounded-md p-3">
                            <span class="text-sm font-semibold text-gray-700">Score GUT:</span>
                            <span id="gutScore" class="text-2xl font-bold text-yellow-700">27</span>
                        </div>
                        <p class="text-xs text-gray-500 mt-2">
                            <i class="fa-solid fa-info-circle mr-1"></i>
                            Score = G × U × T (máximo: 125). Quanto maior, mais prioritária a task.
                        </p>
                    </div>

                    <!-- Row 6: Planning Poker BV/W -->
                    <div class="bg-green-50 border border-green-200 rounded-md p-4">
                        <h5 class="text-sm font-bold text-gray-900 mb-3 flex items-center">
                            <i class="fa-solid fa-playing-cards text-green-600 mr-2"></i>
                            Planning Poker: Business Value vs Work
                        </h5>
                        <div class="grid grid-cols-2 gap-4 mb-3">
                            <div>
                                <label class="block text-xs font-semibold text-gray-600 mb-1">
                                    Business Value (1-8)
                                    <span class="text-gray-400 font-normal">- Definido pelo PO</span>
                                </label>
                                <select class="w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md">
                                    <option value="1">1 - Valor mínimo</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="5" selected>5 - Valor médio</option>
                                    <option value="8">8 - Valor máximo</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-xs font-semibold text-gray-600 mb-1">
                                    Work / Esforço (1-8)
                                    <span class="text-gray-400 font-normal">- Definido pela Dev Team</span>
                                </label>
                                <select class="w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md">
                                    <option value="1">1 - Esforço mínimo</option>
                                    <option value="2">2</option>
                                    <option value="3" selected>3</option>
                                    <option value="5">5 - Esforço médio</option>
                                    <option value="8">8 - Esforço máximo</option>
                                </select>
                            </div>
                        </div>
                        <p class="text-xs text-gray-500">
                            <i class="fa-solid fa-lightbulb mr-1"></i>
                            <strong>Ideal:</strong> Alto BV + Baixo W = "Quick Wins" (fazer primeiro)
                        </p>
                    </div>

                    <!-- Row 7: Tags -->
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            <i class="fa-solid fa-tags text-gray-400 mr-1"></i>
                            Tags / Labels
                        </label>
                        <input type="text"
                            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-blue"
                            placeholder="Ex: frontend, bug, technical-debt (separar por vírgula)">
                    </div>

                </form>
            </div>

            <!-- Footer -->
            <div class="px-6 py-4 border-t border-gray-200 flex justify-end space-x-3 bg-gray-50">
                <button onclick="closeModal('modalNovaTask')"
                    class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-100 transition-colors">
                    Cancelar
                </button>
                <button onclick="saveNovaTask()"
                    class="px-4 py-2 bg-primary-blue text-white rounded-md hover:bg-primary-dark transition-colors flex items-center">
                    <i class="fa-solid fa-save mr-2"></i>
                    Criar Task
                </button>
            </div>
        </div>
    </div>

    <!-- Modal: Detalhes do Projeto -->
    <div id="modalDetalheProjeto" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col">
            <!-- Header -->
            <div class="px-6 py-4 border-b border-gray-200 flex justify-between items-center bg-gradient-to-r from-primary-blue to-blue-600">
                <div>
                    <h3 class="text-lg font-bold text-white flex items-center">
                        <i class="fa-solid fa-folder-open mr-2"></i>
                        <span id="projetoNome">CHATBOT</span>
                    </h3>
                    <p class="text-blue-100 text-sm mt-1">Visualização completa do projeto</p>
                </div>
                <button onclick="closeModal('modalDetalheProjeto')" class="text-white hover:text-gray-200 transition-colors">
                    <i class="fa-solid fa-times text-xl"></i>
                </button>
            </div>

            <!-- Tabs Navigation -->
            <div class="border-b border-gray-200 bg-gray-50">
                <nav class="flex px-6 -mb-px space-x-6" id="projetoTabs">
                    <button onclick="switchProjetoTab('overview')" data-tab="overview"
                        class="projeto-tab-btn border-b-2 border-primary-blue text-primary-blue py-3 px-1 font-medium text-sm">
                        <i class="fa-solid fa-chart-pie mr-1"></i> Overview
                    </button>
                    <button onclick="switchProjetoTab('backlog')" data-tab="backlog"
                        class="projeto-tab-btn border-b-2 border-transparent text-gray-500 hover:text-gray-700 py-3 px-1 font-medium text-sm">
                        <i class="fa-solid fa-list-check mr-1"></i> Backlog
                    </button>
                    <button onclick="switchProjetoTab('sprints')" data-tab="sprints"
                        class="projeto-tab-btn border-b-2 border-transparent text-gray-500 hover:text-gray-700 py-3 px-1 font-medium text-sm">
                        <i class="fa-solid fa-stopwatch mr-1"></i> Sprints
                    </button>
                    <button onclick="switchProjetoTab('equipe')" data-tab="equipe"
                        class="projeto-tab-btn border-b-2 border-transparent text-gray-500 hover:text-gray-700 py-3 px-1 font-medium text-sm">
                        <i class="fa-solid fa-users mr-1"></i> Equipe
                    </button>
                    <button onclick="switchProjetoTab('timeline')" data-tab="timeline"
                        class="projeto-tab-btn border-b-2 border-transparent text-gray-500 hover:text-gray-700 py-3 px-1 font-medium text-sm">
                        <i class="fa-solid fa-calendar-days mr-1"></i> Timeline
                    </button>
                    <button onclick="switchProjetoTab('analytics')" data-tab="analytics"
                        class="projeto-tab-btn border-b-2 border-transparent text-gray-500 hover:text-gray-700 py-3 px-1 font-medium text-sm">
                        <i class="fa-solid fa-chart-line mr-1"></i> Analytics
                    </button>
                    <button onclick="switchProjetoTab('riscos')" data-tab="riscos"
                        class="projeto-tab-btn border-b-2 border-transparent text-gray-500 hover:text-gray-700 py-3 px-1 font-medium text-sm">
                        <i class="fa-solid fa-triangle-exclamation mr-1"></i> Riscos
                    </button>
                </nav>
            </div>

            <!-- Tab Content -->
            <div class="p-6 overflow-y-auto flex-1" id="projetoTabContent">
                <!-- Content will be dynamically loaded -->
            </div>

            <!-- Footer -->
            <div class="px-6 py-4 border-t border-gray-200 flex justify-end space-x-3 bg-gray-50">
                <button onclick="closeModal('modalDetalheProjeto')"
                    class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-100 transition-colors">
                    Fechar
                </button>
            </div>
        </div>
    </div>

    <!-- Modal: Novo Projeto -->
    <div id="modalNovoProjeto" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col">
            <!-- Header -->
            <div class="px-6 py-4 border-b border-gray-200 flex justify-between items-center bg-gradient-to-r from-green-500 to-green-600">
                <h3 class="text-lg font-bold text-white flex items-center">
                    <i class="fa-solid fa-folder-plus mr-2"></i>
                    Novo Projeto
                </h3>
                <button onclick="closeModal('modalNovoProjeto')" class="text-white hover:text-gray-200 transition-colors">
                    <i class="fa-solid fa-times text-xl"></i>
                </button>
            </div>

            <!-- Body -->
            <div class="p-6 overflow-y-auto flex-1">
                <form id="formNovoProjeto" class="space-y-5">

                    <!-- Row 1: Code + Name -->
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                <i class="fa-solid fa-code text-gray-400 mr-1"></i>
                                Código do Projeto *
                            </label>
                            <input type="text" required
                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 uppercase"
                                placeholder="Ex: CHATBOT" maxlength="20">
                            <p class="text-xs text-gray-500 mt-1">Identificador único (sem espaços)</p>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                <i class="fa-solid fa-tag text-gray-400 mr-1"></i>
                                Nome do Projeto *
                            </label>
                            <input type="text" required
                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                                placeholder="Ex: Sistema de Chatbot IA">
                        </div>
                    </div>

                    <!-- Row 2: Description -->
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            <i class="fa-solid fa-align-left text-gray-400 mr-1"></i>
                            Descrição
                        </label>
                        <textarea rows="3"
                            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                            placeholder="Descreva o objetivo e escopo do projeto..."></textarea>
                    </div>

                    <!-- Row 3: Status + Priority -->
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                <i class="fa-solid fa-circle-dot text-gray-400 mr-1"></i>
                                Status
                            </label>
                            <select class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                                <option value="planning">Planejamento</option>
                                <option value="active" selected>Ativo</option>
                                <option value="paused">Pausado</option>
                                <option value="completed">Concluído</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                <i class="fa-solid fa-flag text-gray-400 mr-1"></i>
                                Prioridade
                            </label>
                            <select class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                                <option value="P0" class="font-bold text-red-600">P0 - Crítico</option>
                                <option value="P1" class="font-bold text-orange-600">P1 - Alto</option>
                                <option value="P2" selected class="font-bold text-yellow-600">P2 - Médio</option>
                                <option value="P3" class="font-bold text-green-600">P3 - Baixo</option>
                            </select>
                        </div>
                    </div>

                    <!-- Row 4: Dates -->
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                <i class="fa-solid fa-calendar-plus text-gray-400 mr-1"></i>
                                Data de Início
                            </label>
                            <input type="date"
                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                <i class="fa-solid fa-calendar-check text-gray-400 mr-1"></i>
                                Data de Término (Estimada)
                            </label>
                            <input type="date"
                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                        </div>
                    </div>

                    <!-- Row 5: Budget -->
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                <i class="fa-solid fa-money-bill text-gray-400 mr-1"></i>
                                Budget Planejado (R$)
                            </label>
                            <input type="number" step="0.01" min="0"
                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                                placeholder="0.00">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                <i class="fa-solid fa-receipt text-gray-400 mr-1"></i>
                                Budget Gasto (R$)
                            </label>
                            <input type="number" step="0.01" min="0" value="0" readonly
                                class="w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-600"
                                placeholder="0.00">
                        </div>
                    </div>

                    <!-- Row 6: Team Members -->
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            <i class="fa-solid fa-users text-gray-400 mr-1"></i>
                            Membros da Equipe
                        </label>
                        <div class="border border-gray-300 rounded-md p-3">
                            <div class="flex flex-wrap gap-2 mb-3" id="selectedTeamMembers">
                                <!-- Selected members will appear here -->
                            </div>
                            <select id="teamMemberSelect" onchange="addTeamMember()"
                                class="w-full px-3 py-2 border border-gray-200 rounded-md text-sm">
                                <option value="">+ Adicionar membro</option>
                                <option value="pedrov">Pedro Vitor (Senior Full-Stack)</option>
                                <option value="luis">Luis Boff (Full-Stack)</option>
                                <option value="vitinho">Vitinho (Junior Dev)</option>
                                <option value="maria">Maria Silva (UI/UX Designer)</option>
                            </select>
                        </div>
                    </div>

                </form>
            </div>

            <!-- Footer -->
            <div class="px-6 py-4 border-t border-gray-200 flex justify-end space-x-3 bg-gray-50">
                <button onclick="closeModal('modalNovoProjeto')"
                    class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-100 transition-colors">
                    Cancelar
                </button>
                <button onclick="saveNovoProjeto()"
                    class="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors flex items-center">
                    <i class="fa-solid fa-save mr-2"></i>
                    Criar Projeto
                </button>
            </div>
        </div>
    </div>

    <!-- Modal: Detalhes do Card Kanban -->
    <div id="modalKanbanCard" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-hidden flex flex-col">
            <!-- Header -->
            <div class="px-6 py-4 border-b border-gray-200 flex justify-between items-center" id="kanbanCardHeader">
                <div class="flex items-center space-x-3">
                    <span class="text-xs font-mono text-gray-500 bg-gray-100 px-2 py-1 rounded">#123</span>
                    <h3 class="text-lg font-bold text-gray-900">Implementar Burndown Chart</h3>
                </div>
                <button onclick="closeModal('modalKanbanCard')" class="text-gray-400 hover:text-gray-600 transition-colors">
                    <i class="fa-solid fa-times text-xl"></i>
                </button>
            </div>

            <!-- Body -->
            <div class="p-6 overflow-y-auto flex-1">

                <!-- Status + Priority Row -->
                <div class="flex items-center space-x-3 mb-6">
                    <span class="bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-xs font-semibold flex items-center">
                        <i class="fa-solid fa-spinner mr-1"></i> In Progress
                    </span>
                    <span class="bg-red-100 text-red-700 px-3 py-1 rounded-full text-xs font-semibold flex items-center">
                        <i class="fa-solid fa-flag mr-1"></i> P0 - Crítico
                    </span>
                    <span class="bg-purple-100 text-purple-700 px-3 py-1 rounded-full text-xs font-semibold">
                        CHATBOT
                    </span>
                </div>

                <!-- Description -->
                <div class="mb-6">
                    <h4 class="text-sm font-bold text-gray-700 mb-2">Descrição</h4>
                    <p class="text-gray-600 text-sm leading-relaxed">
                        Implementar componente de Burndown Chart com SVG interativo, mostrando linha ideal vs linha real de queima de pontos do sprint atual.
                    </p>
                </div>

                <!-- Metrics Grid -->
                <div class="grid grid-cols-2 gap-4 mb-6">
                    <!-- Assignee -->
                    <div class="bg-gray-50 rounded-md p-3">
                        <label class="text-xs font-semibold text-gray-500 mb-2 block">Responsável</label>
                        <div class="flex items-center space-x-2">
                            <img class="w-8 h-8 rounded-full" src="https://ui-avatars.com/api/?name=Pedro+V&background=0D8ABC&color=fff" alt="Pedro V.">
                            <div>
                                <p class="text-sm font-semibold text-gray-900">Pedro Vitor</p>
                                <p class="text-xs text-gray-500">Senior Full-Stack</p>
                            </div>
                        </div>
                    </div>

                    <!-- Due Date -->
                    <div class="bg-gray-50 rounded-md p-3">
                        <label class="text-xs font-semibold text-gray-500 mb-2 block">Prazo</label>
                        <div class="flex items-center space-x-2">
                            <i class="fa-solid fa-calendar text-red-500"></i>
                            <div>
                                <p class="text-sm font-semibold text-gray-900">Hoje</p>
                                <p class="text-xs text-red-600">Vencendo!</p>
                            </div>
                        </div>
                    </div>

                    <!-- Story Points -->
                    <div class="bg-green-50 rounded-md p-3 border border-green-200">
                        <label class="text-xs font-semibold text-gray-500 mb-2 block">Planning Poker</label>
                        <div class="flex space-x-4">
                            <div>
                                <p class="text-xs text-gray-500">Business Value</p>
                                <p class="text-xl font-bold text-green-700">8</p>
                            </div>
                            <div class="border-l border-green-200"></div>
                            <div>
                                <p class="text-xs text-gray-500">Work / Esforço</p>
                                <p class="text-xl font-bold text-orange-700">3</p>
                            </div>
                        </div>
                    </div>

                    <!-- GUT Score -->
                    <div class="bg-yellow-50 rounded-md p-3 border border-yellow-200">
                        <label class="text-xs font-semibold text-gray-500 mb-2 block">Matriz GUT</label>
                        <div class="flex justify-between items-center">
                            <div class="flex space-x-2 text-xs">
                                <span>G:<strong>5</strong></span>
                                <span>U:<strong>5</strong></span>
                                <span>T:<strong>5</strong></span>
                            </div>
                            <span class="text-2xl font-bold text-yellow-700">125</span>
                        </div>
                    </div>
                </div>

                <!-- Time Tracking -->
                <div class="bg-blue-50 rounded-md p-4 mb-6 border border-blue-200">
                    <h4 class="text-sm font-bold text-gray-700 mb-3 flex items-center">
                        <i class="fa-solid fa-clock text-blue-600 mr-2"></i>
                        Time Tracking
                    </h4>
                    <div class="grid grid-cols-3 gap-3">
                        <div>
                            <p class="text-xs text-gray-500">Estimado</p>
                            <p class="text-lg font-bold text-gray-900">8h</p>
                        </div>
                        <div>
                            <p class="text-xs text-gray-500">Trabalhado</p>
                            <p class="text-lg font-bold text-blue-700">5h 30m</p>
                        </div>
                        <div>
                            <p class="text-xs text-gray-500">Restante</p>
                            <p class="text-lg font-bold text-orange-600">2h 30m</p>
                        </div>
                    </div>
                </div>

                <!-- Comments & Attachments -->
                <div class="flex items-center space-x-6 mb-6">
                    <div class="flex items-center space-x-2 text-gray-600">
                        <i class="fa-solid fa-comment"></i>
                        <span class="text-sm">2 comentários</span>
                    </div>
                    <div class="flex items-center space-x-2 text-gray-600">
                        <i class="fa-solid fa-paperclip"></i>
                        <span class="text-sm">1 anexo</span>
                    </div>
                </div>

                <!-- Activity Log -->
                <div class="border-t border-gray-200 pt-4">
                    <h4 class="text-sm font-bold text-gray-700 mb-3">Histórico de Atividades</h4>
                    <div class="space-y-3">
                        <div class="flex items-start space-x-3">
                            <i class="fa-solid fa-clock text-gray-400 mt-1"></i>
                            <div class="flex-1">
                                <p class="text-sm text-gray-900"><strong>Pedro V.</strong> moveu para <span class="bg-blue-100 text-blue-700 px-2 py-0.5 rounded text-xs">In Progress</span></p>
                                <p class="text-xs text-gray-500">2 horas atrás</p>
                            </div>
                        </div>
                        <div class="flex items-start space-x-3">
                            <i class="fa-solid fa-clock text-gray-400 mt-1"></i>
                            <div class="flex-1">
                                <p class="text-sm text-gray-900"><strong>Luis B.</strong> comentou na task</p>
                                <p class="text-xs text-gray-500">5 horas atrás</p>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Footer -->
            <div class="px-6 py-4 border-t border-gray-200 flex justify-between bg-gray-50">
                <div class="flex space-x-2">
                    <button class="px-3 py-2 border border-red-300 text-red-600 rounded-md hover:bg-red-50 transition-colors text-sm">
                        <i class="fa-solid fa-trash mr-1"></i>
                        Deletar
                    </button>
                </div>
                <div class="flex space-x-2">
                    <button onclick="closeModal('modalKanbanCard')"
                        class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-100 transition-colors">
                        Fechar
                    </button>
                    <button onclick="editKanbanCard()"
                        class="px-4 py-2 bg-primary-blue text-white rounded-md hover:bg-primary-dark transition-colors flex items-center">
                        <i class="fa-solid fa-edit mr-2"></i>
                        Editar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Editar User Story (Backlog) -->
    <div id="modalEditarUserStory" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-hidden flex flex-col">
            <!-- Header -->
            <div class="px-6 py-4 border-b border-gray-200 flex justify-between items-center bg-gradient-to-r from-purple-500 to-purple-600">
                <h3 class="text-lg font-bold text-white flex items-center">
                    <i class="fa-solid fa-edit mr-2"></i>
                    Editar User Story
                </h3>
                <button onclick="closeModal('modalEditarUserStory')" class="text-white hover:text-gray-200 transition-colors">
                    <i class="fa-solid fa-times text-xl"></i>
                </button>
            </div>

            <!-- Body -->
            <div class="p-6 overflow-y-auto flex-1">
                <form id="formEditarUserStory" class="space-y-5">

                    <!-- User Story ID -->
                    <div class="bg-purple-50 border border-purple-200 rounded-md p-3">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-xs font-semibold text-gray-500">ID da User Story</p>
                                <p class="text-lg font-bold text-purple-700">US-001</p>
                            </div>
                            <div>
                                <p class="text-xs font-semibold text-gray-500">Score GUT Atual</p>
                                <p class="text-2xl font-bold text-yellow-600">125</p>
                            </div>
                        </div>
                    </div>

                    <!-- Title -->
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            <i class="fa-solid fa-heading text-gray-400 mr-1"></i>
                            Título da User Story *
                        </label>
                        <input type="text" required value="Implementar Burndown Chart interativo"
                            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                    </div>

                    <!-- Description (As a, I want, So that) -->
                    <div class="bg-gray-50 border border-gray-200 rounded-md p-4">
                        <h4 class="text-sm font-bold text-gray-700 mb-3">Formato User Story</h4>

                        <div class="space-y-3">
                            <div>
                                <label class="block text-xs font-semibold text-gray-600 mb-1">
                                    <i class="fa-solid fa-user text-purple-500 mr-1"></i>
                                    Como (As a...)
                                </label>
                                <input type="text" value="Product Owner"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                            </div>
                            <div>
                                <label class="block text-xs font-semibold text-gray-600 mb-1">
                                    <i class="fa-solid fa-bullseye text-purple-500 mr-1"></i>
                                    Eu quero (I want...)
                                </label>
                                <input type="text" value="visualizar o burndown chart do sprint"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                            </div>
                            <div>
                                <label class="block text-xs font-semibold text-gray-600 mb-1">
                                    <i class="fa-solid fa-star text-purple-500 mr-1"></i>
                                    Para que (So that...)
                                </label>
                                <input type="text" value="eu possa acompanhar o progresso da sprint em tempo real"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm">
                            </div>
                        </div>
                    </div>

                    <!-- Acceptance Criteria -->
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            <i class="fa-solid fa-check-double text-gray-400 mr-1"></i>
                            Critérios de Aceitação
                        </label>
                        <textarea rows="4"
                            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 text-sm font-mono">- [ ] Chart deve mostrar linha ideal vs linha real
- [ ] Deve usar SVG responsivo
- [ ] Deve atualizar em tempo real quando task muda status
- [ ] Tooltip deve mostrar detalhes ao passar mouse</textarea>
                        <p class="text-xs text-gray-500 mt-1">
                            <i class="fa-solid fa-lightbulb mr-1"></i>
                            Use checkboxes markdown "- [ ]" para criar lista de critérios
                        </p>
                    </div>

                    <!-- Technical Notes -->
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            <i class="fa-solid fa-code text-gray-400 mr-1"></i>
                            Notas Técnicas / Dependências
                        </label>
                        <textarea rows="2"
                            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 text-sm"
                            placeholder="Ex: Depende de #122 (API de métricas). Usar biblioteca D3.js ou SVG puro."></textarea>
                    </div>

                    <!-- Priority + Status -->
                    <div class="grid grid-cols-3 gap-4">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                Prioridade
                            </label>
                            <select class="w-full px-3 py-2 border border-gray-300 rounded-md">
                                <option value="P0" selected>P0 - Crítico</option>
                                <option value="P1">P1 - Alto</option>
                                <option value="P2">P2 - Médio</option>
                                <option value="P3">P3 - Baixo</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                Status
                            </label>
                            <select class="w-full px-3 py-2 border border-gray-300 rounded-md">
                                <option value="backlog" selected>Backlog</option>
                                <option value="ready">Ready for Sprint</option>
                                <option value="in-sprint">In Sprint</option>
                                <option value="done">Done</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                Sprint
                            </label>
                            <select class="w-full px-3 py-2 border border-gray-300 rounded-md">
                                <option value="">Nenhum</option>
                                <option value="Sprint-2025-W02" selected>Sprint-2025-W02</option>
                                <option value="Sprint-2025-W03">Sprint-2025-W03</option>
                            </select>
                        </div>
                    </div>

                    <!-- Update GUT + Planning Poker (same as Nova Task) -->
                    <div class="border-t border-gray-200 pt-5">
                        <div class="grid grid-cols-2 gap-4">
                            <!-- Matriz GUT (Compact) -->
                            <div class="bg-yellow-50 border border-yellow-200 rounded-md p-3">
                                <h5 class="text-xs font-bold text-gray-900 mb-2">Matriz GUT</h5>
                                <div class="grid grid-cols-3 gap-2">
                                    <div>
                                        <label class="text-xs text-gray-600">G</label>
                                        <select class="w-full px-2 py-1 text-xs border rounded">
                                            <option value="5" selected>5</option>
                                            <option value="4">4</option>
                                            <option value="3">3</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="text-xs text-gray-600">U</label>
                                        <select class="w-full px-2 py-1 text-xs border rounded">
                                            <option value="5" selected>5</option>
                                            <option value="4">4</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="text-xs text-gray-600">T</label>
                                        <select class="w-full px-2 py-1 text-xs border rounded">
                                            <option value="5" selected>5</option>
                                            <option value="4">4</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- Planning Poker (Compact) -->
                            <div class="bg-green-50 border border-green-200 rounded-md p-3">
                                <h5 class="text-xs font-bold text-gray-900 mb-2">Planning Poker</h5>
                                <div class="grid grid-cols-2 gap-2">
                                    <div>
                                        <label class="text-xs text-gray-600">BV</label>
                                        <select class="w-full px-2 py-1 text-xs border rounded">
                                            <option value="8" selected>8</option>
                                            <option value="5">5</option>
                                            <option value="3">3</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="text-xs text-gray-600">Work</label>
                                        <select class="w-full px-2 py-1 text-xs border rounded">
                                            <option value="3" selected>3</option>
                                            <option value="5">5</option>
                                            <option value="8">8</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </form>
            </div>

            <!-- Footer -->
            <div class="px-6 py-4 border-t border-gray-200 flex justify-end space-x-3 bg-gray-50">
                <button onclick="closeModal('modalEditarUserStory')"
                    class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-100 transition-colors">
                    Cancelar
                </button>
                <button onclick="saveEditarUserStory()"
                    class="px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors flex items-center">
                    <i class="fa-solid fa-save mr-2"></i>
                    Salvar Alterações
                </button>
            </div>
        </div>
    </div>

    <!-- MODAL: Feedback Obrigatório (NOVO - CRÍTICO) -->
    <div id="modalFeedbackExecucao" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-hidden flex flex-col animate-fade-in">
            <!-- Header -->
            <div class="px-6 py-5 border-b border-gray-200 bg-gradient-to-r from-red-50 to-red-100">
                <div class="flex items-center">
                    <div class="flex-shrink-0 w-12 h-12 bg-red-600 rounded-full flex items-center justify-center">
                        <i class="fa-solid fa-triangle-exclamation text-white text-xl"></i>
                    </div>
                    <div class="ml-4">
                        <h3 class="text-xl font-bold text-gray-900">Feedback de Execução Obrigatório</h3>
                        <p class="text-sm text-red-700 mt-1">
                            <i class="fa-solid fa-info-circle mr-1"></i>
                            Tarefa <strong>#US-003</strong> estourou <strong>45%</strong> do tempo previsto
                        </p>
                    </div>
                </div>
            </div>

            <!-- Body -->
            <div class="flex-1 overflow-y-auto p-6">
                <form class="space-y-6">
                    <!-- Resumo da Tarefa -->
                    <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                        <div class="grid grid-cols-2 gap-4 text-sm">
                            <div>
                                <p class="text-gray-500 text-xs mb-1">Tarefa</p>
                                <p class="font-semibold text-gray-900">Implementar Burndown Chart</p>
                            </div>
                            <div>
                                <p class="text-gray-500 text-xs mb-1">Projeto</p>
                                <p class="font-semibold text-gray-900">CHATBOT</p>
                            </div>
                            <div>
                                <p class="text-gray-500 text-xs mb-1">Tempo Previsto</p>
                                <p class="font-semibold text-blue-700">8 horas</p>
                            </div>
                            <div>
                                <p class="text-gray-500 text-xs mb-1">Tempo Realizado</p>
                                <p class="font-semibold text-red-700">11.6 horas (+45%)</p>
                            </div>
                        </div>

                        <!-- Barra Visual (NOVO) -->
                        <div class="mt-4 space-y-2">
                            <div>
                                <div class="flex justify-between items-center mb-1">
                                    <span class="text-xs font-semibold text-gray-700">Previsto</span>
                                    <span class="text-xs font-bold text-blue-700">8h</span>
                                </div>
                                <div class="w-full bg-blue-200 rounded h-6 flex items-center px-2">
                                    <div class="w-full bg-blue-500 rounded h-4 flex items-center justify-center" style="width: 100%">
                                        <span class="text-white text-xs font-bold">8 horas</span>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between items-center mb-1">
                                    <span class="text-xs font-semibold text-gray-700">Realizado</span>
                                    <span class="text-xs font-bold text-red-700">11.6h (+45%)</span>
                                </div>
                                <div class="w-full bg-red-200 rounded h-6 flex items-center px-2">
                                    <div class="w-full bg-red-500 rounded h-4 flex items-center justify-center" style="width: 145%">
                                        <span class="text-white text-xs font-bold">11.6 horas - ESTOURO!</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Pergunta 1: O que aconteceu? (OBRIGATÓRIO) -->
                    <div>
                        <label class="block text-sm font-bold text-gray-900 mb-2 flex items-center">
                            <i class="fa-solid fa-1 w-6 h-6 flex items-center justify-center bg-red-600 text-white rounded-full text-xs mr-2"></i>
                            O que aconteceu? Por que estourou o prazo/custo?
                            <span class="ml-2 text-red-600">*</span>
                        </label>
                        <p class="text-xs text-gray-600 mb-2">Descreva os problemas, bloqueios ou dificuldades encontradas durante a execução desta tarefa.</p>
                        <textarea
                            id="feedbackOQueAconteceu"
                            rows="5"
                            required
                            class="w-full px-4 py-3 border-2 border-red-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500 text-sm"
                            placeholder="Exemplo: API de terceiro estava com timeout. Tivemos que refazer a integração com retry logic, o que não estava no escopo original. Também encontramos bugs na biblioteca X que consumiram 2h extras de debugging..."
                        ></textarea>
                        <p class="text-xs text-gray-500 mt-1"><i class="fa-solid fa-keyboard mr-1"></i> Mínimo 50 caracteres</p>
                    </div>

                    <!-- Pergunta 2: Como evitar? (OBRIGATÓRIO) -->
                    <div>
                        <label class="block text-sm font-bold text-gray-900 mb-2 flex items-center">
                            <i class="fa-solid fa-2 w-6 h-6 flex items-center justify-center bg-green-600 text-white rounded-full text-xs mr-2"></i>
                            Para não acontecer de novo, o que fazer?
                            <span class="ml-2 text-red-600">*</span>
                        </label>
                        <p class="text-xs text-gray-600 mb-2">Ações preventivas e melhorias de processo para evitar que o mesmo problema ocorra nas próximas tarefas.</p>
                        <textarea
                            id="feedbackComoEvitar"
                            rows="5"
                            required
                            class="w-full px-4 py-3 border-2 border-green-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 text-sm"
                            placeholder="Exemplo: 1) Adicionar testes de timeout em todas as chamadas de API. 2) Criar buffer de 30% nas estimativas quando usar bibliotecas não testadas. 3) Fazer spike técnico de 2h antes de estimar tarefas com dependências externas..."
                        ></textarea>
                        <p class="text-xs text-gray-500 mt-1"><i class="fa-solid fa-keyboard mr-1"></i> Mínimo 50 caracteres</p>
                    </div>

                    <!-- Aviso Crítico -->
                    <div class="bg-red-50 border-2 border-red-300 rounded-lg p-4">
                        <div class="flex items-start">
                            <i class="fa-solid fa-exclamation-triangle text-red-600 text-xl mr-3 mt-0.5"></i>
                            <div>
                                <h4 class="text-sm font-bold text-red-900">Feedback Obrigatório</h4>
                                <p class="text-xs text-red-700 mt-1">
                                    Este feedback é <strong>obrigatório</strong> para tarefas que estouraram mais de 20% do previsto.
                                    O sistema não permitirá marcar a tarefa como concluída sem preencher ambos os campos acima.
                                </p>
                            </div>
                        </div>
                    </div>
                </form>
            </div>

            <!-- Footer -->
            <div class="px-6 py-4 border-t border-gray-200 flex justify-between bg-gray-50">
                <button onclick="closeModal('modalFeedbackExecucao')"
                    class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-100 transition-colors">
                    <i class="fa-solid fa-times mr-2"></i>
                    Cancelar (tarefa continua "In Progress")
                </button>
                <button onclick="saveFeedbackExecucao()"
                    class="px-5 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors flex items-center font-semibold">
                    <i class="fa-solid fa-check-circle mr-2"></i>
                    Salvar Feedback e Concluir Tarefa
                </button>
            </div>
        </div>
    </div>

    <!-- ========================================
         JAVASCRIPT LOGIC
         ======================================== -->
    <script>
        // ========================================
        // MOCK DATA
        // ========================================
        const mockData = {
            currentSprint: {
                id: 'Sprint-2025-W02',
                startDate: '2026-01-13',
                endDate: '2026-01-24',
                totalPoints: 20,
                completedPoints: 14,
                progress: 70,
                daysRemaining: 3
            },
            projects: [
                {
                    id: 'chatbot', name: 'CHATBOT', status: 'Ativo', progress: 85, team: ['PedroV', 'Luis', 'Maria'], priority: 'P0',
                    startDate: '2025-10-01', deadline: '2026-01-31', daysTotal: 122, daysElapsed: 102, daysRemaining: 20,
                    budgetPlanned: 50000, budgetSpent: 38500, timeEstimate: 200, timeActual: 180
                },
                {
                    id: 'site-builder', name: 'SITE-BUILDER', status: 'Pausado', progress: 60, team: ['Vitinho'], priority: 'P1',
                    startDate: '2025-11-01', deadline: '2026-02-15', daysTotal: 106, daysElapsed: 71, daysRemaining: 35,
                    budgetPlanned: 30000, budgetSpent: 18000, timeEstimate: 150, timeActual: 90
                },
                {
                    id: 'nutritrain', name: 'NUTRITRAIN', status: 'Ativo', progress: 45, team: ['PedroV', 'Vitinho'], priority: 'P0',
                    startDate: '2025-11-15', deadline: '2026-01-18', daysTotal: 64, daysElapsed: 57, daysRemaining: 7,
                    budgetPlanned: 40000, budgetSpent: 35000, timeEstimate: 180, timeActual: 190
                },
                {
                    id: 'uzzbim', name: 'UZZBIM', status: 'Planejamento', progress: 15, team: ['Luis'], priority: 'P2',
                    startDate: '2025-12-01', deadline: '2026-03-30', daysTotal: 119, daysElapsed: 41, daysRemaining: 78,
                    budgetPlanned: 60000, budgetSpent: 9000, timeEstimate: 250, timeActual: 37
                },
                {
                    id: 'construir-deck', name: '🏗️ DEMO: Construir Deck de Madeira', status: 'Concluído', progress: 100, team: ['João', 'Maria'], priority: 'P0',
                    startDate: '2025-09-01', deadline: '2025-09-30', daysTotal: 30, daysElapsed: 30, daysRemaining: 0,
                    budgetPlanned: 12000, budgetSpent: 14500, timeEstimate: 176, timeActual: 236,
                    isDemo: true,
                    description: 'Projeto DEMO para demonstrar conceitos de gestão: tempo previsto vs realizado, feedback de execução, dependências entre tarefas.'
                }
            ],
            demoTasks: [
                { id: 'DECK-01', title: 'Fazer projeto técnico do deck', project: 'construir-deck', priority: 'P0', ordem: 1, timeEstimate: 40, timeActual: 24, status: 'done', dependsOn: null, feedback: null },
                { id: 'DECK-02', title: 'Comprar material (madeira, parafusos, verniz)', project: 'construir-deck', priority: 'P0', ordem: 2, timeEstimate: 16, timeActual: 32, status: 'done', dependsOn: 'DECK-01', feedback: { oQueAconteceu: 'Fornecedor principal estava sem estoque de madeira tratada. Tivemos que procurar 3 outros fornecedores, o que atrasou a entrega. Além disso, preço estava 40% acima do orçado.', comoEvitar: '1) Manter lista de 3 fornecedores homologados. 2) Fazer cotação com 15 dias de antecedência. 3) Adicionar buffer de 30% no orçamento de materiais.' } },
                { id: 'DECK-03', title: 'Nivelar o terreno', project: 'construir-deck', priority: 'P0', ordem: 3, timeEstimate: 8, timeActual: 8, status: 'done', dependsOn: 'DECK-02', feedback: null },
                { id: 'DECK-04', title: 'Concretar sapatas (base do deck)', project: 'construir-deck', priority: 'P0', ordem: 4, timeEstimate: 24, timeActual: 30, status: 'done', dependsOn: 'DECK-03', feedback: { oQueAconteceu: 'Choveu durante 2 dias seguidos, o que atrasou a cura do concreto. Não conseguimos trabalhar e tivemos que esperar secar.', comoEvitar: 'Checar previsão do tempo com 1 semana de antecedência. Planejar atividades externas apenas em períodos de baixa probabilidade de chuva (< 20%).' } },
                { id: 'DECK-05', title: 'Colocar barrotes (estrutura principal)', project: 'construir-deck', priority: 'P0', ordem: 5, timeEstimate: 8, timeActual: 12, status: 'done', dependsOn: 'DECK-04', feedback: { oQueAconteceu: 'Descobrimos que 30% dos barrotes vieram tortos. Tivemos que fazer ajustes manuais e trocar alguns.', comoEvitar: 'Incluir inspeção de qualidade no recebimento de material. Pedir 10% a mais de material para eventuais trocas.' } },
                { id: 'DECK-06', title: 'Colocar ripas (piso do deck)', project: 'construir-deck', priority: 'P0', ordem: 6, timeEstimate: 40, timeActual: 40, status: 'done', dependsOn: 'DECK-05', feedback: null },
                { id: 'DECK-07', title: 'Colar tarugos (acabamento)', project: 'construir-deck', priority: 'P1', ordem: 7, timeEstimate: 8, timeActual: 8, status: 'done', dependsOn: 'DECK-06', feedback: null },
                { id: 'DECK-08', title: 'Lixar superfície', project: 'construir-deck', priority: 'P1', ordem: 7, timeEstimate: 8, timeActual: 8, status: 'done', dependsOn: 'DECK-06', parallelWith: 'DECK-07', feedback: null },
                { id: 'DECK-09', title: 'Aplicar verniz (3 demãos)', project: 'construir-deck', priority: 'P0', ordem: 8, timeEstimate: 24, timeActual: 24, status: 'done', dependsOn: 'DECK-07,DECK-08', feedback: null }
            ],
            tasks: [
                { id: 123, title: 'Implementar Burndown Chart', project: 'CHATBOT', assignee: 'PedroV', priority: 'P0', points: 3, status: 'in-progress', deadline: 'Hoje', comments: 2, attachments: 1 },
                { id: 125, title: 'Code review PR #45', project: 'CHATBOT', assignee: 'Vitinho', priority: 'P0', points: 3, status: 'in-review', deadline: 'Hoje' },
                { id: 124, title: 'Criar testes Kanban', project: 'SITE-BUILDER', assignee: 'Luis', priority: 'P1', points: 2, status: 'blocked', deadline: 'Amanhã', blocker: 'Aguardando API mock' },
                { id: 129, title: 'Configurar CI/CD pipeline', project: 'CHATBOT', assignee: 'Luis', priority: 'P2', points: 5, status: 'todo' },
                { id: 130, title: 'Documentação da API v2', project: 'CHATBOT', assignee: null, priority: 'P1', points: 3, status: 'todo' },
                { id: 110, title: 'Setup inicial do projeto', project: 'CHATBOT', assignee: 'PedroV', priority: 'P0', points: 8, status: 'done' },
                { id: 112, title: 'Autenticação Supabase', project: 'CHATBOT', assignee: 'Luis', priority: 'P0', points: 5, status: 'done' }
            ],
            blockers: [
                { id: 'BLOQ-01', title: 'RAG não conecta', priority: 'Alta', assignee: 'Dev2', project: 'CHATBOT' },
                { id: 'BLOQ-02', title: 'Form validação', priority: 'Média', assignee: 'Dev1', project: 'SITE-BUILDER' },
                { id: 'BLOQ-03', title: 'API timeout', priority: 'Alta', assignee: 'Luis', project: 'NUTRITRAIN' }
            ],
            team: [
                {
                    id: 'pedrov',
                    name: 'Pedro Vitor',
                    email: 'pedro@uzz.ai',
                    role: 'Senior Full-Stack Developer',
                    tenantRole: 'Manager',
                    avatar: 'https://ui-avatars.com/api/?name=Pedro+V&background=0D8ABC&color=fff',
                    skills: ['React', 'TypeScript', 'Python', 'AWS'],
                    seniority: 'senior',
                    allocations: [
                        { project: 'CHATBOT', percentage: 50, hours: 20 },
                        { project: 'SITE-BUILDER', percentage: 40, hours: 16 },
                        { project: 'NUTRITRAIN', percentage: 20, hours: 8 }
                    ],
                    totalAllocation: 110,
                    status: 'overallocated',
                    velocity: 16
                },
                {
                    id: 'luis',
                    name: 'Luis Boff',
                    email: 'luis@uzz.ai',
                    role: 'Full-Stack Developer',
                    tenantRole: 'Admin',
                    avatar: 'https://ui-avatars.com/api/?name=Luis+B&background=random&color=fff',
                    skills: ['Next.js', 'Node.js', 'PostgreSQL'],
                    seniority: 'senior',
                    allocations: [
                        { project: 'CHATBOT', percentage: 50, hours: 20 },
                        { project: 'SITE-BUILDER', percentage: 25, hours: 10 }
                    ],
                    totalAllocation: 75,
                    status: 'full',
                    velocity: 14
                },
                {
                    id: 'vitinho',
                    name: 'Vitinho',
                    email: 'vitinho@uzz.ai',
                    role: 'Junior Developer',
                    tenantRole: 'Member',
                    avatar: 'https://ui-avatars.com/api/?name=Vitinho&background=random&color=fff',
                    skills: ['React', 'JavaScript'],
                    seniority: 'junior',
                    allocations: [
                        { project: 'NUTRITRAIN', percentage: 50, hours: 20 }
                    ],
                    totalAllocation: 50,
                    status: 'available',
                    velocity: 8
                },
                {
                    id: 'maria',
                    name: 'Maria Silva',
                    email: 'maria@uzz.ai',
                    role: 'UI/UX Designer',
                    tenantRole: 'Member',
                    avatar: 'https://ui-avatars.com/api/?name=Maria+S&background=random&color=fff',
                    skills: ['Figma', 'Design Systems', 'Prototyping'],
                    seniority: 'pleno',
                    allocations: [
                        { project: 'CHATBOT', percentage: 30, hours: 12 }
                    ],
                    totalAllocation: 30,
                    status: 'available',
                    velocity: 0
                }
            ],
            velocity: [
                { week: 'W48', points: 12 },
                { week: 'W49', points: 15 },
                { week: 'W50', points: 10 },
                { week: 'W51', points: 16 },
                { week: 'W52', points: 18 },
                { week: 'W01', points: 14 }
            ],
            alerts: [
                { type: 'overallocation', severity: 'danger', message: '1 pessoa sobrecarregada', detail: '@PedroV com 110% alocação' },
                { type: 'sprint-risk', severity: 'warning', message: 'Sprint em risco', detail: '4 pts atrasados, 3 dias restantes' },
                { type: 'blocker', severity: 'danger', message: '3 bloqueadores ativos', detail: 'BLOQ-01, BLOQ-02, BLOQ-03' },
                { type: 'deadline', severity: 'warning', message: '2 tasks com deadline hoje', detail: '#123, #125' },
                { type: 'review', severity: 'info', message: '1 task aguardando review', detail: '#125 - Code review PR #45' }
            ]
        };

        // ========================================
        // HELPER FUNCTIONS
        // ========================================

        // Calcula status da deadline (azul/amarelo/vermelho)
        function getDeadlineStatus(daysRemaining, daysTotal) {
            const percentRemaining = (daysRemaining / daysTotal) * 100;
            if (percentRemaining > 20) return { color: 'blue', label: 'No prazo', icon: 'fa-circle-check' };
            if (percentRemaining >= 10) return { color: 'yellow', label: 'Atenção', icon: 'fa-triangle-exclamation' };
            return { color: 'red', label: 'Crítico', icon: 'fa-circle-exclamation' };
        }

        // Calcula status do budget (azul/amarelo/vermelho)
        function getBudgetStatus(spent, planned) {
            const percentSpent = (spent / planned) * 100;
            if (percentSpent < 80) return { color: 'blue', label: 'Saudável' };
            if (percentSpent < 95) return { color: 'yellow', label: 'Atenção' };
            return { color: 'red', label: 'Crítico' };
        }

        // Calcula status do tempo (previsto vs realizado)
        function getTimeStatus(actual, estimate) {
            const percentUsed = (actual / estimate) * 100;
            if (percentUsed < 90) return { color: 'green', label: 'Dentro do previsto' };
            if (percentUsed <= 100) return { color: 'yellow', label: 'Próximo do limite' };
            return { color: 'red', label: 'Estorou' };
        }

        // ========================================
        // VIEW TEMPLATES
        // ========================================
        const views = {
            dashboard: () => `
                <div class="animate-fade-in space-y-6 max-w-[1600px] mx-auto">
                    <!-- Header -->
                    <div class="flex justify-between items-end mb-2">
                        <div>
                            <h1 class="text-2xl font-bold text-gray-900">Dashboard</h1>
                            <p class="text-gray-500 mt-1">Visão geral do ${mockData.currentSprint.id}</p>
                        </div>
                        <div class="flex space-x-2">
                            <button class="bg-white border border-gray-300 text-gray-700 px-3 py-1.5 rounded text-xs font-medium hover:bg-gray-50">Semana</button>
                            <button class="bg-gray-100 text-gray-500 px-3 py-1.5 rounded text-xs font-medium hover:bg-gray-200">Hoje</button>
                        </div>
                    </div>

                    <!-- Row 1: Key Metrics (3 cols) -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">

                        <!-- Card: Sprint Atual -->
                        <div class="bg-white p-5 rounded-lg border border-gray-200 shadow-card hover:shadow-card-hover transition-shadow">
                            <div class="flex justify-between items-start mb-4">
                                <div>
                                    <h3 class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-1">Sprint Atual</h3>
                                    <div class="text-xl font-bold text-gray-900">${mockData.currentSprint.id}</div>
                                </div>
                                <span class="bg-blue-50 text-primary-blue text-xs font-medium px-2.5 py-0.5 rounded-full border border-blue-100">${mockData.currentSprint.daysRemaining} dias rest.</span>
                            </div>
                            <div class="space-y-2">
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-600">Progresso</span>
                                    <span class="font-bold text-gray-900">${mockData.currentSprint.progress}%</span>
                                </div>
                                <div class="w-full bg-gray-100 rounded-full h-2">
                                    <div class="bg-status-success h-2 rounded-full progress-bar" style="width: ${mockData.currentSprint.progress}%"></div>
                                </div>
                                <p class="text-xs text-gray-400 pt-1">${mockData.currentSprint.completedPoints} de ${mockData.currentSprint.totalPoints} Story Points completados</p>
                            </div>
                            <div class="mt-4 pt-4 border-t border-gray-100">
                                <button onclick="switchView('kanban')" class="text-primary-blue text-sm font-medium hover:underline flex items-center">
                                    Ver Kanban Board <i class="fa-solid fa-arrow-right ml-2 text-xs"></i>
                                </button>
                            </div>
                        </div>

                        <!-- Card: Velocity -->
                        <div class="bg-white p-5 rounded-lg border border-gray-200 shadow-card hover:shadow-card-hover transition-shadow">
                            <div class="flex justify-between items-start mb-2">
                                <h3 class="text-xs font-bold text-gray-500 uppercase tracking-wider">Velocity</h3>
                                <i class="fa-solid fa-bolt text-gray-300"></i>
                            </div>
                            <div class="flex items-end space-x-2 h-24 mb-2 pt-2">
                                ${mockData.velocity.map((v, i) => `
                                    <div class="flex-1 flex flex-col justify-end group">
                                        <div class="w-full ${i === mockData.velocity.length - 1 ? 'bg-status-success' : 'bg-gray-200'} rounded-t group-hover:bg-primary-blue transition-colors relative" style="height: ${(v.points / 20) * 100}%">
                                            <div class="opacity-0 group-hover:opacity-100 absolute -top-8 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white text-[10px] px-2 py-1 rounded whitespace-nowrap">${v.points}pts</div>
                                        </div>
                                        <span class="text-[10px] text-gray-400 text-center mt-1 ${i === mockData.velocity.length - 1 ? 'font-bold text-gray-900' : ''}">${v.week}</span>
                                    </div>
                                `).join('')}
                            </div>
                            <div class="flex justify-between items-center text-sm">
                                <div>
                                    <span class="font-bold text-lg">16 pts</span>
                                    <span class="text-gray-500 text-xs">/sprint (média)</span>
                                </div>
                                <span class="text-status-success font-medium text-xs flex items-center bg-green-50 px-2 py-1 rounded">
                                    <i class="fa-solid fa-arrow-up mr-1"></i> +2 pts
                                </span>
                            </div>
                        </div>

                        <!-- Card: Bloqueadores -->
                        <div class="bg-white p-5 rounded-lg border border-gray-200 shadow-card hover:shadow-card-hover transition-shadow relative overflow-hidden">
                            <div class="absolute top-0 right-0 p-4 opacity-10">
                                <i class="fa-solid fa-circle-exclamation text-6xl text-status-danger"></i>
                            </div>
                            <div class="flex items-center space-x-3 mb-4">
                                <div class="bg-red-100 text-status-danger h-10 w-10 rounded-full flex items-center justify-center font-bold text-lg">${mockData.blockers.length}</div>
                                <div>
                                    <h3 class="font-bold text-gray-900">Bloqueadores Ativos</h3>
                                    <p class="text-xs text-gray-500">Requerem atenção imediata</p>
                                </div>
                            </div>
                            <div class="space-y-3">
                                ${mockData.blockers.slice(0, 2).map(b => `
                                    <div class="flex items-start p-2 ${b.priority === 'Alta' ? 'bg-red-50 border-l-2 border-status-danger' : 'bg-yellow-50 border-l-2 border-status-warning'} rounded text-sm hover:${b.priority === 'Alta' ? 'bg-red-100' : 'bg-yellow-100'} cursor-pointer transition-colors">
                                        <div class="min-w-[16px] mt-0.5 mr-2 ${b.priority === 'Alta' ? 'text-status-danger' : 'text-status-warning'}">
                                            <i class="fa-solid ${b.priority === 'Alta' ? 'fa-ban' : 'fa-triangle-exclamation'}"></i>
                                        </div>
                                        <div>
                                            <p class="font-medium text-gray-900">${b.id}: ${b.title}</p>
                                            <p class="text-xs text-gray-500 mt-0.5">${b.priority} Prioridade • ${b.assignee}</p>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                            <div class="mt-4 text-right">
                                <button onclick="switchView('cockpit')" class="text-xs text-gray-500 hover:text-gray-900 font-medium">Ver todos</button>
                            </div>
                        </div>
                    </div>

                    <!-- Row 2: Main Content -->
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

                        <!-- Left: My Tasks -->
                        <div class="bg-white rounded-lg border border-gray-200 shadow-card flex flex-col">
                            <div class="p-4 border-b border-gray-100 flex justify-between items-center bg-gray-50 rounded-t-lg">
                                <h3 class="font-bold text-gray-800"><i class="fa-regular fa-square-check mr-2 text-gray-400"></i>Minhas Tasks Hoje</h3>
                                <span class="bg-gray-200 text-gray-600 text-xs px-2 py-0.5 rounded-full font-bold">${mockData.tasks.filter(t => t.deadline === 'Hoje').length}</span>
                            </div>
                            <div class="p-2 overflow-y-auto max-h-[400px]">
                                ${mockData.tasks.filter(t => t.deadline === 'Hoje').map(task => `
                                    <label class="flex items-start p-3 hover:bg-gray-50 rounded-lg cursor-pointer group transition-colors">
                                        <input type="checkbox" class="custom-checkbox mt-1 h-4 w-4 text-primary-blue rounded border-gray-300 focus:ring-primary-blue">
                                        <div class="ml-3 flex-1">
                                            <div class="flex justify-between items-start">
                                                <span class="text-sm font-medium text-gray-900 group-hover:text-primary-blue transition-colors">#${task.id} - ${task.title}</span>
                                                <span class="bg-${task.priority === 'P0' ? 'red' : 'orange'}-100 text-${task.priority === 'P0' ? 'red' : 'orange'}-800 text-[10px] font-bold px-1.5 py-0.5 rounded ml-2">${task.priority}</span>
                                            </div>
                                            <div class="flex items-center mt-1 space-x-2 text-xs text-gray-500">
                                                <span class="flex items-center text-status-warning font-medium"><i class="fa-regular fa-clock mr-1"></i> ${task.deadline}</span>
                                                <span>•</span>
                                                <span>${task.project}</span>
                                            </div>
                                        </div>
                                    </label>
                                `).join('')}
                                <div class="p-2 mt-2">
                                    <button class="w-full border border-dashed border-gray-300 text-gray-500 rounded-md py-2 text-xs font-medium hover:border-primary-blue hover:text-primary-blue transition-colors flex items-center justify-center">
                                        <i class="fa-solid fa-plus mr-1"></i> Adicionar task rápida
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Right: Burndown & Projects -->
                        <div class="lg:col-span-2 flex flex-col gap-6">
                            <!-- Burndown Chart -->
                            <div class="bg-white p-5 rounded-lg border border-gray-200 shadow-card">
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="font-bold text-gray-900">Burndown do Sprint</h3>
                                    <div class="flex items-center text-xs space-x-3">
                                        <div class="flex items-center"><span class="w-3 h-0.5 bg-blue-400 opacity-50 border-t border-dashed mr-1"></span> Ideal</div>
                                        <div class="flex items-center"><span class="w-3 h-0.5 bg-red-500 mr-1"></span> Real</div>
                                    </div>
                                </div>
                                <div class="relative w-full h-48">
                                    <svg viewBox="0 0 400 200" class="w-full h-full overflow-visible">
                                        <!-- Grid lines -->
                                        <line x1="0" y1="0" x2="400" y2="0" stroke="#f3f4f6" stroke-width="1" />
                                        <line x1="0" y1="50" x2="400" y2="50" stroke="#f3f4f6" stroke-width="1" />
                                        <line x1="0" y1="100" x2="400" y2="100" stroke="#f3f4f6" stroke-width="1" />
                                        <line x1="0" y1="150" x2="400" y2="150" stroke="#f3f4f6" stroke-width="1" />
                                        <line x1="0" y1="200" x2="400" y2="200" stroke="#e5e7eb" stroke-width="2" />

                                        <!-- Ideal Line (Blue Dashed) -->
                                        <line x1="0" y1="0" x2="400" y2="200" stroke="#3B82F6" stroke-width="2" stroke-dasharray="5,5" opacity="0.4" />

                                        <!-- Real Line (Red Solid) -->
                                        <polyline points="0,0 40,10 80,30 120,30 160,50 200,60 240,60" fill="none" stroke="#EF4444" stroke-width="2.5" />
                                        <polygon points="0,0 40,10 80,30 120,30 160,50 200,60 240,60 240,120 0,0" fill="#EF4444" opacity="0.05" />

                                        <!-- Current Point -->
                                        <circle cx="240" cy="60" r="4" fill="#EF4444" class="animate-pulse" />

                                        <!-- Tooltip -->
                                        <g transform="translate(250, 40)">
                                            <rect x="0" y="0" width="100" height="40" rx="4" fill="#1F2937" opacity="0.9" />
                                            <text x="10" y="15" fill="white" font-size="10" font-family="Inter">Dia 7: 14 pts</text>
                                            <text x="10" y="30" fill="#FCA5A5" font-size="9" font-family="Inter">4 pts atrasado</text>
                                        </g>
                                    </svg>
                                    <div class="flex justify-between text-[10px] text-gray-400 mt-2">
                                        <span>D1</span><span>D2</span><span>D3</span><span>D4</span><span>D5</span><span>D6</span>
                                        <span class="text-status-danger font-bold">Hoje</span>
                                        <span>D8</span><span>D9</span><span>D10</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Active Projects -->
                            <div class="bg-white rounded-lg border border-gray-200 shadow-card flex-1">
                                <div class="px-5 py-4 border-b border-gray-100 flex justify-between items-center">
                                    <h3 class="font-bold text-gray-900">Projetos Ativos</h3>
                                    <button onclick="switchView('projetos')" class="text-xs text-primary-blue hover:underline">Ver todos</button>
                                </div>
                                <div class="p-0">
                                    <table class="w-full text-sm text-left">
                                        <thead class="text-xs text-gray-500 uppercase bg-gray-50">
                                            <tr>
                                                <th class="px-5 py-3">Projeto</th>
                                                <th class="px-5 py-3">Status</th>
                                                <th class="px-5 py-3">Progresso</th>
                                                <th class="px-5 py-3 text-right">Team</th>
                                            </tr>
                                        </thead>
                                        <tbody class="divide-y divide-gray-100">
                                            ${mockData.projects.filter(p => p.status === 'Ativo').map(proj => `
                                                <tr class="hover:bg-gray-50 cursor-pointer" onclick="switchView('projetos')">
                                                    <td class="px-5 py-3 font-medium">${proj.name}</td>
                                                    <td class="px-5 py-3">
                                                        <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${proj.status === 'Ativo' ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'}">${proj.status}</span>
                                                    </td>
                                                    <td class="px-5 py-3">
                                                        <div class="flex items-center">
                                                            <span class="mr-2 text-xs">${proj.progress}%</span>
                                                            <div class="w-20 bg-gray-200 rounded-full h-1.5">
                                                                <div class="bg-primary-blue h-1.5 rounded-full" style="width: ${proj.progress}%"></div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td class="px-5 py-3 text-right">
                                                        <div class="flex -space-x-2 justify-end">
                                                            ${proj.team.slice(0, 2).map(member => `
                                                                <img class="w-6 h-6 rounded-full border-2 border-white" src="https://ui-avatars.com/api/?name=${member}&background=random" alt="">
                                                            `).join('')}
                                                            ${proj.team.length > 2 ? `<span class="flex items-center justify-center w-6 h-6 text-[10px] font-medium text-white bg-gray-400 border-2 border-white rounded-full">+${proj.team.length - 2}</span>` : ''}
                                                        </div>
                                                    </td>
                                                </tr>
                                            `).join('')}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `,

            projetos: () => `
                <div class="animate-fade-in space-y-6 max-w-[1400px] mx-auto">
                    <div class="flex justify-between items-center">
                        <div>
                            <h1 class="text-2xl font-bold text-gray-900">Projetos</h1>
                            <p class="text-gray-500 mt-1">${mockData.projects.length} projetos ativos</p>
                        </div>
                        <button onclick="openNovoProjeto()" class="bg-primary-blue text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-primary-dark shadow-sm flex items-center">
                            <i class="fa-solid fa-plus mr-2"></i> Novo Projeto
                        </button>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        ${mockData.projects.map(proj => `
                            <div onclick="openDetalheProjeto('${proj.id}')" class="bg-white p-6 rounded-lg border border-gray-200 shadow-card hover:shadow-card-hover transition-all cursor-pointer group">
                                <div class="flex justify-between items-start mb-4">
                                    <div>
                                        <h3 class="text-lg font-bold text-gray-900 group-hover:text-primary-blue transition-colors">${proj.name}</h3>
                                        <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium mt-2 ${
                                            proj.status === 'Ativo' ? 'bg-green-100 text-green-800' :
                                            proj.status === 'Pausado' ? 'bg-yellow-100 text-yellow-800' :
                                            'bg-gray-100 text-gray-800'
                                        }">${proj.status}</span>
                                    </div>
                                    <span class="bg-${proj.priority === 'P0' ? 'red' : proj.priority === 'P1' ? 'orange' : 'gray'}-100 text-${proj.priority === 'P0' ? 'red' : proj.priority === 'P1' ? 'orange' : 'gray'}-800 text-xs font-bold px-2 py-1 rounded">${proj.priority}</span>
                                </div>

                                <div class="space-y-3">
                                    <div>
                                        <div class="flex justify-between text-sm mb-1">
                                            <span class="text-gray-600">Progresso</span>
                                            <span class="font-bold text-gray-900">${proj.progress}%</span>
                                        </div>
                                        <div class="w-full bg-gray-100 rounded-full h-2">
                                            <div class="bg-primary-blue h-2 rounded-full progress-bar" style="width: ${proj.progress}%"></div>
                                        </div>
                                    </div>

                                    ${(() => {
                                        const deadlineStatus = getDeadlineStatus(proj.daysRemaining, proj.daysTotal);
                                        const statusColors = {
                                            blue: { bg: 'bg-blue-100', text: 'text-blue-700', border: 'border-blue-300' },
                                            yellow: { bg: 'bg-yellow-100', text: 'text-yellow-700', border: 'border-yellow-300' },
                                            red: { bg: 'bg-red-100', text: 'text-red-700', border: 'border-red-300' }
                                        };
                                        const colors = statusColors[deadlineStatus.color];
                                        return `
                                            <div class="p-3 rounded-lg border ${colors.border} ${colors.bg}">
                                                <div class="flex items-center justify-between">
                                                    <div>
                                                        <p class="text-xs ${colors.text} font-semibold mb-0.5">
                                                            <i class="fa-solid ${deadlineStatus.icon} mr-1"></i>
                                                            ${deadlineStatus.label}
                                                        </p>
                                                        <p class="text-xs ${colors.text}">Finaliza em ${proj.daysRemaining} dias</p>
                                                    </div>
                                                    <div class="text-right">
                                                        <p class="text-xs text-gray-500">Deadline</p>
                                                        <p class="text-sm font-bold ${colors.text}">${proj.deadline}</p>
                                                    </div>
                                                </div>
                                            </div>
                                        `;
                                    })()}

                                    <div class="flex items-center justify-between pt-3 border-t border-gray-100">
                                        <div class="text-xs text-gray-500">Equipe</div>
                                        <div class="flex -space-x-2">
                                            ${proj.team.map(member => `
                                                <img class="w-7 h-7 rounded-full border-2 border-white" src="https://ui-avatars.com/api/?name=${member}&background=random" alt="${member}">
                                            `).join('')}
                                        </div>
                                    </div>
                                </div>

                                <div class="mt-4 pt-4 border-t border-gray-100 flex space-x-2">
                                    <button onclick="switchView('kanban')" class="flex-1 text-xs text-primary-blue hover:text-primary-dark font-medium">
                                        <i class="fa-solid fa-bullseye mr-1"></i> Kanban
                                    </button>
                                    <button class="flex-1 text-xs text-gray-600 hover:text-gray-900 font-medium">
                                        <i class="fa-solid fa-chart-line mr-1"></i> Analytics
                                    </button>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `,

            kanban: () => `
                <div class="animate-fade-in h-full flex flex-col">
                    <!-- Header -->
                    <div class="flex justify-between items-center mb-6 shrink-0">
                        <div class="flex items-center">
                            <h1 class="text-2xl font-bold text-gray-900 mr-4">KANBAN - CHATBOT</h1>
                            <div class="flex items-center bg-white border border-gray-200 rounded-full px-3 py-1 shadow-sm cursor-pointer hover:border-blue-300">
                                <span class="w-2 h-2 rounded-full bg-status-success mr-2 pulse-soft"></span>
                                <span class="text-xs font-medium text-gray-700">Sprint-W02 (${mockData.currentSprint.progress}%)</span>
                            </div>
                        </div>
                        <div class="flex items-center space-x-3">
                            <!-- Team filters -->
                            <div class="flex items-center -space-x-1 mr-4">
                                ${mockData.team.slice(0, 3).map((member, i) => `
                                    <img class="h-8 w-8 rounded-full border-2 border-white cursor-pointer hover:z-10 ${i > 0 ? 'grayscale opacity-50 hover:opacity-100 hover:grayscale-0' : ''}" src="${member.avatar}" title="${member.name}">
                                `).join('')}
                                <div class="h-8 w-8 rounded-full border-2 border-white bg-gray-100 flex items-center justify-center text-xs text-gray-500 cursor-pointer hover:bg-gray-200">+1</div>
                            </div>
                            <button class="bg-white border border-gray-300 text-gray-700 px-3 py-2 rounded-md text-xs font-medium hover:bg-gray-50 flex items-center shadow-sm">
                                <i class="fa-solid fa-filter mr-2 text-gray-400"></i> Filtros
                            </button>
                            <button onclick="openNovaTask()" class="bg-primary-blue text-white px-3 py-2 rounded-md text-xs font-medium hover:bg-primary-dark shadow-sm flex items-center">
                                <i class="fa-solid fa-plus mr-1"></i> Nova Task
                            </button>
                        </div>
                    </div>

                    <!-- Kanban Board -->
                    <div class="flex-1 overflow-x-auto pb-4">
                        <div class="flex h-full min-w-[1000px] space-x-4">
                            ${renderKanbanColumn('TODO', 'gray', mockData.tasks.filter(t => t.status === 'todo'))}
                            ${renderKanbanColumn('IN PROGRESS', 'primary', mockData.tasks.filter(t => t.status === 'in-progress'))}
                            ${renderKanbanColumn('IN REVIEW', 'info', mockData.tasks.filter(t => t.status === 'in-review'))}
                            ${renderKanbanColumn('DONE', 'success', mockData.tasks.filter(t => t.status === 'done'))}
                        </div>
                    </div>
                </div>
            `,

            equipe: () => `
                <div class="animate-fade-in space-y-6 max-w-[1400px] mx-auto">
                    <div class="flex justify-between items-center">
                        <div>
                            <h1 class="text-2xl font-bold text-gray-900">Equipe</h1>
                            <p class="text-gray-500 mt-1">${mockData.team.length} membros ativos</p>
                        </div>
                        <button class="bg-primary-blue text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-primary-dark shadow-sm flex items-center">
                            <i class="fa-solid fa-user-plus mr-2"></i> Convidar Membro
                        </button>
                    </div>

                    <!-- Filters -->
                    <div class="flex space-x-3">
                        <button class="px-3 py-1.5 rounded-md text-xs font-medium bg-primary-blue text-white">Todos</button>
                        <button class="px-3 py-1.5 rounded-md text-xs font-medium bg-white border border-gray-300 text-gray-700 hover:bg-gray-50">Developers</button>
                        <button class="px-3 py-1.5 rounded-md text-xs font-medium bg-white border border-gray-300 text-gray-700 hover:bg-gray-50">Designers</button>
                        <button class="px-3 py-1.5 rounded-md text-xs font-medium bg-white border border-gray-300 text-gray-700 hover:bg-gray-50">Managers</button>
                    </div>

                    <!-- Team Grid -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                        ${mockData.team.map(member => `
                            <div class="bg-white p-6 rounded-lg border border-gray-200 shadow-card hover:shadow-card-hover transition-all cursor-pointer group" onclick="switchView('equipe-perfil', '${member.id}')">
                                <div class="flex items-start justify-between mb-4">
                                    <img class="w-16 h-16 rounded-full border-2 border-gray-100" src="${member.avatar}" alt="${member.name}">
                                    <span class="px-2 py-0.5 rounded text-[10px] font-bold ${
                                        member.status === 'overallocated' ? 'bg-red-100 text-red-800' :
                                        member.status === 'full' ? 'bg-green-100 text-green-800' :
                                        'bg-yellow-100 text-yellow-800'
                                    }">${member.totalAllocation}%</span>
                                </div>

                                <div class="space-y-2">
                                    <div>
                                        <h3 class="text-base font-bold text-gray-900 group-hover:text-primary-blue transition-colors">${member.name}</h3>
                                        <p class="text-xs text-gray-500">${member.role}</p>
                                    </div>

                                    <div class="flex items-center space-x-1 flex-wrap">
                                        ${member.skills.slice(0, 3).map(skill => `
                                            <span class="bg-gray-100 text-gray-700 text-[10px] px-2 py-0.5 rounded">${skill}</span>
                                        `).join('')}
                                        ${member.skills.length > 3 ? `<span class="text-gray-400 text-[10px]">+${member.skills.length - 3}</span>` : ''}
                                    </div>

                                    <div class="pt-3 border-t border-gray-100">
                                        <div class="flex justify-between text-xs mb-1">
                                            <span class="text-gray-500">Alocação</span>
                                            <span class="font-bold ${
                                                member.status === 'overallocated' ? 'text-red-600' :
                                                member.status === 'full' ? 'text-green-600' :
                                                'text-yellow-600'
                                            }">${member.totalAllocation}%</span>
                                        </div>
                                        <div class="w-full bg-gray-100 rounded-full h-1.5">
                                            <div class="${
                                                member.status === 'overallocated' ? 'bg-red-500' :
                                                member.status === 'full' ? 'bg-green-500' :
                                                'bg-yellow-500'
                                            } h-1.5 rounded-full" style="width: ${Math.min(member.totalAllocation, 100)}%"></div>
                                        </div>
                                    </div>

                                    <div class="text-[10px] text-gray-400 mt-2">
                                        ${member.allocations.length} projeto${member.allocations.length !== 1 ? 's' : ''} • ${member.velocity || 0} pts/sprint
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `,

            capacity: () => `
                <div class="animate-fade-in space-y-6 max-w-[1600px] mx-auto">
                    <div class="flex justify-between items-center">
                        <div>
                            <h1 class="text-2xl font-bold text-gray-900">Capacidade da Equipe</h1>
                            <p class="text-gray-500 mt-1">Gestão de alocação e disponibilidade</p>
                        </div>
                        <div class="flex space-x-2">
                            <button class="bg-white border border-gray-300 text-gray-700 px-3 py-1.5 rounded text-xs font-medium hover:bg-gray-50">Esta Semana</button>
                            <button class="bg-gray-100 text-gray-500 px-3 py-1.5 rounded text-xs font-medium hover:bg-gray-200">Próximas 4 Semanas</button>
                        </div>
                    </div>

                    <!-- Capacity Overview -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-card">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-xs text-gray-500 uppercase tracking-wider">Overallocated</p>
                                    <p class="text-2xl font-bold text-red-600 mt-1">${mockData.team.filter(m => m.status === 'overallocated').length}</p>
                                </div>
                                <div class="bg-red-100 p-3 rounded-full">
                                    <i class="fa-solid fa-triangle-exclamation text-red-600"></i>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-card">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-xs text-gray-500 uppercase tracking-wider">Full Capacity</p>
                                    <p class="text-2xl font-bold text-green-600 mt-1">${mockData.team.filter(m => m.status === 'full').length}</p>
                                </div>
                                <div class="bg-green-100 p-3 rounded-full">
                                    <i class="fa-solid fa-check text-green-600"></i>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-card">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-xs text-gray-500 uppercase tracking-wider">Available</p>
                                    <p class="text-2xl font-bold text-yellow-600 mt-1">${mockData.team.filter(m => m.status === 'available').length}</p>
                                </div>
                                <div class="bg-yellow-100 p-3 rounded-full">
                                    <i class="fa-solid fa-clock text-yellow-600"></i>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-card">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-xs text-gray-500 uppercase tracking-wider">Total Capacity</p>
                                    <p class="text-2xl font-bold text-gray-900 mt-1">${mockData.team.length * 40}h</p>
                                </div>
                                <div class="bg-gray-100 p-3 rounded-full">
                                    <i class="fa-solid fa-users text-gray-600"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Capacity Table -->
                    <div class="bg-white rounded-lg border border-gray-200 shadow-card overflow-hidden">
                        <div class="px-6 py-4 border-b border-gray-100">
                            <h3 class="font-bold text-gray-900">Alocação Detalhada</h3>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="w-full text-sm">
                                <thead class="text-xs text-gray-500 uppercase bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left">Pessoa</th>
                                        <th class="px-6 py-3 text-left">Função</th>
                                        <th class="px-6 py-3 text-left">Projetos</th>
                                        <th class="px-6 py-3 text-center">Alocação Total</th>
                                        <th class="px-6 py-3 text-center">Horas/Semana</th>
                                        <th class="px-6 py-3 text-center">Status</th>
                                        <th class="px-6 py-3 text-right">Ações</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-gray-100">
                                    ${mockData.team.map(member => `
                                        <tr class="hover:bg-gray-50 cursor-pointer" onclick="switchView('equipe-perfil', '${member.id}')">
                                            <td class="px-6 py-4">
                                                <div class="flex items-center">
                                                    <img class="w-8 h-8 rounded-full mr-3" src="${member.avatar}" alt="${member.name}">
                                                    <div>
                                                        <div class="font-medium text-gray-900">${member.name}</div>
                                                        <div class="text-xs text-gray-500">${member.email}</div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td class="px-6 py-4">
                                                <div class="text-sm text-gray-900">${member.role}</div>
                                                <div class="text-xs text-gray-500">${member.seniority}</div>
                                            </td>
                                            <td class="px-6 py-4">
                                                <div class="space-y-1">
                                                    ${member.allocations.map(alloc => `
                                                        <div class="text-xs">
                                                            <span class="font-medium">${alloc.project}</span>
                                                            <span class="text-gray-500">(${alloc.percentage}%)</span>
                                                        </div>
                                                    `).join('')}
                                                </div>
                                            </td>
                                            <td class="px-6 py-4 text-center">
                                                <div class="flex items-center justify-center">
                                                    <span class="font-bold ${
                                                        member.status === 'overallocated' ? 'text-red-600' :
                                                        member.status === 'full' ? 'text-green-600' :
                                                        'text-yellow-600'
                                                    }">${member.totalAllocation}%</span>
                                                </div>
                                            </td>
                                            <td class="px-6 py-4 text-center">
                                                <span class="font-mono text-sm">${member.allocations.reduce((sum, a) => sum + a.hours, 0)}h / 40h</span>
                                            </td>
                                            <td class="px-6 py-4 text-center">
                                                <span class="inline-flex items-center px-2 py-1 rounded text-xs font-medium ${
                                                    member.status === 'overallocated' ? 'bg-red-100 text-red-800' :
                                                    member.status === 'full' ? 'bg-green-100 text-green-800' :
                                                    'bg-yellow-100 text-yellow-800'
                                                }">
                                                    ${member.status === 'overallocated' ? '🔴 Overallocated' :
                                                      member.status === 'full' ? '🟢 Full' :
                                                      '🟡 Available'}
                                                </span>
                                            </td>
                                            <td class="px-6 py-4 text-right">
                                                <button class="text-primary-blue hover:text-primary-dark text-xs font-medium">Ajustar</button>
                                            </td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            `,

            cockpit: () => `
                <div class="animate-fade-in space-y-6 max-w-[1600px] mx-auto">
                    <div class="flex justify-between items-center">
                        <div>
                            <h1 class="text-2xl font-bold text-gray-900">Manager Cockpit</h1>
                            <p class="text-gray-500 mt-1">Gestão por exceção - O que precisa de atenção AGORA</p>
                        </div>
                        <div class="flex items-center space-x-3">
                            <span class="text-xs text-gray-500">Última atualização: há 2 minutos</span>
                            <button class="bg-white border border-gray-300 text-gray-700 px-3 py-1.5 rounded text-xs font-medium hover:bg-gray-50">
                                <i class="fa-solid fa-rotate mr-1"></i> Atualizar
                            </button>
                        </div>
                    </div>

                    <!-- Critical Alerts -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        ${mockData.alerts.map(alert => `
                            <div class="bg-white p-5 rounded-lg border-l-4 ${
                                alert.severity === 'danger' ? 'border-red-500' :
                                alert.severity === 'warning' ? 'border-yellow-500' :
                                'border-blue-500'
                            } shadow-card hover:shadow-card-hover transition-all cursor-pointer group">
                                <div class="flex items-start">
                                    <div class="flex-shrink-0">
                                        <div class="w-10 h-10 rounded-full ${
                                            alert.severity === 'danger' ? 'bg-red-100' :
                                            alert.severity === 'warning' ? 'bg-yellow-100' :
                                            'bg-blue-100'
                                        } flex items-center justify-center">
                                            <i class="fa-solid ${
                                                alert.severity === 'danger' ? 'fa-circle-exclamation text-red-600' :
                                                alert.severity === 'warning' ? 'fa-triangle-exclamation text-yellow-600' :
                                                'fa-info-circle text-blue-600'
                                            }"></i>
                                        </div>
                                    </div>
                                    <div class="ml-4 flex-1">
                                        <h3 class="text-sm font-bold text-gray-900 group-hover:text-primary-blue transition-colors">${alert.message}</h3>
                                        <p class="text-xs text-gray-500 mt-1">${alert.detail}</p>
                                        <button class="text-xs text-primary-blue font-medium mt-2 hover:underline">Ver detalhes →</button>
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                    </div>

                    <!-- Detailed Sections -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Overallocated People -->
                        <div class="bg-white rounded-lg border border-gray-200 shadow-card">
                            <div class="px-6 py-4 border-b border-gray-100 flex justify-between items-center">
                                <h3 class="font-bold text-gray-900 flex items-center">
                                    <i class="fa-solid fa-triangle-exclamation text-red-600 mr-2"></i>
                                    Pessoas Sobrecarregadas
                                </h3>
                                <span class="bg-red-100 text-red-800 text-xs font-bold px-2 py-1 rounded">${mockData.team.filter(m => m.status === 'overallocated').length}</span>
                            </div>
                            <div class="divide-y divide-gray-100">
                                ${mockData.team.filter(m => m.status === 'overallocated').map(member => `
                                    <div class="px-6 py-4 hover:bg-gray-50 cursor-pointer" onclick="switchView('equipe-perfil', '${member.id}')">
                                        <div class="flex items-center justify-between">
                                            <div class="flex items-center">
                                                <img class="w-10 h-10 rounded-full mr-3" src="${member.avatar}" alt="${member.name}">
                                                <div>
                                                    <div class="font-medium text-gray-900">${member.name}</div>
                                                    <div class="text-xs text-gray-500">${member.role}</div>
                                                </div>
                                            </div>
                                            <div class="text-right">
                                                <div class="font-bold text-red-600">${member.totalAllocation}%</div>
                                                <div class="text-xs text-gray-500">${member.allocations.reduce((sum, a) => sum + a.hours, 0)}h/semana</div>
                                            </div>
                                        </div>
                                        <div class="mt-3 space-y-1">
                                            ${member.allocations.map(alloc => `
                                                <div class="flex justify-between text-xs">
                                                    <span class="text-gray-600">${alloc.project}</span>
                                                    <span class="font-medium">${alloc.percentage}% (${alloc.hours}h)</span>
                                                </div>
                                            `).join('')}
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>

                        <!-- Active Blockers -->
                        <div class="bg-white rounded-lg border border-gray-200 shadow-card">
                            <div class="px-6 py-4 border-b border-gray-100 flex justify-between items-center">
                                <h3 class="font-bold text-gray-900 flex items-center">
                                    <i class="fa-solid fa-ban text-red-600 mr-2"></i>
                                    Bloqueadores Ativos
                                </h3>
                                <span class="bg-red-100 text-red-800 text-xs font-bold px-2 py-1 rounded">${mockData.blockers.length}</span>
                            </div>
                            <div class="divide-y divide-gray-100">
                                ${mockData.blockers.map(blocker => `
                                    <div class="px-6 py-4 hover:bg-gray-50 cursor-pointer">
                                        <div class="flex items-start justify-between">
                                            <div class="flex-1">
                                                <div class="flex items-center">
                                                    <span class="font-mono text-xs text-gray-500 mr-2">${blocker.id}</span>
                                                    <span class="font-medium text-gray-900">${blocker.title}</span>
                                                </div>
                                                <div class="flex items-center mt-2 space-x-3 text-xs">
                                                    <span class="px-2 py-0.5 rounded ${blocker.priority === 'Alta' ? 'bg-red-100 text-red-800' : 'bg-yellow-100 text-yellow-800'} font-medium">${blocker.priority}</span>
                                                    <span class="text-gray-500">${blocker.project}</span>
                                                    <span class="text-gray-500">• ${blocker.assignee}</span>
                                                </div>
                                            </div>
                                            <button class="text-primary-blue hover:text-primary-dark text-xs font-medium ml-4">Resolver</button>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>

                    <!-- Sprint Risk -->
                    <div class="bg-white rounded-lg border border-gray-200 shadow-card">
                        <div class="px-6 py-4 border-b border-gray-100">
                            <h3 class="font-bold text-gray-900 flex items-center">
                                <i class="fa-solid fa-chart-line text-yellow-600 mr-2"></i>
                                Risco de Sprint
                            </h3>
                        </div>
                        <div class="p-6">
                            <div class="flex items-center justify-between mb-4">
                                <div>
                                    <p class="text-sm text-gray-600">Sprint ${mockData.currentSprint.id}</p>
                                    <p class="text-2xl font-bold text-yellow-600 mt-1">⚠️ Em Risco</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-sm text-gray-600">Faltam</p>
                                    <p class="text-2xl font-bold text-gray-900 mt-1">${mockData.currentSprint.daysRemaining} dias</p>
                                </div>
                            </div>
                            <div class="grid grid-cols-3 gap-4 pt-4 border-t border-gray-100">
                                <div>
                                    <p class="text-xs text-gray-500 uppercase tracking-wider">Planejado</p>
                                    <p class="text-xl font-bold text-gray-900 mt-1">${mockData.currentSprint.totalPoints} pts</p>
                                </div>
                                <div>
                                    <p class="text-xs text-gray-500 uppercase tracking-wider">Completado</p>
                                    <p class="text-xl font-bold text-green-600 mt-1">${mockData.currentSprint.completedPoints} pts</p>
                                </div>
                                <div>
                                    <p class="text-xs text-gray-500 uppercase tracking-wider">Restante</p>
                                    <p class="text-xl font-bold text-yellow-600 mt-1">${mockData.currentSprint.totalPoints - mockData.currentSprint.completedPoints} pts</p>
                                </div>
                            </div>
                            <div class="mt-4">
                                <button onclick="switchView('burndown')" class="text-primary-blue hover:text-primary-dark text-sm font-medium">
                                    Ver Burndown Chart →
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `,

            // ========================================
            // BACKLOG DO PRODUTO
            // ========================================
            backlog: () => `
                <div class="animate-fade-in space-y-6 max-w-[1600px] mx-auto">
                    <div class="flex justify-between items-center">
                        <div>
                            <h1 class="text-2xl font-bold text-gray-900">Backlog do Produto</h1>
                            <p class="text-gray-500 mt-1">Gerenciamento e priorização com Matriz GUT</p>
                        </div>
                        <button class="bg-primary-blue text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-primary-dark shadow-sm flex items-center">
                            <i class="fa-solid fa-plus mr-2"></i> Nova User Story
                        </button>
                    </div>

                    <!-- Filters -->
                    <div class="flex items-center justify-between bg-white p-4 rounded-lg border border-gray-200 shadow-card">
                        <div class="flex space-x-3">
                            <button class="px-3 py-1.5 rounded-md text-xs font-medium bg-primary-blue text-white">Todas</button>
                            <button class="px-3 py-1.5 rounded-md text-xs font-medium bg-white border border-gray-300 text-gray-700 hover:bg-gray-50">P0</button>
                            <button class="px-3 py-1.5 rounded-md text-xs font-medium bg-white border border-gray-300 text-gray-700 hover:bg-gray-50">P1</button>
                            <button class="px-3 py-1.5 rounded-md text-xs font-medium bg-white border border-gray-300 text-gray-700 hover:bg-gray-50">P2</button>
                        </div>
                        <div class="flex items-center space-x-3">
                            <span class="text-xs text-gray-500">Ordenar por:</span>
                            <select class="text-xs border border-gray-300 rounded px-2 py-1 focus:outline-none focus:border-primary-blue">
                                <option>Score GUT (maior primeiro)</option>
                                <option>Prioridade</option>
                                <option>Estimativa</option>
                                <option>Data criação</option>
                            </select>
                        </div>
                    </div>

                    <!-- Backlog Table -->
                    <div class="bg-white rounded-lg border border-gray-200 shadow-card overflow-hidden">
                        <table class="w-full text-sm">
                            <thead class="text-xs text-gray-500 uppercase bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-center w-20 bg-purple-50">
                                        <i class="fa-solid fa-grip-vertical mr-1"></i>ORDEM
                                    </th>
                                    <th class="px-6 py-3 text-left w-12">#</th>
                                    <th class="px-6 py-3 text-left">User Story</th>
                                    <th class="px-6 py-3 text-center w-24">GUT</th>
                                    <th class="px-6 py-3 text-center w-20">G</th>
                                    <th class="px-6 py-3 text-center w-20">U</th>
                                    <th class="px-6 py-3 text-center w-20">T</th>
                                    <th class="px-6 py-3 text-center w-24">Prioridade</th>
                                    <th class="px-6 py-3 text-center w-24">Estimativa</th>
                                    <th class="px-6 py-3 text-center w-32">Projeto</th>
                                    <th class="px-6 py-3 text-right w-32">Ações</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-100">
                                ${[
                                    { ordem: 1, id: 'US-001', title: 'Como usuário, quero fazer login com email/senha', gut: { g: 5, u: 5, t: 5, score: 125 }, priority: 'P0', estimate: '8 pts', project: 'CHATBOT', dependsOn: null, parallelWith: null },
                                    { ordem: 2, id: 'US-002', title: 'Como admin, quero criar novos projetos', gut: { g: 4, u: 5, t: 4, score: 80 }, priority: 'P0', estimate: '5 pts', project: 'CHATBOT', dependsOn: 'US-001', parallelWith: null },
                                    { ordem: 3, id: 'US-003', title: 'Como dev, quero ver o burndown do sprint', gut: { g: 3, u: 4, t: 4, score: 48 }, priority: 'P1', estimate: '3 pts', project: 'CHATBOT', dependsOn: 'US-002', parallelWith: null },
                                    { ordem: 3, id: 'US-004', title: 'Como PO, quero exportar relatório de velocity', gut: { g: 2, u: 3, t: 3, score: 18 }, priority: 'P2', estimate: '5 pts', project: 'CHATBOT', dependsOn: 'US-002', parallelWith: 'US-003' },
                                    { ordem: 1, id: 'US-005', title: 'Como manager, quero alocar pessoas em projetos', gut: { g: 5, u: 5, t: 5, score: 125 }, priority: 'P0', estimate: '8 pts', project: 'SITE-BUILDER', dependsOn: null, parallelWith: 'US-001' },
                                    { ordem: 4, id: 'US-006', title: 'Como usuário, quero receber notificações', gut: { g: 3, u: 3, t: 3, score: 27 }, priority: 'P1', estimate: '5 pts', project: 'NUTRITRAIN', dependsOn: 'US-003,US-004', parallelWith: null }
                                ].map(story => `
                                    <tr class="hover:bg-gray-50 cursor-pointer group">
                                        <!-- ORDEM (NOVO) -->
                                        <td class="px-6 py-4 bg-purple-50 border-r-2 border-purple-200">
                                            <div class="flex flex-col items-center space-y-1">
                                                <div class="flex items-center justify-center w-8 h-8 rounded-full bg-purple-600 text-white font-bold cursor-move group-hover:bg-purple-700 transition-colors" title="Arraste para reordenar">
                                                    ${story.ordem}
                                                </div>
                                                ${story.dependsOn ? `
                                                    <div class="text-[10px] text-purple-700 font-semibold flex items-center" title="Depende de: ${story.dependsOn}">
                                                        <i class="fa-solid fa-link mr-0.5"></i>
                                                        ${story.dependsOn}
                                                    </div>
                                                ` : ''}
                                                ${story.parallelWith ? `
                                                    <div class="text-[10px] text-green-700 font-semibold flex items-center" title="Pode fazer em paralelo com: ${story.parallelWith}">
                                                        <i class="fa-solid fa-equals mr-0.5"></i>
                                                        ${story.parallelWith}
                                                    </div>
                                                ` : ''}
                                            </div>
                                        </td>
                                        <td class="px-6 py-4">
                                            <span class="font-mono text-xs text-gray-500">${story.id}</span>
                                        </td>
                                        <td class="px-6 py-4">
                                            <div class="font-medium text-gray-900">${story.title}</div>
                                            ${story.dependsOn ? `
                                                <div class="text-xs text-purple-600 mt-1 flex items-center">
                                                    <i class="fa-solid fa-arrow-left mr-1"></i>
                                                    Aguarda conclusão de: <span class="font-semibold ml-1">${story.dependsOn}</span>
                                                </div>
                                            ` : ''}
                                            ${story.parallelWith ? `
                                                <div class="text-xs text-green-600 mt-1 flex items-center">
                                                    <i class="fa-solid fa-code-branch mr-1"></i>
                                                    Pode executar em paralelo com: <span class="font-semibold ml-1">${story.parallelWith}</span>
                                                </div>
                                            ` : ''}
                                        </td>
                                        <td class="px-6 py-4 text-center">
                                            <span class="inline-flex items-center px-2 py-1 rounded text-xs font-bold ${
                                                story.gut.score >= 100 ? 'bg-red-100 text-red-800' :
                                                story.gut.score >= 50 ? 'bg-orange-100 text-orange-800' :
                                                'bg-yellow-100 text-yellow-800'
                                            }">${story.gut.score}</span>
                                        </td>
                                        <td class="px-6 py-4 text-center">
                                            <span class="text-gray-600 font-medium">${story.gut.g}</span>
                                        </td>
                                        <td class="px-6 py-4 text-center">
                                            <span class="text-gray-600 font-medium">${story.gut.u}</span>
                                        </td>
                                        <td class="px-6 py-4 text-center">
                                            <span class="text-gray-600 font-medium">${story.gut.t}</span>
                                        </td>
                                        <td class="px-6 py-4 text-center">
                                            <span class="inline-flex items-center px-2 py-1 rounded text-xs font-medium ${
                                                story.priority === 'P0' ? 'bg-red-100 text-red-800' :
                                                story.priority === 'P1' ? 'bg-orange-100 text-orange-800' :
                                                'bg-gray-100 text-gray-800'
                                            }">${story.priority}</span>
                                        </td>
                                        <td class="px-6 py-4 text-center">
                                            <span class="font-medium text-gray-900">${story.estimate}</span>
                                        </td>
                                        <td class="px-6 py-4 text-center">
                                            <span class="text-xs text-gray-600">${story.project}</span>
                                        </td>
                                        <td class="px-6 py-4 text-right">
                                            <button class="text-primary-blue hover:text-primary-dark text-xs font-medium mr-3">Editar</button>
                                            <button class="text-green-600 hover:text-green-700 text-xs font-medium">→ Sprint</button>
                                        </td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>

                    <!-- ORDEM Info (NOVO) -->
                    <div class="bg-purple-50 border border-purple-300 rounded-lg p-4 mb-4">
                        <div class="flex items-start">
                            <div class="flex-shrink-0">
                                <i class="fa-solid fa-list-ol text-purple-600 text-xl"></i>
                            </div>
                            <div class="ml-3 flex-1">
                                <h3 class="text-sm font-bold text-purple-900 flex items-center">
                                    Coluna ORDEM - Sequência de Execução
                                    <span class="ml-2 bg-purple-600 text-white text-xs px-2 py-0.5 rounded-full">CRÍTICO</span>
                                </h3>
                                <p class="text-xs text-purple-700 mt-1">
                                    <i class="fa-solid fa-info-circle mr-1"></i>
                                    <strong>ATENÇÃO:</strong> ORDEM é diferente de PRIORIDADE. A ordem mostra a SEQUÊNCIA de execução, considerando dependências entre tarefas.
                                </p>
                                <div class="grid grid-cols-3 gap-4 mt-3 text-xs bg-white p-3 rounded border border-purple-200">
                                    <div class="flex items-start">
                                        <i class="fa-solid fa-grip-vertical text-purple-600 mr-2 mt-0.5"></i>
                                        <div>
                                            <span class="font-bold text-purple-900">Número da Ordem:</span>
                                            <p class="text-gray-700">Tarefas com mesma ordem podem ser executadas em paralelo</p>
                                        </div>
                                    </div>
                                    <div class="flex items-start">
                                        <i class="fa-solid fa-link text-purple-600 mr-2 mt-0.5"></i>
                                        <div>
                                            <span class="font-bold text-purple-900">Dependência:</span>
                                            <p class="text-gray-700">Mostra quais tarefas precisam estar prontas antes</p>
                                        </div>
                                    </div>
                                    <div class="flex items-start">
                                        <i class="fa-solid fa-code-branch text-green-600 mr-2 mt-0.5"></i>
                                        <div>
                                            <span class="font-bold text-green-900">Paralelismo:</span>
                                            <p class="text-gray-700">Indica tarefas que podem ser feitas simultaneamente</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="mt-3 p-2 bg-purple-100 rounded border border-purple-300">
                                    <p class="text-xs text-purple-900">
                                        <i class="fa-solid fa-lightbulb mr-1"></i>
                                        <strong>Exemplo:</strong> US-003 e US-004 têm ordem 3 e podem ser feitas em paralelo, mas ambas dependem de US-002 (ordem 2) estar pronta primeiro.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- GUT Info -->
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                        <div class="flex items-start">
                            <div class="flex-shrink-0">
                                <i class="fa-solid fa-info-circle text-blue-600 text-xl"></i>
                            </div>
                            <div class="ml-3 flex-1">
                                <h3 class="text-sm font-bold text-blue-900">Matriz GUT - Gravidade x Urgência x Tendência</h3>
                                <p class="text-xs text-blue-700 mt-1">Score = G × U × T (1 a 5 cada). Quanto maior o score, maior a prioridade.</p>
                                <div class="grid grid-cols-3 gap-4 mt-3 text-xs">
                                    <div><span class="font-bold">G:</span> Impacto se não for feito</div>
                                    <div><span class="font-bold">U:</span> Urgência temporal</div>
                                    <div><span class="font-bold">T:</span> Tendência de piorar</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `,

            // ========================================
            // PLANNING HUB (4 ABAS)
            // ========================================
            planning: () => `
                <div class="animate-fade-in h-full flex flex-col">
                    <!-- Header -->
                    <div class="flex justify-between items-center mb-6">
                        <div>
                            <h1 class="text-2xl font-bold text-gray-900">Planning Hub</h1>
                            <p class="text-gray-500 mt-1">Gestão integrada: Sprint → Product → Go-to-Market</p>
                        </div>
                        <div class="flex items-center space-x-3">
                            <span class="text-xs text-gray-500">
                                <i class="fa-solid fa-calendar mr-1"></i>
                                ${mockData.currentSprint.id} • ${mockData.currentSprint.daysRemaining} dias restantes
                            </span>
                        </div>
                    </div>

                    <!-- Tabs Navigation -->
                    <div class="border-b border-gray-200 mb-6">
                        <nav class="flex -mb-px space-x-6" id="planningTabs">
                            <button onclick="switchPlanningTab('sprint')" data-tab="sprint"
                                class="planning-tab-btn border-b-2 border-primary-blue text-primary-blue py-3 px-1 font-medium text-sm flex items-center">
                                <i class="fa-solid fa-stopwatch mr-2"></i>
                                Sprint Planning
                                <span class="ml-2 bg-blue-100 text-blue-700 text-xs px-2 py-0.5 rounded-full">Operacional</span>
                            </button>
                            <button onclick="switchPlanningTab('product')" data-tab="product"
                                class="planning-tab-btn border-b-2 border-transparent text-gray-500 hover:text-gray-700 py-3 px-1 font-medium text-sm flex items-center">
                                <i class="fa-solid fa-chart-line mr-2"></i>
                                Product Planning
                                <span class="ml-2 bg-purple-100 text-purple-700 text-xs px-2 py-0.5 rounded-full">Tático</span>
                            </button>
                            <button onclick="switchPlanningTab('gtm')" data-tab="gtm"
                                class="planning-tab-btn border-b-2 border-transparent text-gray-500 hover:text-gray-700 py-3 px-1 font-medium text-sm flex items-center">
                                <i class="fa-solid fa-bullhorn mr-2"></i>
                                Go-to-Market
                                <span class="ml-2 bg-green-100 text-green-700 text-xs px-2 py-0.5 rounded-full">Estratégico</span>
                            </button>
                            <button onclick="switchPlanningTab('bridge')" data-tab="bridge"
                                class="planning-tab-btn border-b-2 border-transparent text-gray-500 hover:text-gray-700 py-3 px-1 font-medium text-sm flex items-center">
                                <i class="fa-solid fa-link mr-2"></i>
                                Planning Bridge
                                <span class="ml-2 bg-orange-100 text-orange-700 text-xs px-2 py-0.5 rounded-full">Consolidado</span>
                            </button>
                        </nav>
                    </div>

                    <!-- Tab Content -->
                    <div class="flex-1 overflow-y-auto" id="planningTabContent">
                        <!-- Content will be dynamically loaded -->
                    </div>
                </div>
            `,

            // Função auxiliar para renderizar conteúdo das abas de Planning
            getPlanningTabContent: (tabName) => {
                const planningViews = {
                    sprint: () => `
                        <div class="space-y-6 max-w-[1600px]">
                            <!-- Header com Actions -->
                            <div class="flex justify-between items-center">
                                <div>
                                    <h2 class="text-xl font-bold text-gray-900">Sprint Planning - Dev Team</h2>
                                    <p class="text-sm text-gray-500 mt-1">Operacional • A cada 2 semanas</p>
                                </div>
                                <div class="flex space-x-3">
                                    <button class="bg-white border border-gray-300 text-gray-700 px-4 py-2 rounded-md text-sm font-medium hover:bg-gray-50">
                                        <i class="fa-solid fa-save mr-2"></i> Salvar Rascunho
                                    </button>
                                    <button class="bg-green-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-green-700 shadow-sm">
                                        <i class="fa-solid fa-check mr-2"></i> Finalizar Planning
                                    </button>
                                </div>
                            </div>

                            <!-- Sprint Info Cards -->
                            <div class="grid grid-cols-1 md:grid-cols-5 gap-4">
                                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-card">
                                    <p class="text-xs text-gray-500 uppercase tracking-wider mb-1">Sprint</p>
                                    <p class="text-lg font-bold text-gray-900">Sprint-2025-W03</p>
                                </div>
                                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-card">
                                    <p class="text-xs text-gray-500 uppercase tracking-wider mb-1">Duração</p>
                                    <p class="text-lg font-bold text-gray-900">27/01 - 07/02</p>
                                </div>
                                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-card">
                                    <p class="text-xs text-gray-500 uppercase tracking-wider mb-1">Velocity Média</p>
                                    <p class="text-lg font-bold text-primary-blue">16 pts/sprint</p>
                                    <p class="text-xs text-gray-500 mt-1">Últimos 3 sprints</p>
                                </div>
                                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-card">
                                    <p class="text-xs text-gray-500 uppercase tracking-wider mb-1">Capacity Disponível</p>
                                    <p class="text-lg font-bold text-green-600">120h</p>
                                    <p class="text-xs text-gray-500 mt-1">4 devs × 30h</p>
                                </div>
                                <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-card">
                                    <p class="text-xs text-gray-500 uppercase tracking-wider mb-1">Points Selecionados</p>
                                    <p class="text-lg font-bold ${12 > 16 ? 'text-red-600' : 'text-green-600'}">12 / 16 pts</p>
                                    <p class="text-xs ${12 > 16 ? 'text-red-600' : 'text-green-600'} mt-1">
                                        ${12 > 16 ? 'Overcommitment!' : '25% disponível'}
                                    </p>
                                </div>
                            </div>

                            <!-- Capacity Dashboard (NOVO) -->
                            <div class="bg-white rounded-lg border border-gray-200 shadow-card">
                                <div class="px-6 py-4 border-b border-gray-100 bg-gradient-to-r from-blue-50 to-blue-100">
                                    <h3 class="font-bold text-gray-900 flex items-center">
                                        <i class="fa-solid fa-gauge-high text-blue-600 mr-2"></i>
                                        Capacity da Equipe - Sprint W03
                                    </h3>
                                    <p class="text-xs text-gray-600 mt-1">Alocação por pessoa • Férias/time-off considerados</p>
                                </div>
                                <div class="p-6">
                                    <div class="space-y-4">
                                        ${mockData.team.map(member => {
                                            const sprintAllocation = 75; // Mock: % alocado neste sprint
                                            const sprintHours = 30; // 30h disponíveis no sprint
                                            const allocatedHours = (sprintAllocation / 100) * sprintHours;
                                            const status = sprintAllocation > 100 ? 'overallocated' : sprintAllocation > 80 ? 'full' : 'available';
                                            const statusColor = status === 'overallocated' ? 'red' : status === 'full' ? 'orange' : 'green';

                                            return `
                                                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
                                                    <div class="flex items-center space-x-4 flex-1">
                                                        <img class="w-12 h-12 rounded-full border-2 border-${statusColor}-300"
                                                             src="${member.avatar}" alt="${member.name}">
                                                        <div class="flex-1">
                                                            <h4 class="font-semibold text-gray-900">${member.name}</h4>
                                                            <p class="text-xs text-gray-500">${member.role}</p>
                                                        </div>
                                                    </div>
                                                    <div class="flex items-center space-x-6">
                                                        <div class="text-right">
                                                            <p class="text-sm text-gray-500">Alocação Sprint</p>
                                                            <p class="text-lg font-bold text-${statusColor}-600">${sprintAllocation}%</p>
                                                        </div>
                                                        <div class="text-right">
                                                            <p class="text-sm text-gray-500">Horas Disponíveis</p>
                                                            <p class="text-lg font-bold text-gray-900">${allocatedHours}h / 30h</p>
                                                        </div>
                                                        <div class="w-32">
                                                            <div class="w-full bg-gray-200 rounded-full h-2">
                                                                <div class="bg-${statusColor}-500 h-2 rounded-full transition-all" style="width: ${Math.min(sprintAllocation, 100)}%"></div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            `;
                                        }).join('')}
                                    </div>

                                    <!-- Alerts de Capacity -->
                                    ${mockData.team.some(m => m.totalAllocation > 100) ? `
                                        <div class="mt-4 bg-red-50 border-l-4 border-red-500 p-4 rounded">
                                            <div class="flex items-center">
                                                <i class="fa-solid fa-triangle-exclamation text-red-600 mr-3"></i>
                                                <div>
                                                    <p class="text-sm font-bold text-red-900">Alerta de Overcommitment</p>
                                                    <p class="text-xs text-red-700 mt-1">
                                                        ${mockData.team.filter(m => m.totalAllocation > 100).length} pessoa(s) com alocação acima de 100%.
                                                        Revise o planejamento ou redistribua tasks.
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    ` : ''}
                                </div>
                            </div>

                    <!-- Planning Poker BV/W Matrix -->
                    <div class="bg-white rounded-lg border border-gray-200 shadow-card overflow-hidden">
                        <div class="px-6 py-4 border-b border-gray-100 bg-gray-50">
                            <h3 class="font-bold text-gray-900">Matriz BV/W - Priorização Visual</h3>
                            <p class="text-xs text-gray-500 mt-1">Business Value (vertical) × Work/Esforço (horizontal)</p>
                        </div>
                        <div class="p-6">
                            <!-- Matrix Grid -->
                            <div class="relative" style="height: 400px;">
                                <!-- Axes -->
                                <div class="absolute left-0 top-0 bottom-0 w-px bg-gray-300"></div>
                                <div class="absolute left-0 bottom-0 right-0 h-px bg-gray-300"></div>

                                <!-- Quadrant Labels -->
                                <div class="absolute left-2 top-2 text-xs font-bold text-green-600">Alto BV / Baixo W<br/>(Quick Wins)</div>
                                <div class="absolute right-2 top-2 text-xs font-bold text-orange-600">Alto BV / Alto W<br/>(Major Projects)</div>
                                <div class="absolute left-2 bottom-2 text-xs font-bold text-gray-400">Baixo BV / Baixo W<br/>(Fill-Ins)</div>
                                <div class="absolute right-2 bottom-2 text-xs font-bold text-red-600">Baixo BV / Alto W<br/>(Time Wasters)</div>

                                <!-- Grid lines -->
                                ${[25, 50, 75].map(p => `
                                    <div class="absolute left-0 right-0 border-t border-dashed border-gray-200" style="top: ${100-p}%"></div>
                                    <div class="absolute top-0 bottom-0 border-l border-dashed border-gray-200" style="left: ${p}%"></div>
                                `).join('')}

                                <!-- Tasks as dots -->
                                ${[
                                    { id: 'US-001', bv: 8, w: 2, selected: true },
                                    { id: 'US-002', bv: 7, w: 3, selected: true },
                                    { id: 'US-003', bv: 6, w: 4, selected: false },
                                    { id: 'US-005', bv: 8, w: 7, selected: false },
                                    { id: 'US-004', bv: 3, w: 5, selected: false }
                                ].map(task => {
                                    const x = (task.w / 8) * 100;
                                    const y = 100 - (task.bv / 8) * 100;
                                    const color = task.selected ? 'bg-green-500' : 'bg-gray-400';
                                    return `
                                        <div class="absolute w-4 h-4 ${color} rounded-full border-2 border-white shadow-lg cursor-pointer hover:scale-125 transition-transform flex items-center justify-center group" style="left: ${x}%; top: ${y}%; transform: translate(-50%, -50%);">
                                            <div class="absolute -top-8 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap">
                                                ${task.id}<br/>BV:${task.bv} W:${task.w}
                                            </div>
                                        </div>
                                    `;
                                }).join('')}

                                <!-- Axis labels -->
                                <div class="absolute -left-20 top-1/2 transform -translate-y-1/2 -rotate-90 text-xs font-bold text-gray-600">Business Value →</div>
                                <div class="absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-6 text-xs font-bold text-gray-600">Work/Esforço →</div>
                            </div>
                        </div>
                    </div>

                    <!-- Selected Stories -->
                    <div class="bg-white rounded-lg border border-gray-200 shadow-card">
                        <div class="px-6 py-4 border-b border-gray-100 bg-green-50">
                            <h3 class="font-bold text-green-900 flex items-center">
                                <i class="fa-solid fa-check-circle mr-2"></i>
                                Stories Selecionadas para o Sprint (2)
                            </h3>
                        </div>
                        <div class="divide-y divide-gray-100">
                            ${[
                                { id: 'US-001', title: 'Como usuário, quero fazer login com email/senha', bv: 8, w: 2, pts: 8 },
                                { id: 'US-002', title: 'Como admin, quero criar novos projetos', bv: 7, w: 3, pts: 5 }
                            ].map(story => `
                                <div class="px-6 py-4 flex items-center justify-between hover:bg-gray-50">
                                    <div class="flex-1">
                                        <div class="flex items-center space-x-3">
                                            <span class="font-mono text-xs text-gray-500">${story.id}</span>
                                            <span class="font-medium text-gray-900">${story.title}</span>
                                        </div>
                                        <div class="flex items-center space-x-4 mt-2 text-xs">
                                            <span class="text-gray-500">BV: <span class="font-bold text-green-600">${story.bv}</span></span>
                                            <span class="text-gray-500">W: <span class="font-bold text-blue-600">${story.w}</span></span>
                                            <span class="text-gray-500">Estimativa: <span class="font-bold text-gray-900">${story.pts} pts</span></span>
                                        </div>
                                    </div>
                                    <button class="text-red-600 hover:text-red-700 text-sm">
                                        <i class="fa-solid fa-times"></i> Remover
                                    </button>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                            <!-- Sprint Goal Definition (NOVO) -->
                            <div class="bg-gradient-to-r from-purple-50 to-purple-100 border-2 border-purple-300 rounded-lg p-6">
                                <h3 class="font-bold text-purple-900 mb-3 flex items-center">
                                    <i class="fa-solid fa-bullseye mr-2"></i>
                                    Sprint Goal - Defina o objetivo do sprint
                                </h3>
                                <textarea rows="2"
                                    class="w-full px-4 py-3 border border-purple-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 text-sm"
                                    placeholder="Ex: Entregar MVP v1 com login, CRUD de tasks e burndown chart funcional"></textarea>
                                <p class="text-xs text-purple-700 mt-2">
                                    <i class="fa-solid fa-lightbulb mr-1"></i>
                                    <strong>Dica:</strong> 1 frase clara e mensurável. Deve ser alcançável com as stories selecionadas.
                                </p>
                            </div>

                            <!-- Dependências & Bloqueadores (NOVO) -->
                            <div class="bg-white rounded-lg border border-gray-200 shadow-card">
                                <div class="px-6 py-4 border-b border-gray-100">
                                    <h3 class="font-bold text-gray-900 flex items-center">
                                        <i class="fa-solid fa-link text-orange-600 mr-2"></i>
                                        Dependências & Bloqueadores
                                    </h3>
                                </div>
                                <div class="p-6">
                                    ${mockData.blockers.length > 0 ? `
                                        <div class="space-y-3">
                                            ${mockData.blockers.map(blocker => `
                                                <div class="flex items-center justify-between p-3 bg-red-50 border border-red-200 rounded-lg">
                                                    <div class="flex items-center space-x-3">
                                                        <i class="fa-solid fa-ban text-red-600"></i>
                                                        <div>
                                                            <p class="font-semibold text-gray-900">${blocker.title}</p>
                                                            <p class="text-xs text-gray-600">Responsável: ${blocker.assignee}</p>
                                                        </div>
                                                    </div>
                                                    <span class="px-3 py-1 rounded-full text-xs font-bold ${blocker.priority === 'Alta' ? 'bg-red-600 text-white' : 'bg-orange-200 text-orange-900'}">
                                                        ${blocker.priority}
                                                    </span>
                                                </div>
                                            `).join('')}
                                        </div>
                                        <div class="mt-4 bg-yellow-50 border border-yellow-200 rounded p-3">
                                            <p class="text-sm text-yellow-900">
                                                <i class="fa-solid fa-triangle-exclamation mr-2"></i>
                                                <strong>Atenção:</strong> Resolva bloqueadores antes de commitar o sprint.
                                            </p>
                                        </div>
                                    ` : `
                                        <div class="text-center py-8 text-gray-500">
                                            <i class="fa-solid fa-check-circle text-green-500 text-4xl mb-2"></i>
                                            <p class="text-sm">Nenhum bloqueador ativo. Sprint pode prosseguir!</p>
                                        </div>
                                    `}
                                </div>
                            </div>
                        </div>
                    `,

                    product: () => `
                        <div class="space-y-6 max-w-[1600px]">
                            <div class="flex justify-between items-center">
                                <div>
                                    <h2 class="text-xl font-bold text-gray-900">Product Planning - Roadmap & OKRs</h2>
                                    <p class="text-sm text-gray-500 mt-1">Tático • Mensal/Trimestral</p>
                                </div>
                                <div class="flex space-x-3">
                                    <button class="bg-white border border-gray-300 text-gray-700 px-4 py-2 rounded-md text-sm font-medium hover:bg-gray-50">
                                        <i class="fa-solid fa-download mr-2"></i> Exportar Roadmap
                                    </button>
                                    <button class="bg-purple-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-purple-700 shadow-sm">
                                        <i class="fa-solid fa-plus mr-2"></i> Novo Epic
                                    </button>
                                </div>
                            </div>

                            <!-- OKRs do Trimestre -->
                            <div class="bg-gradient-to-r from-purple-50 to-purple-100 border-2 border-purple-300 rounded-lg p-6">
                                <h3 class="font-bold text-purple-900 mb-4 flex items-center">
                                    <i class="fa-solid fa-target text-purple-600 mr-2"></i>
                                    OKRs Q1 2026
                                </h3>
                                <div class="grid grid-cols-2 gap-4">
                                    <div class="bg-white rounded-lg p-4 border border-purple-200">
                                        <p class="text-xs font-bold text-purple-700 mb-2">KR-CORP-1: Receita</p>
                                        <p class="text-sm text-gray-900 mb-2">Atingir R$ 10.000 MRR até Março/2026</p>
                                        <div class="flex items-center space-x-2">
                                            <div class="flex-1 bg-gray-200 rounded-full h-2">
                                                <div class="bg-purple-600 h-2 rounded-full" style="width: 40%"></div>
                                            </div>
                                            <span class="text-xs font-bold text-purple-700">40%</span>
                                        </div>
                                    </div>
                                    <div class="bg-white rounded-lg p-4 border border-purple-200">
                                        <p class="text-xs font-bold text-purple-700 mb-2">KR-CORP-2: Clientes</p>
                                        <p class="text-sm text-gray-900 mb-2">5 clientes pagantes até Março/2026</p>
                                        <div class="flex items-center space-x-2">
                                            <div class="flex-1 bg-gray-200 rounded-full h-2">
                                                <div class="bg-purple-600 h-2 rounded-full" style="width: 60%"></div>
                                            </div>
                                            <span class="text-xs font-bold text-purple-700">3/5</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Customer Development Score (BLOQUEANTE) -->
                            <div class="bg-yellow-50 border-2 border-yellow-400 rounded-lg p-6">
                                <h3 class="font-bold text-yellow-900 mb-3 flex items-center">
                                    <i class="fa-solid fa-user-check text-yellow-600 mr-2"></i>
                                    Customer Development Score
                                    <span class="ml-3 bg-yellow-600 text-white text-xs px-2 py-1 rounded-full">BLOQUEANTE</span>
                                </h3>
                                <div class="grid grid-cols-3 gap-4 mb-4">
                                    <div class="bg-white rounded-lg p-4">
                                        <p class="text-xs text-gray-600 mb-1">Conversas com target</p>
                                        <p class="text-2xl font-bold text-green-700">67 / 50</p>
                                        <p class="text-xs text-green-600 mt-1"><i class="fa-solid fa-check"></i> Meta atingida</p>
                                    </div>
                                    <div class="bg-white rounded-lg p-4">
                                        <p class="text-xs text-gray-600 mb-1">Willingness to pay</p>
                                        <p class="text-2xl font-bold text-green-700">73%</p>
                                        <p class="text-xs text-green-600 mt-1"><i class="fa-solid fa-check"></i> Acima de 60%</p>
                                    </div>
                                    <div class="bg-white rounded-lg p-4">
                                        <p class="text-xs text-gray-600 mb-1">Status</p>
                                        <p class="text-sm font-bold text-green-700">✓ Validado</p>
                                        <p class="text-xs text-green-600 mt-1">Pode desenvolver</p>
                                    </div>
                                </div>
                                <p class="text-xs text-yellow-800">
                                    <i class="fa-solid fa-info-circle mr-1"></i>
                                    <strong>Regra:</strong> Sistema bloqueia desenvolvimento se < 50 conversas ou willingness < 60%
                                </p>
                            </div>

                            <!-- Roadmap Visual (Simplificado - pode expandir) -->
                            <div class="bg-white rounded-lg border border-gray-200 shadow-card">
                                <div class="px-6 py-4 border-b border-gray-100">
                                    <h3 class="font-bold text-gray-900 flex items-center">
                                        <i class="fa-solid fa-map text-blue-600 mr-2"></i>
                                        Product Roadmap Q1 2026
                                    </h3>
                                </div>
                                <div class="p-6">
                                    <div class="text-center text-gray-500 py-12">
                                        <i class="fa-solid fa-construction text-5xl mb-3"></i>
                                        <p class="text-sm">Gantt Chart interativo em desenvolvimento</p>
                                        <p class="text-xs text-gray-400 mt-2">Preview: Timeline de Epics → Stories → Sprints</p>
                                    </div>
                                </div>
                            </div>

                            <!-- MVP Canvas -->
                            <div class="bg-white rounded-lg border border-gray-200 shadow-card">
                                <div class="px-6 py-4 border-b border-gray-100 bg-green-50">
                                    <h3 class="font-bold text-green-900 flex items-center">
                                        <i class="fa-solid fa-layer-group mr-2"></i>
                                        MVP Canvas - Priorização de Features
                                    </h3>
                                </div>
                                <div class="p-6">
                                    <div class="grid grid-cols-3 gap-4">
                                        <div class="border-2 border-green-500 rounded-lg p-4 bg-green-50">
                                            <h4 class="font-bold text-green-900 mb-3">Essencial</h4>
                                            <div class="space-y-2">
                                                ${['Login + Auth', 'CRUD Tasks', 'Kanban Board'].map(feature => `
                                                    <div class="bg-white p-2 rounded border border-green-200 text-sm">
                                                        <i class="fa-solid fa-check-circle text-green-600 mr-1"></i>
                                                        ${feature}
                                                    </div>
                                                `).join('')}
                                            </div>
                                        </div>
                                        <div class="border-2 border-yellow-500 rounded-lg p-4 bg-yellow-50">
                                            <h4 class="font-bold text-yellow-900 mb-3">Importante</h4>
                                            <div class="space-y-2">
                                                ${['Burndown Chart', 'Velocity Tracking'].map(feature => `
                                                    <div class="bg-white p-2 rounded border border-yellow-200 text-sm">
                                                        <i class="fa-solid fa-exclamation-circle text-yellow-600 mr-1"></i>
                                                        ${feature}
                                                    </div>
                                                `).join('')}
                                            </div>
                                        </div>
                                        <div class="border-2 border-gray-400 rounded-lg p-4 bg-gray-50">
                                            <h4 class="font-bold text-gray-900 mb-3">Desejável</h4>
                                            <div class="space-y-2">
                                                ${['Notificações', 'Exportar relatórios'].map(feature => `
                                                    <div class="bg-white p-2 rounded border border-gray-200 text-sm">
                                                        <i class="fa-solid fa-circle text-gray-400 mr-1"></i>
                                                        ${feature}
                                                    </div>
                                                `).join('')}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `,

                    gtm: () => `
                        <div class="space-y-6 max-w-[1600px]">
                            <div class="flex justify-between items-center">
                                <div>
                                    <h2 class="text-xl font-bold text-gray-900">Go-to-Market Planning</h2>
                                    <p class="text-sm text-gray-500 mt-1">Estratégico • Event-driven (por campanha/lançamento)</p>
                                </div>
                                <div class="flex space-x-3">
                                    <button class="bg-green-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-green-700 shadow-sm">
                                        <i class="fa-solid fa-plus mr-2"></i> Nova Campanha
                                    </button>
                                </div>
                            </div>

                            <!-- Metas Comerciais -->
                            <div class="grid grid-cols-3 gap-4">
                                <div class="bg-gradient-to-r from-green-50 to-green-100 border-2 border-green-300 rounded-lg p-5">
                                    <p class="text-xs font-bold text-green-700 mb-2">META Q1 2026</p>
                                    <p class="text-3xl font-bold text-green-900">5 clientes</p>
                                    <p class="text-xs text-green-700 mt-1">3 conquistados (60%)</p>
                                </div>
                                <div class="bg-gradient-to-r from-blue-50 to-blue-100 border-2 border-blue-300 rounded-lg p-5">
                                    <p class="text-xs font-bold text-blue-700 mb-2">MRR OBJETIVO</p>
                                    <p class="text-3xl font-bold text-blue-900">R$ 10.000</p>
                                    <p class="text-xs text-blue-700 mt-1">R$ 4.000 atual (40%)</p>
                                </div>
                                <div class="bg-gradient-to-r from-purple-50 to-purple-100 border-2 border-purple-300 rounded-lg p-5">
                                    <p class="text-xs font-bold text-purple-700 mb-2">PIPELINE</p>
                                    <p class="text-3xl font-bold text-purple-900">12 leads</p>
                                    <p class="text-xs text-purple-700 mt-1">Em negociação</p>
                                </div>
                            </div>

                            <!-- Campanhas Ativas -->
                            <div class="bg-white rounded-lg border border-gray-200 shadow-card">
                                <div class="px-6 py-4 border-b border-gray-100">
                                    <h3 class="font-bold text-gray-900 flex items-center">
                                        <i class="fa-solid fa-bullhorn text-orange-600 mr-2"></i>
                                        Campanhas de Lançamento
                                    </h3>
                                </div>
                                <div class="divide-y divide-gray-100">
                                    ${[
                                        { produto: 'CHATBOT', lancamento: 'Jan/2026', status: 'Em andamento', meta: '5 clientes', atual: '3 clientes', budget: 'R$ 5.000' },
                                        { produto: 'UzzBIM', lancamento: 'Fev/2026', status: 'Aguardando resultado', meta: 'R$ 146k captação', atual: 'Em análise', budget: 'R$ 0' }
                                    ].map(campanha => `
                                        <div class="px-6 py-5 hover:bg-gray-50">
                                            <div class="flex justify-between items-start mb-3">
                                                <div>
                                                    <h4 class="font-bold text-gray-900">${campanha.produto}</h4>
                                                    <p class="text-xs text-gray-500">Lançamento: ${campanha.lancamento}</p>
                                                </div>
                                                <span class="px-3 py-1 rounded-full text-xs font-bold ${campanha.status === 'Em andamento' ? 'bg-green-100 text-green-700' : 'bg-yellow-100 text-yellow-700'}">
                                                    ${campanha.status}
                                                </span>
                                            </div>
                                            <div class="grid grid-cols-3 gap-4 text-sm">
                                                <div>
                                                    <p class="text-xs text-gray-500">Meta</p>
                                                    <p class="font-semibold text-gray-900">${campanha.meta}</p>
                                                </div>
                                                <div>
                                                    <p class="text-xs text-gray-500">Atual</p>
                                                    <p class="font-semibold text-gray-900">${campanha.atual}</p>
                                                </div>
                                                <div>
                                                    <p class="text-xs text-gray-500">Budget</p>
                                                    <p class="font-semibold text-gray-900">${campanha.budget}</p>
                                                </div>
                                            </div>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>

                            <!-- Funil de Vendas -->
                            <div class="bg-white rounded-lg border border-gray-200 shadow-card">
                                <div class="px-6 py-4 border-b border-gray-100">
                                    <h3 class="font-bold text-gray-900 flex items-center">
                                        <i class="fa-solid fa-filter text-blue-600 mr-2"></i>
                                        Funil de Vendas - CHATBOT
                                    </h3>
                                </div>
                                <div class="p-6">
                                    <div class="space-y-4">
                                        ${[
                                            { etapa: 'Lead', qtd: 50, conv: '-', color: 'blue' },
                                            { etapa: 'Discovery', qtd: 20, conv: '40%', color: 'purple' },
                                            { etapa: 'Proposta', qtd: 8, conv: '40%', color: 'orange' },
                                            { etapa: 'Fechamento', qtd: 3, conv: '38%', color: 'green' }
                                        ].map((stage, i) => `
                                            <div class="flex items-center space-x-4">
                                                <div class="w-32 text-right">
                                                    <p class="text-sm font-semibold text-gray-900">${stage.etapa}</p>
                                                    ${stage.conv !== '-' ? `<p class="text-xs text-gray-500">${stage.conv} conversão</p>` : ''}
                                                </div>
                                                <div class="flex-1">
                                                    <div class="bg-gray-200 rounded-full h-10 flex items-center px-4" style="width: ${100 - (i * 20)}%">
                                                        <div class="bg-${stage.color}-500 rounded-full h-6 flex items-center justify-center px-3" style="width: 100%">
                                                            <span class="text-white font-bold text-sm">${stage.qtd}</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>
                            </div>

                            <!-- Integração com Product Planning -->
                            <div class="bg-orange-50 border-2 border-orange-300 rounded-lg p-6">
                                <h3 class="font-bold text-orange-900 mb-3 flex items-center">
                                    <i class="fa-solid fa-link text-orange-600 mr-2"></i>
                                    Integração: GTM → Product → Sprint
                                </h3>
                                <div class="bg-white rounded-lg p-4 border border-orange-200">
                                    <p class="text-sm text-gray-900 mb-3">
                                        <strong>Decisão Marketing:</strong> "Lançar CHATBOT em Jan/2026"
                                    </p>
                                    <div class="flex items-center space-x-2 text-xs">
                                        <span class="bg-purple-100 text-purple-700 px-2 py-1 rounded">Epic: CHATBOT-MVP-LAUNCH</span>
                                        <i class="fa-solid fa-arrow-right text-gray-400"></i>
                                        <span class="bg-blue-100 text-blue-700 px-2 py-1 rounded">6 User Stories</span>
                                        <i class="fa-solid fa-arrow-right text-gray-400"></i>
                                        <span class="bg-green-100 text-green-700 px-2 py-1 rounded">Sprints 1-3</span>
                                    </div>
                                    <button class="mt-3 text-xs text-orange-700 hover:text-orange-900 font-semibold">
                                        Ver no Planning Bridge →
                                    </button>
                                </div>
                            </div>
                        </div>
                    `,

                    bridge: () => `
                        <div class="space-y-6 max-w-[1600px]">
                            <div>
                                <h2 class="text-xl font-bold text-gray-900">Planning Bridge - Dashboard Consolidado</h2>
                                <p class="text-sm text-gray-500 mt-1">Visão unificada: GTM → Product → Sprint</p>
                            </div>

                            <!-- Timeline Consolidada -->
                            <div class="bg-white rounded-lg border border-gray-200 shadow-card">
                                <div class="px-6 py-4 border-b border-gray-100 bg-gradient-to-r from-orange-50 to-orange-100">
                                    <h3 class="font-bold text-gray-900 flex items-center">
                                        <i class="fa-solid fa-timeline text-orange-600 mr-2"></i>
                                        Timeline Completa: Iniciativa → Epic → Stories → Sprints
                                    </h3>
                                </div>
                                <div class="p-6">
                                    <div class="space-y-6">
                                        <!-- Exemplo: CHATBOT Launch -->
                                        <div class="border-l-4 border-green-500 pl-6">
                                            <div class="mb-4">
                                                <div class="flex items-center space-x-3 mb-2">
                                                    <span class="bg-green-100 text-green-700 text-xs font-bold px-3 py-1 rounded-full">GTM</span>
                                                    <h4 class="font-bold text-gray-900">Lançamento CHATBOT - Jan/2026</h4>
                                                </div>
                                                <p class="text-sm text-gray-600">Meta: 5 clientes pagantes • Budget: R$ 5.000</p>
                                            </div>

                                            <div class="ml-6 border-l-2 border-purple-300 pl-6 mb-4">
                                                <div class="flex items-center space-x-3 mb-2">
                                                    <span class="bg-purple-100 text-purple-700 text-xs font-bold px-3 py-1 rounded-full">PRODUCT</span>
                                                    <h5 class="font-semibold text-gray-900">Epic: CHATBOT-MVP-LAUNCH</h5>
                                                </div>
                                                <p class="text-xs text-gray-600 mb-3">6 User Stories • 32 story points total</p>

                                                <div class="ml-6 space-y-2">
                                                    ${[
                                                        { id: 'US-001', title: 'Login + Auth', sprint: 'Sprint W01', pts: 8 },
                                                        { id: 'US-002', title: 'CRUD Tasks', sprint: 'Sprint W01-W02', pts: 5 },
                                                        { id: 'US-003', title: 'Burndown Chart', sprint: 'Sprint W02', pts: 3 },
                                                        { id: 'US-004', title: 'Deploy Produção', sprint: 'Sprint W03', pts: 5 }
                                                    ].map(story => `
                                                        <div class="flex items-center justify-between bg-blue-50 p-3 rounded border border-blue-200">
                                                            <div class="flex items-center space-x-3">
                                                                <span class="bg-blue-600 text-white text-xs font-bold px-2 py-1 rounded">SPRINT</span>
                                                                <span class="text-xs font-mono text-gray-500">${story.id}</span>
                                                                <span class="text-sm text-gray-900">${story.title}</span>
                                                            </div>
                                                            <div class="flex items-center space-x-4">
                                                                <span class="text-xs text-gray-600">${story.sprint}</span>
                                                                <span class="text-xs font-bold text-blue-700">${story.pts} pts</span>
                                                            </div>
                                                        </div>
                                                    `).join('')}
                                                </div>
                                            </div>

                                            <div class="mt-4 bg-green-50 border border-green-200 rounded-lg p-4">
                                                <div class="flex items-center justify-between">
                                                    <div>
                                                        <p class="text-sm font-bold text-green-900">Status Geral</p>
                                                        <p class="text-xs text-green-700 mt-1">21 de 32 pts completados (66%)</p>
                                                    </div>
                                                    <div class="w-48">
                                                        <div class="w-full bg-green-200 rounded-full h-3">
                                                            <div class="bg-green-600 h-3 rounded-full" style="width: 66%"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Métricas Consolidadas -->
                            <div class="grid grid-cols-4 gap-4">
                                ${[
                                    { label: 'Iniciativas GTM', value: '2 ativas', color: 'green' },
                                    { label: 'Epics em Andamento', value: '3', color: 'purple' },
                                    { label: 'Stories no Sprint', value: '12 / 16 pts', color: 'blue' },
                                    { label: 'Delivery Rate', value: '94%', color: 'orange' }
                                ].map(metric => `
                                    <div class="bg-${metric.color}-50 border-2 border-${metric.color}-300 rounded-lg p-4">
                                        <p class="text-xs font-bold text-${metric.color}-700 mb-1">${metric.label}</p>
                                        <p class="text-2xl font-bold text-${metric.color}-900">${metric.value}</p>
                                    </div>
                                `).join('')}
                            </div>

                            <!-- Alertas de Desalinhamento -->
                            <div class="bg-white rounded-lg border border-gray-200 shadow-card">
                                <div class="px-6 py-4 border-b border-gray-100">
                                    <h3 class="font-bold text-gray-900 flex items-center">
                                        <i class="fa-solid fa-triangle-exclamation text-yellow-600 mr-2"></i>
                                        Alertas de Desalinhamento
                                    </h3>
                                </div>
                                <div class="p-6">
                                    <div class="text-center py-8 text-gray-500">
                                        <i class="fa-solid fa-check-circle text-green-500 text-4xl mb-2"></i>
                                        <p class="text-sm">Nenhum desalinhamento detectado!</p>
                                        <p class="text-xs text-gray-400 mt-1">GTM, Product e Sprint estão sincronizados</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `
                };

                return planningViews[tabName]();
            },

            // ========================================
            // DAILY STANDUP
            // ========================================
            daily: () => `
                <div class="animate-fade-in space-y-6 max-w-[1000px] mx-auto">
                    <div class="text-center">
                        <h1 class="text-2xl font-bold text-gray-900">Daily Standup</h1>
                        <p class="text-gray-500 mt-1">${mockData.currentSprint.id} - ${new Date().toLocaleDateString('pt-BR')}</p>
                    </div>

                    <!-- Timer -->
                    <div class="bg-gradient-to-r from-primary-blue to-blue-600 text-white rounded-lg p-8 text-center shadow-lg">
                        <div class="text-6xl font-bold font-mono mb-2">15:00</div>
                        <p class="text-sm opacity-90">Tempo máximo por pessoa</p>
                        <div class="mt-4">
                            <button class="bg-white text-primary-blue px-6 py-2 rounded-md font-medium hover:bg-gray-100 transition-colors">
                                <i class="fa-solid fa-play mr-2"></i> Iniciar Timer
                            </button>
                        </div>
                    </div>

                    <!-- Daily Form -->
                    <div class="bg-white rounded-lg border border-gray-200 shadow-card p-6">
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Quem está falando?</label>
                            <select class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:border-primary-blue">
                                <option>Selecione...</option>
                                ${mockData.team.map(member => `<option>${member.name}</option>`).join('')}
                            </select>
                        </div>

                        <div class="space-y-6">
                            <!-- O que fez ontem -->
                            <div>
                                <label class="block text-sm font-bold text-gray-900 mb-2 flex items-center">
                                    <span class="bg-green-100 text-green-800 w-6 h-6 rounded-full flex items-center justify-center text-xs mr-2">1</span>
                                    O que você FEZ desde o último Daily?
                                </label>
                                <textarea class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:border-primary-blue resize-none" rows="3" placeholder="Ex: Implementei o burndown chart, revisei PR #45..."></textarea>
                                <div class="mt-2 flex flex-wrap gap-2">
                                    ${mockData.tasks.filter(t => t.status === 'done').slice(0, 2).map(task => `
                                        <button class="text-xs bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded flex items-center">
                                            <i class="fa-solid fa-plus mr-1 text-gray-500"></i> #${task.id} - ${task.title}
                                        </button>
                                    `).join('')}
                                </div>
                            </div>

                            <!-- O que vai fazer hoje -->
                            <div>
                                <label class="block text-sm font-bold text-gray-900 mb-2 flex items-center">
                                    <span class="bg-blue-100 text-blue-800 w-6 h-6 rounded-full flex items-center justify-center text-xs mr-2">2</span>
                                    O que você VAI FAZER hoje?
                                </label>
                                <textarea class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:border-primary-blue resize-none" rows="3" placeholder="Ex: Vou terminar os testes do Kanban, começar a documentação..."></textarea>
                                <div class="mt-2 flex flex-wrap gap-2">
                                    ${mockData.tasks.filter(t => t.status === 'in-progress' || t.status === 'todo').slice(0, 2).map(task => `
                                        <button class="text-xs bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded flex items-center">
                                            <i class="fa-solid fa-plus mr-1 text-gray-500"></i> #${task.id} - ${task.title}
                                        </button>
                                    `).join('')}
                                </div>
                            </div>

                            <!-- Bloqueadores -->
                            <div>
                                <label class="block text-sm font-bold text-gray-900 mb-2 flex items-center">
                                    <span class="bg-red-100 text-red-800 w-6 h-6 rounded-full flex items-center justify-center text-xs mr-2">!</span>
                                    Existe algum BLOQUEADOR?
                                </label>
                                <textarea class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:border-primary-blue resize-none" rows="2" placeholder="Se sim, descreva aqui. Caso contrário, deixe em branco."></textarea>
                            </div>
                        </div>

                        <div class="mt-6 flex justify-end space-x-3">
                            <button class="px-4 py-2 border border-gray-300 text-gray-700 rounded-md text-sm font-medium hover:bg-gray-50">
                                Cancelar
                            </button>
                            <button class="px-4 py-2 bg-primary-blue text-white rounded-md text-sm font-medium hover:bg-primary-dark">
                                <i class="fa-solid fa-save mr-2"></i> Salvar Daily
                            </button>
                        </div>
                    </div>

                    <!-- Previous Dailies -->
                    <div class="bg-white rounded-lg border border-gray-200 shadow-card">
                        <div class="px-6 py-4 border-b border-gray-100">
                            <h3 class="font-bold text-gray-900">Dailies Anteriores</h3>
                        </div>
                        <div class="divide-y divide-gray-100">
                            ${[
                                { date: '2026-01-09', person: 'Pedro V.', tasks: 2, blockers: 0 },
                                { date: '2026-01-08', person: 'Luis Boff', tasks: 3, blockers: 1 },
                                { date: '2026-01-07', person: 'Vitinho', tasks: 1, blockers: 0 }
                            ].map(daily => `
                                <div class="px-6 py-3 flex items-center justify-between hover:bg-gray-50 cursor-pointer">
                                    <div class="flex items-center space-x-4">
                                        <div class="text-xs text-gray-500">${daily.date}</div>
                                        <div class="font-medium text-gray-900">${daily.person}</div>
                                        <div class="text-xs text-gray-500">${daily.tasks} task${daily.tasks !== 1 ? 's' : ''}</div>
                                        ${daily.blockers > 0 ? `<span class="bg-red-100 text-red-800 text-xs px-2 py-0.5 rounded">${daily.blockers} bloqueio</span>` : ''}
                                    </div>
                                    <button class="text-primary-blue hover:text-primary-dark text-xs">Ver detalhes →</button>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `,

            // ========================================
            // SPRINT REVIEW
            // ========================================
            review: () => `
                <div class="animate-fade-in space-y-6 max-w-[1200px] mx-auto">
                    <div class="text-center">
                        <h1 class="text-2xl font-bold text-gray-900">Sprint Review</h1>
                        <p class="text-gray-500 mt-1">${mockData.currentSprint.id} - Demonstração e Aceite</p>
                    </div>

                    <!-- Sprint Summary -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <div class="bg-white p-5 rounded-lg border border-gray-200 shadow-card text-center">
                            <p class="text-xs text-gray-500 uppercase tracking-wider mb-2">Planejado</p>
                            <p class="text-3xl font-bold text-gray-900">${mockData.currentSprint.totalPoints}</p>
                            <p class="text-xs text-gray-500 mt-1">Story Points</p>
                        </div>
                        <div class="bg-white p-5 rounded-lg border border-gray-200 shadow-card text-center">
                            <p class="text-xs text-gray-500 uppercase tracking-wider mb-2">Completado</p>
                            <p class="text-3xl font-bold text-green-600">${mockData.currentSprint.completedPoints}</p>
                            <p class="text-xs text-gray-500 mt-1">Story Points</p>
                        </div>
                        <div class="bg-white p-5 rounded-lg border border-gray-200 shadow-card text-center">
                            <p class="text-xs text-gray-500 uppercase tracking-wider mb-2">Taxa de Sucesso</p>
                            <p class="text-3xl font-bold text-primary-blue">${mockData.currentSprint.progress}%</p>
                            <p class="text-xs text-gray-500 mt-1">Commitment</p>
                        </div>
                        <div class="bg-white p-5 rounded-lg border border-gray-200 shadow-card text-center">
                            <p class="text-xs text-gray-500 uppercase tracking-wider mb-2">Velocity Real</p>
                            <p class="text-3xl font-bold text-status-success">${mockData.currentSprint.completedPoints}</p>
                            <p class="text-xs text-gray-500 mt-1">vs ${Math.round(mockData.velocity.reduce((a,b) => a + b.points, 0) / mockData.velocity.length)} média</p>
                        </div>
                    </div>

                    <!-- Stories para Review -->
                    <div class="bg-white rounded-lg border border-gray-200 shadow-card">
                        <div class="px-6 py-4 border-b border-gray-100 bg-gray-50">
                            <h3 class="font-bold text-gray-900">Stories para Demonstração</h3>
                            <p class="text-xs text-gray-500 mt-1">Marque como aceita após demonstração ao PO/Stakeholders</p>
                        </div>
                        <div class="divide-y divide-gray-100">
                            ${mockData.tasks.filter(t => t.status === 'done' || t.status === 'in-review').map(story => `
                                <div class="px-6 py-5">
                                    <div class="flex items-start justify-between">
                                        <div class="flex-1">
                                            <div class="flex items-center space-x-3 mb-2">
                                                <span class="font-mono text-xs text-gray-500">#${story.id}</span>
                                                <span class="font-bold text-gray-900">${story.title}</span>
                                                <span class="bg-${story.priority === 'P0' ? 'red' : 'orange'}-100 text-${story.priority === 'P0' ? 'red' : 'orange'}-800 text-xs px-2 py-0.5 rounded font-medium">${story.priority}</span>
                                            </div>
                                            <div class="flex items-center space-x-4 text-sm text-gray-600 mb-3">
                                                <span><i class="fa-solid fa-layer-group mr-1 text-gray-400"></i> ${story.points} pts</span>
                                                <span><i class="fa-solid fa-project-diagram mr-1 text-gray-400"></i> ${story.project}</span>
                                                <span><i class="fa-solid fa-user mr-1 text-gray-400"></i> ${story.assignee}</span>
                                            </div>

                                            <!-- DoD Checklist -->
                                            <div class="bg-gray-50 rounded-md p-3 space-y-2">
                                                <p class="text-xs font-bold text-gray-700 mb-2">Definition of Done:</p>
                                                ${[
                                                    { item: 'Código implementado e funcionando', checked: true },
                                                    { item: 'Testes unitários passando', checked: true },
                                                    { item: 'Code review aprovado', checked: story.status === 'done' },
                                                    { item: 'Documentação atualizada', checked: false },
                                                    { item: 'Deploy em staging realizado', checked: false }
                                                ].map(dod => `
                                                    <label class="flex items-center text-xs">
                                                        <input type="checkbox" ${dod.checked ? 'checked' : ''} class="mr-2 h-4 w-4 text-primary-blue rounded">
                                                        <span class="${dod.checked ? 'line-through text-gray-500' : 'text-gray-700'}">${dod.item}</span>
                                                    </label>
                                                `).join('')}
                                            </div>
                                        </div>
                                        <div class="ml-4 flex flex-col space-y-2">
                                            <button class="px-4 py-2 bg-green-600 text-white rounded-md text-sm font-medium hover:bg-green-700">
                                                <i class="fa-solid fa-check mr-1"></i> Aceitar
                                            </button>
                                            <button class="px-4 py-2 bg-red-600 text-white rounded-md text-sm font-medium hover:bg-red-700">
                                                <i class="fa-solid fa-times mr-1"></i> Rejeitar
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <!-- Ações -->
                    <div class="flex justify-end space-x-3">
                        <button class="px-6 py-2 border border-gray-300 text-gray-700 rounded-md text-sm font-medium hover:bg-gray-50">
                            Salvar Progresso
                        </button>
                        <button class="px-6 py-2 bg-primary-blue text-white rounded-md text-sm font-medium hover:bg-primary-dark">
                            <i class="fa-solid fa-check mr-2"></i> Finalizar Review
                        </button>
                    </div>
                </div>
            `,

            // ========================================
            // RETROSPECTIVE
            // ========================================
            retro: () => `
                <div class="animate-fade-in space-y-6 max-w-[1400px] mx-auto">
                    <div class="text-center">
                        <h1 class="text-2xl font-bold text-gray-900">Retrospective</h1>
                        <p class="text-gray-500 mt-1">${mockData.currentSprint.id} - O que aprendemos?</p>
                    </div>

                    <!-- Mad / Sad / Glad Board -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <!-- Mad Column -->
                        <div class="bg-white rounded-lg border-2 border-red-200 shadow-card">
                            <div class="bg-red-50 px-4 py-3 border-b border-red-200">
                                <h3 class="font-bold text-red-800 flex items-center">
                                    <span class="text-2xl mr-2">😠</span> Mad (Frustrado)
                                </h3>
                                <p class="text-xs text-red-600 mt-1">O que nos frustrou?</p>
                            </div>
                            <div class="p-4 space-y-3">
                                ${[
                                    'Reuniões muito longas, perdemos 2h de dev',
                                    'PR reviews demorando 2+ dias',
                                    'Documentação desatualizada'
                                ].map(item => `
                                    <div class="bg-red-50 p-3 rounded border border-red-100 hover:shadow-md transition-shadow cursor-move">
                                        <p class="text-sm text-gray-900">${item}</p>
                                        <div class="flex items-center justify-between mt-2">
                                            <div class="flex -space-x-1">
                                                ${mockData.team.slice(0, 2).map(m => `<img class="w-5 h-5 rounded-full border border-white" src="${m.avatar}" alt="${m.name}">`).join('')}
                                            </div>
                                            <button class="text-xs text-red-600 hover:text-red-700">
                                                <i class="fa-solid fa-thumbs-up mr-1"></i> 3
                                            </button>
                                        </div>
                                    </div>
                                `).join('')}
                                <button class="w-full py-2 border-2 border-dashed border-red-200 rounded text-red-600 hover:bg-red-50 text-sm font-medium">
                                    + Adicionar card
                                </button>
                            </div>
                        </div>

                        <!-- Sad Column -->
                        <div class="bg-white rounded-lg border-2 border-yellow-200 shadow-card">
                            <div class="bg-yellow-50 px-4 py-3 border-b border-yellow-200">
                                <h3 class="font-bold text-yellow-800 flex items-center">
                                    <span class="text-2xl mr-2">😔</span> Sad (Triste)
                                </h3>
                                <p class="text-xs text-yellow-600 mt-1">O que poderia ser melhor?</p>
                            </div>
                            <div class="p-4 space-y-3">
                                ${[
                                    'Não conseguimos terminar tudo que planejamos',
                                    'Poucos testes automatizados'
                                ].map(item => `
                                    <div class="bg-yellow-50 p-3 rounded border border-yellow-100 hover:shadow-md transition-shadow cursor-move">
                                        <p class="text-sm text-gray-900">${item}</p>
                                        <div class="flex items-center justify-between mt-2">
                                            <div class="flex -space-x-1">
                                                ${mockData.team.slice(0, 3).map(m => `<img class="w-5 h-5 rounded-full border border-white" src="${m.avatar}" alt="${m.name}">`).join('')}
                                            </div>
                                            <button class="text-xs text-yellow-600 hover:text-yellow-700">
                                                <i class="fa-solid fa-thumbs-up mr-1"></i> 5
                                            </button>
                                        </div>
                                    </div>
                                `).join('')}
                                <button class="w-full py-2 border-2 border-dashed border-yellow-200 rounded text-yellow-600 hover:bg-yellow-50 text-sm font-medium">
                                    + Adicionar card
                                </button>
                            </div>
                        </div>

                        <!-- Glad Column -->
                        <div class="bg-white rounded-lg border-2 border-green-200 shadow-card">
                            <div class="bg-green-50 px-4 py-3 border-b border-green-200">
                                <h3 class="font-bold text-green-800 flex items-center">
                                    <span class="text-2xl mr-2">😊</span> Glad (Feliz)
                                </h3>
                                <p class="text-xs text-green-600 mt-1">O que funcionou bem?</p>
                            </div>
                            <div class="p-4 space-y-3">
                                ${[
                                    'Pair programming funcionou muito bem!',
                                    'Comunicação da equipe melhorou',
                                    'Deploy pipeline está estável'
                                ].map(item => `
                                    <div class="bg-green-50 p-3 rounded border border-green-100 hover:shadow-md transition-shadow cursor-move">
                                        <p class="text-sm text-gray-900">${item}</p>
                                        <div class="flex items-center justify-between mt-2">
                                            <div class="flex -space-x-1">
                                                ${mockData.team.slice(0, 4).map(m => `<img class="w-5 h-5 rounded-full border border-white" src="${m.avatar}" alt="${m.name}">`).join('')}
                                            </div>
                                            <button class="text-xs text-green-600 hover:text-green-700">
                                                <i class="fa-solid fa-thumbs-up mr-1"></i> 8
                                            </button>
                                        </div>
                                    </div>
                                `).join('')}
                                <button class="w-full py-2 border-2 border-dashed border-green-200 rounded text-green-600 hover:bg-green-50 text-sm font-medium">
                                    + Adicionar card
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Action Items -->
                    <div class="bg-white rounded-lg border border-gray-200 shadow-card">
                        <div class="px-6 py-4 border-b border-gray-100 bg-primary-lighter">
                            <h3 class="font-bold text-primary-dark flex items-center">
                                <i class="fa-solid fa-bolt mr-2"></i>
                                Action Items - O que vamos FAZER diferente?
                            </h3>
                        </div>
                        <div class="divide-y divide-gray-100">
                            ${[
                                { action: 'Limitar reuniões a 1h máximo', owner: 'Pedro V.', deadline: '2026-01-15' },
                                { action: 'PR reviews em até 24h (regra do time)', owner: 'Luis Boff', deadline: '2026-01-13' },
                                { action: 'Adicionar cobertura de testes para 80%', owner: 'Vitinho', deadline: '2026-01-20' }
                            ].map(item => `
                                <div class="px-6 py-4 flex items-center justify-between hover:bg-gray-50">
                                    <div class="flex items-center space-x-4 flex-1">
                                        <input type="checkbox" class="h-5 w-5 text-primary-blue rounded">
                                        <div class="flex-1">
                                            <p class="font-medium text-gray-900">${item.action}</p>
                                            <div class="flex items-center space-x-3 mt-1 text-xs text-gray-500">
                                                <span><i class="fa-solid fa-user mr-1"></i> ${item.owner}</span>
                                                <span><i class="fa-solid fa-calendar mr-1"></i> ${item.deadline}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="text-primary-blue hover:text-primary-dark text-sm">Editar</button>
                                </div>
                            `).join('')}
                            <div class="px-6 py-3 bg-gray-50">
                                <button class="text-primary-blue hover:text-primary-dark text-sm font-medium">
                                    <i class="fa-solid fa-plus mr-1"></i> Adicionar Action Item
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Finalize -->
                    <div class="flex justify-end">
                        <button class="px-6 py-3 bg-green-600 text-white rounded-md font-medium hover:bg-green-700 shadow-sm">
                            <i class="fa-solid fa-check mr-2"></i> Finalizar Retrospective
                        </button>
                    </div>
                </div>
            `,

            // ========================================
            // BURNDOWN CHART
            // ========================================
            burndown: () => `
                <div class="animate-fade-in space-y-6 max-w-[1200px] mx-auto">
                    <div>
                        <h1 class="text-2xl font-bold text-gray-900">Burndown Chart</h1>
                        <p class="text-gray-500 mt-1">Acompanhamento diário do ${mockData.currentSprint.id}</p>
                    </div>

                    <!-- Chart -->
                    <div class="bg-white rounded-lg border border-gray-200 shadow-card p-6">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="font-bold text-gray-900">Progresso do Sprint</h3>
                            <div class="flex items-center space-x-4 text-sm">
                                <div class="flex items-center">
                                    <span class="w-3 h-0.5 bg-blue-400 opacity-50 border-t-2 border-dashed mr-2"></span>
                                    <span class="text-gray-600">Ideal</span>
                                </div>
                                <div class="flex items-center">
                                    <span class="w-3 h-0.5 bg-red-500 mr-2"></span>
                                    <span class="text-gray-600">Real</span>
                                </div>
                            </div>
                        </div>

                        <!-- Large Chart -->
                        <div class="relative w-full" style="height: 500px;">
                            <svg viewBox="0 0 800 500" class="w-full h-full">
                                <!-- Grid -->
                                ${[0, 100, 200, 300, 400].map(y => `
                                    <line x1="50" y1="${y + 50}" x2="750" y2="${y + 50}" stroke="#f3f4f6" stroke-width="1"/>
                                    <text x="20" y="${y + 55}" font-size="12" fill="#9ca3af">${20 - (y/25)}</text>
                                `).join('')}
                                <line x1="50" y1="50" x2="50" y2="450" stroke="#374151" stroke-width="2"/>
                                <line x1="50" y1="450" x2="750" y2="450" stroke="#374151" stroke-width="2"/>

                                <!-- Ideal Line -->
                                <line x1="50" y1="50" x2="750" y2="450" stroke="#3B82F6" stroke-width="3" stroke-dasharray="10,5" opacity="0.4"/>

                                <!-- Real Line -->
                                <polyline points="50,50 120,70 190,110 260,110 330,150 400,180 470,180" fill="none" stroke="#EF4444" stroke-width="4"/>
                                <polygon points="50,50 120,70 190,110 260,110 330,150 400,180 470,180 470,450 50,450" fill="#EF4444" opacity="0.05"/>

                                <!-- Current Point -->
                                <circle cx="470" cy="180" r="6" fill="#EF4444" stroke="white" stroke-width="2">
                                    <animate attributeName="r" values="6;8;6" dur="1.5s" repeatCount="indefinite"/>
                                </circle>

                                <!-- Data points -->
                                ${[
                                    {x:50, y:50, day:1, pts:20},
                                    {x:120, y:70, day:2, pts:18},
                                    {x:190, y:110, day:3, pts:15},
                                    {x:260, y:110, day:4, pts:15},
                                    {x:330, y:150, day:5, pts:12},
                                    {x:400, y:180, day:6, pts:10},
                                    {x:470, y:180, day:7, pts:10}
                                ].map(pt => `
                                    <circle cx="${pt.x}" cy="${pt.y}" r="4" fill="white" stroke="#EF4444" stroke-width="2" class="cursor-pointer">
                                        <title>Dia ${pt.day}: ${pt.pts} pts restantes</title>
                                    </circle>
                                `).join('')}

                                <!-- Tooltip (current day) -->
                                <g transform="translate(480, 150)">
                                    <rect x="0" y="0" width="140" height="50" rx="5" fill="#1F2937" opacity="0.95"/>
                                    <text x="10" y="20" fill="white" font-size="14" font-weight="bold">Dia 7: 10 pts</text>
                                    <text x="10" y="38" fill="#FCA5A5" font-size="12">4 pts atrasado</text>
                                </g>

                                <!-- X-axis labels -->
                                ${['D1','D2','D3','D4','D5','D6','D7','D8','D9','D10'].map((d, i) => `
                                    <text x="${50 + i*70 + 35}" y="470" font-size="11" fill="#6b7280" text-anchor="middle" font-weight="${i === 6 ? 'bold' : 'normal'}" fill="${i === 6 ? '#EF4444' : '#6b7280'}">${d}</text>
                                `).join('')}

                                <!-- Axis labels -->
                                <text x="400" y="490" font-size="13" fill="#374151" font-weight="bold" text-anchor="middle">Dias do Sprint →</text>
                                <text x="15" y="250" font-size="13" fill="#374151" font-weight="bold" text-anchor="middle" transform="rotate(-90, 15, 250)">← Story Points</text>
                            </svg>
                        </div>

                        <!-- Stats -->
                        <div class="grid grid-cols-4 gap-4 mt-6 pt-6 border-t border-gray-200">
                            <div class="text-center">
                                <p class="text-xs text-gray-500 uppercase tracking-wider">Restante</p>
                                <p class="text-2xl font-bold text-gray-900 mt-1">10 pts</p>
                            </div>
                            <div class="text-center">
                                <p class="text-xs text-gray-500 uppercase tracking-wider">Dias Restantes</p>
                                <p class="text-2xl font-bold text-primary-blue mt-1">3 dias</p>
                            </div>
                            <div class="text-center">
                                <p class="text-xs text-gray-500 uppercase tracking-wider">Queima/Dia Necessária</p>
                                <p class="text-2xl font-bold text-yellow-600 mt-1">3.3 pts</p>
                            </div>
                            <div class="text-center">
                                <p class="text-xs text-gray-500 uppercase tracking-wider">Queima/Dia Real</p>
                                <p class="text-2xl font-bold text-green-600 mt-1">2.0 pts</p>
                            </div>
                        </div>
                    </div>

                    <!-- Analysis -->
                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-5">
                        <div class="flex items-start">
                            <i class="fa-solid fa-triangle-exclamation text-yellow-600 text-xl mt-1 mr-3"></i>
                            <div>
                                <h3 class="font-bold text-yellow-900">Análise: Sprint em Risco</h3>
                                <p class="text-sm text-yellow-700 mt-1">
                                    A linha real está acima da linha ideal. Para completar o sprint, precisamos queimar 3.3 pts/dia mas estamos fazendo apenas 2.0 pts/dia.
                                </p>
                                <div class="mt-3">
                                    <p class="text-sm font-medium text-yellow-900">Recomendações:</p>
                                    <ul class="text-sm text-yellow-700 mt-1 ml-5 list-disc space-y-1">
                                        <li>Remover tasks de baixa prioridade do sprint</li>
                                        <li>Focar em finalizar tasks "in-progress"</li>
                                        <li>Resolver bloqueadores imediatamente</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `,

            // ========================================
            // VELOCITY CHART
            // ========================================
            velocity: () => `
                <div class="animate-fade-in space-y-6 max-w-[1200px] mx-auto">
                    <div>
                        <h1 class="text-2xl font-bold text-gray-900">Velocity Chart</h1>
                        <p class="text-gray-500 mt-1">Análise de capacidade e tendências do time</p>
                    </div>

                    <!-- Chart -->
                    <div class="bg-white rounded-lg border border-gray-200 shadow-card p-6">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="font-bold text-gray-900">Últimos 6 Sprints</h3>
                            <div class="text-right">
                                <p class="text-sm text-gray-500">Velocity Média</p>
                                <p class="text-2xl font-bold text-primary-blue">${Math.round(mockData.velocity.reduce((a,b) => a + b.points, 0) / mockData.velocity.length)} pts</p>
                            </div>
                        </div>

                        <!-- Bar Chart -->
                        <div class="relative w-full" style="height: 400px;">
                            <svg viewBox="0 0 800 400" class="w-full h-full">
                                <!-- Grid -->
                                ${[0, 100, 200, 300].map(y => `
                                    <line x1="50" y1="${y + 50}" x2="750" y2="${y + 50}" stroke="#f3f4f6" stroke-width="1"/>
                                    <text x="20" y="${y + 55}" font-size="12" fill="#9ca3af">${20 - (y/15)}</text>
                                `).join('')}
                                <line x1="50" y1="350" x2="750" y2="350" stroke="#374151" stroke-width="2"/>

                                <!-- Average Line -->
                                <line x1="50" y1="140" x2="750" y2="140" stroke="#3B82F6" stroke-width="2" stroke-dasharray="5,5" opacity="0.5"/>
                                <text x="760" y="145" font-size="11" fill="#3B82F6">Média</text>

                                <!-- Bars -->
                                ${mockData.velocity.map((v, i) => {
                                    const barHeight = (v.points / 20) * 300;
                                    const x = 100 + i * 110;
                                    const y = 350 - barHeight;
                                    const isCurrent = i === mockData.velocity.length - 1;
                                    return `
                                        <rect x="${x}" y="${y}" width="80" height="${barHeight}" fill="${isCurrent ? '#10B981' : '#DBEAFE'}" rx="4" class="cursor-pointer hover:opacity-80 transition-opacity">
                                            <title>${v.week}: ${v.points} pts</title>
                                        </rect>
                                        <text x="${x + 40}" y="${y - 10}" font-size="14" font-weight="bold" fill="#374151" text-anchor="middle">${v.points}</text>
                                        <text x="${x + 40}" y="370" font-size="12" fill="${isCurrent ? '#374151' : '#9ca3af'}" font-weight="${isCurrent ? 'bold' : 'normal'}" text-anchor="middle">${v.week}</text>
                                    `;
                                }).join('')}
                            </svg>
                        </div>
                    </div>

                    <!-- Stats Grid -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="bg-white p-6 rounded-lg border border-gray-200 shadow-card">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="font-bold text-gray-900">Tendência</h3>
                                <i class="fa-solid fa-arrow-trend-up text-green-600 text-xl"></i>
                            </div>
                            <p class="text-3xl font-bold text-green-600">+12%</p>
                            <p class="text-sm text-gray-500 mt-1">vs sprint anterior</p>
                            <div class="mt-4 pt-4 border-t border-gray-100">
                                <p class="text-xs text-gray-600">Últimos 3 sprints: <span class="font-bold">13, 14, 16 pts</span></p>
                            </div>
                        </div>

                        <div class="bg-white p-6 rounded-lg border border-gray-200 shadow-card">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="font-bold text-gray-900">Consistência</h3>
                                <i class="fa-solid fa-chart-line text-blue-600 text-xl"></i>
                            </div>
                            <p class="text-3xl font-bold text-blue-600">± 2.5 pts</p>
                            <p class="text-sm text-gray-500 mt-1">Desvio padrão</p>
                            <div class="mt-4 pt-4 border-t border-gray-100">
                                <p class="text-xs text-gray-600">Previsibilidade: <span class="font-bold text-green-600">Boa ✓</span></p>
                            </div>
                        </div>

                        <div class="bg-white p-6 rounded-lg border border-gray-200 shadow-card">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="font-bold text-gray-900">Capacidade</h3>
                                <i class="fa-solid fa-gauge-high text-purple-600 text-xl"></i>
                            </div>
                            <p class="text-3xl font-bold text-purple-600">80%</p>
                            <p class="text-sm text-gray-500 mt-1">Taxa de conclusão</p>
                            <div class="mt-4 pt-4 border-t border-gray-100">
                                <p class="text-xs text-gray-600">Sprint atual: <span class="font-bold">${mockData.currentSprint.completedPoints}/${mockData.currentSprint.totalPoints} pts (${mockData.currentSprint.progress}%)</span></p>
                            </div>
                        </div>
                    </div>

                    <!-- Recommendations -->
                    <div class="bg-green-50 border border-green-200 rounded-lg p-5">
                        <div class="flex items-start">
                            <i class="fa-solid fa-lightbulb text-green-600 text-xl mt-1 mr-3"></i>
                            <div>
                                <h3 class="font-bold text-green-900">Recomendação de Planning</h3>
                                <p class="text-sm text-green-700 mt-1">
                                    Com base nos últimos sprints, recomendamos planejar entre <span class="font-bold">14-18 story points</span> para o próximo sprint.
                                </p>
                                <div class="mt-3 flex items-center space-x-3 text-sm">
                                    <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full font-medium">Conservador: 14 pts</span>
                                    <span class="bg-green-200 text-green-900 px-3 py-1 rounded-full font-medium">Ideal: 16 pts</span>
                                    <span class="bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full font-medium">Agressivo: 18 pts</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `,

            // ========================================
            // GANTT CHART
            // ========================================
            gantt: () => `
                <div class="animate-fade-in space-y-6 max-w-[1600px] mx-auto">
                    <div class="flex justify-between items-center">
                        <div>
                            <h1 class="text-2xl font-bold text-gray-900">Gantt Chart</h1>
                            <p class="text-gray-500 mt-1">Timeline de Projetos e Milestones</p>
                        </div>
                        <div class="flex space-x-2">
                            <button class="px-3 py-1.5 rounded-md text-xs font-medium bg-primary-blue text-white">Mês</button>
                            <button class="px-3 py-1.5 rounded-md text-xs font-medium bg-white border border-gray-300 text-gray-700 hover:bg-gray-50">Trimestre</button>
                            <button class="px-3 py-1.5 rounded-md text-xs font-medium bg-white border border-gray-300 text-gray-700 hover:bg-gray-50">Ano</button>
                        </div>
                    </div>

                    <!-- Gantt Chart -->
                    <div class="bg-white rounded-lg border border-gray-200 shadow-card overflow-hidden">
                        <div class="overflow-x-auto">
                            <div class="inline-block min-w-full">
                                <!-- Header: Timeline -->
                                <div class="flex border-b border-gray-200 bg-gray-50">
                                    <div class="w-64 px-4 py-3 border-r border-gray-200 flex-shrink-0">
                                        <span class="text-xs font-bold text-gray-600 uppercase">Projeto</span>
                                    </div>
                                    <div class="flex-1 flex">
                                        ${['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun'].map(month => `
                                            <div class="flex-1 px-2 py-3 border-r border-gray-200 text-center">
                                                <span class="text-xs font-bold text-gray-600">${month}</span>
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>

                                <!-- Rows: Projects -->
                                ${mockData.projects.map((proj, i) => {
                                    const startMonth = i % 3;
                                    const duration = 2 + (i % 3);
                                    return `
                                        <div class="flex border-b border-gray-100 hover:bg-gray-50">
                                            <div class="w-64 px-4 py-4 border-r border-gray-200 flex-shrink-0">
                                                <div class="font-medium text-gray-900">${proj.name}</div>
                                                <div class="text-xs text-gray-500 mt-1">${proj.progress}% completo</div>
                                            </div>
                                            <div class="flex-1 flex relative">
                                                ${[0,1,2,3,4,5].map(m => `
                                                    <div class="flex-1 border-r border-gray-100 relative">
                                                        ${m === startMonth ? `
                                                            <div class="absolute top-1/2 transform -translate-y-1/2 h-8 bg-${proj.priority === 'P0' ? 'red' : proj.priority === 'P1' ? 'orange' : 'blue'}-200 border-2 border-${proj.priority === 'P0' ? 'red' : proj.priority === 'P1' ? 'orange' : 'blue'}-500 rounded px-2 flex items-center justify-between group hover:shadow-md transition-shadow cursor-pointer" style="width: ${duration * 100}%; left: 10%;">
                                                                <span class="text-xs font-medium text-gray-900">${proj.progress}%</span>
                                                                <div class="opacity-0 group-hover:opacity-100 absolute -top-16 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs px-3 py-2 rounded whitespace-nowrap z-10">
                                                                    ${proj.name}<br/>
                                                                    ${['Jan', 'Fev', 'Mar'][startMonth]} - ${['Jan', 'Fev', 'Mar', 'Abr', 'Mai'][startMonth + duration]}<br/>
                                                                    ${proj.team.length} pessoas
                                                                </div>
                                                            </div>
                                                        ` : ''}
                                                    </div>
                                                `).join('')}
                                            </div>
                                        </div>
                                    `;
                                }).join('')}

                                <!-- Milestones Row -->
                                <div class="flex border-t-2 border-gray-300 bg-blue-50">
                                    <div class="w-64 px-4 py-3 border-r border-gray-200 flex-shrink-0">
                                        <span class="text-xs font-bold text-blue-900 uppercase">Milestones</span>
                                    </div>
                                    <div class="flex-1 flex relative">
                                        ${[
                                            { month: 1, label: 'MVP v1' },
                                            { month: 3, label: 'Beta Release' },
                                            { month: 5, label: 'Launch' }
                                        ].map(milestone => `
                                            <div class="absolute" style="left: ${(milestone.month / 6) * 100}%; top: 50%; transform: translate(-50%, -50%);">
                                                <div class="relative group cursor-pointer">
                                                    <div class="w-4 h-4 bg-blue-600 transform rotate-45 border-2 border-white shadow-lg"></div>
                                                    <div class="opacity-0 group-hover:opacity-100 absolute -top-12 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs px-3 py-1 rounded whitespace-nowrap z-10">
                                                        ${milestone.label}
                                                    </div>
                                                </div>
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Legend -->
                    <div class="bg-white rounded-lg border border-gray-200 shadow-card p-4">
                        <h3 class="font-bold text-gray-900 mb-3 text-sm">Legenda</h3>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-xs">
                            <div class="flex items-center">
                                <div class="w-8 h-4 bg-red-200 border-2 border-red-500 rounded mr-2"></div>
                                <span class="text-gray-700">Prioridade P0</span>
                            </div>
                            <div class="flex items-center">
                                <div class="w-8 h-4 bg-orange-200 border-2 border-orange-500 rounded mr-2"></div>
                                <span class="text-gray-700">Prioridade P1</span>
                            </div>
                            <div class="flex items-center">
                                <div class="w-8 h-4 bg-blue-200 border-2 border-blue-500 rounded mr-2"></div>
                                <span class="text-gray-700">Prioridade P2</span>
                            </div>
                            <div class="flex items-center">
                                <div class="w-4 h-4 bg-blue-600 transform rotate-45 border-2 border-white mr-2"></div>
                                <span class="text-gray-700">Milestone</span>
                            </div>
                        </div>
                    </div>
                </div>
            `,

            // ========================================
            // SETTINGS
            // ========================================
            settings: () => `
                <div class="animate-fade-in space-y-6 max-w-[1000px] mx-auto">
                    <div>
                        <h1 class="text-2xl font-bold text-gray-900">Configurações</h1>
                        <p class="text-gray-500 mt-1">Gerencie suas preferências e configurações do sistema</p>
                    </div>

                    <!-- Tabs -->
                    <div class="bg-white rounded-lg border border-gray-200 shadow-card overflow-hidden">
                        <div class="border-b border-gray-200">
                            <nav class="flex -mb-px">
                                <button class="px-6 py-3 border-b-2 border-primary-blue text-primary-blue font-medium text-sm">
                                    <i class="fa-solid fa-user mr-2"></i> Perfil
                                </button>
                                <button class="px-6 py-3 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium text-sm">
                                    <i class="fa-solid fa-building mr-2"></i> Tenant
                                </button>
                                <button class="px-6 py-3 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium text-sm">
                                    <i class="fa-solid fa-bell mr-2"></i> Notificações
                                </button>
                                <button class="px-6 py-3 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium text-sm">
                                    <i class="fa-solid fa-shield mr-2"></i> Segurança
                                </button>
                            </nav>
                        </div>

                        <!-- Profile Tab Content -->
                        <div class="p-6 space-y-6">
                            <!-- Avatar -->
                            <div class="flex items-center space-x-6">
                                <img class="w-24 h-24 rounded-full border-4 border-gray-100" src="https://ui-avatars.com/api/?name=Pedro+V&background=0D8ABC&color=fff&size=128" alt="Avatar">
                                <div>
                                    <button class="px-4 py-2 bg-primary-blue text-white rounded-md text-sm font-medium hover:bg-primary-dark">
                                        Alterar Foto
                                    </button>
                                    <button class="px-4 py-2 border border-gray-300 text-gray-700 rounded-md text-sm font-medium hover:bg-gray-50 ml-2">
                                        Remover
                                    </button>
                                    <p class="text-xs text-gray-500 mt-2">JPG, PNG. Máximo 2MB.</p>
                                </div>
                            </div>

                            <!-- Form Fields -->
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Nome Completo</label>
                                    <input type="text" value="Pedro Vitor" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:border-primary-blue">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                                    <input type="email" value="pedro@uzz.ai" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:border-primary-blue">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Cargo</label>
                                    <input type="text" value="Product Owner" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:border-primary-blue">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Telefone</label>
                                    <input type="text" value="+55 47 99999-0001" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:border-primary-blue">
                                </div>
                            </div>

                            <!-- Skills -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Skills</label>
                                <div class="flex flex-wrap gap-2 mb-3">
                                    ${['React', 'TypeScript', 'Python', 'AWS', 'Product Management'].map(skill => `
                                        <span class="inline-flex items-center bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">
                                            ${skill}
                                            <button class="ml-2 text-blue-600 hover:text-blue-800">
                                                <i class="fa-solid fa-times text-xs"></i>
                                            </button>
                                        </span>
                                    `).join('')}
                                </div>
                                <button class="text-primary-blue hover:text-primary-dark text-sm font-medium">
                                    <i class="fa-solid fa-plus mr-1"></i> Adicionar Skill
                                </button>
                            </div>

                            <!-- Bio -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Bio</label>
                                <textarea rows="4" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:border-primary-blue resize-none" placeholder="Conte um pouco sobre você...">Product Owner com 5+ anos de experiência em startups. Apaixonado por metodologias ágeis e gestão de produtos.</textarea>
                            </div>

                            <!-- Save Button -->
                            <div class="flex justify-end pt-4 border-t border-gray-200">
                                <button class="px-6 py-2 bg-primary-blue text-white rounded-md font-medium hover:bg-primary-dark">
                                    <i class="fa-solid fa-save mr-2"></i> Salvar Alterações
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Preferences -->
                    <div class="bg-white rounded-lg border border-gray-200 shadow-card p-6">
                        <h3 class="font-bold text-gray-900 mb-4">Preferências</h3>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between py-3 border-b border-gray-100">
                                <div>
                                    <p class="font-medium text-gray-900">Modo Escuro</p>
                                    <p class="text-sm text-gray-500">Ativar tema escuro na interface</p>
                                </div>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" class="sr-only peer">
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary-blue rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-blue"></div>
                                </label>
                            </div>
                            <div class="flex items-center justify-between py-3 border-b border-gray-100">
                                <div>
                                    <p class="font-medium text-gray-900">Notificações Desktop</p>
                                    <p class="text-sm text-gray-500">Receber notificações no navegador</p>
                                </div>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" checked class="sr-only peer">
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary-blue rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-blue"></div>
                                </label>
                            </div>
                            <div class="flex items-center justify-between py-3">
                                <div>
                                    <p class="font-medium text-gray-900">Email Diário de Resumo</p>
                                    <p class="text-sm text-gray-500">Receber resumo diário por email</p>
                                </div>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" checked class="sr-only peer">
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary-blue rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-blue"></div>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Danger Zone -->
                    <div class="bg-red-50 border border-red-200 rounded-lg p-6">
                        <h3 class="font-bold text-red-900 mb-2">Zona de Perigo</h3>
                        <p class="text-sm text-red-700 mb-4">Ações irreversíveis</p>
                        <button class="px-4 py-2 bg-red-600 text-white rounded-md text-sm font-medium hover:bg-red-700">
                            <i class="fa-solid fa-trash mr-2"></i> Deletar Conta
                        </button>
                    </div>
                </div>
            `
        };

        // ========================================
        // HELPER FUNCTIONS
        // ========================================
        function renderKanbanColumn(title, color, tasks) {
            const colorMap = {
                gray: { bg: 'bg-gray-light', border: 'border-gray-400', headerBg: 'bg-gray-superlight', badge: 'bg-gray-200 text-gray-600' },
                primary: { bg: 'bg-gray-light', border: 'border-primary-blue', headerBg: 'bg-blue-50/50', badge: 'bg-blue-100 text-blue-700' },
                info: { bg: 'bg-gray-light', border: 'border-status-info', headerBg: 'bg-purple-50/50', badge: 'bg-purple-100 text-purple-700' },
                success: { bg: 'bg-gray-light', border: 'border-status-success', headerBg: 'bg-green-50/50', badge: 'bg-green-100 text-green-700' }
            };
            const c = colorMap[color];
            const totalPoints = tasks.reduce((sum, t) => sum + (t.points || 0), 0);

            return `
                <div class="w-72 flex-shrink-0 flex flex-col ${c.bg} rounded-lg h-full border-t-2 ${c.border} kanban-col" ondrop="drop(event)" ondragover="allowDrop(event)">
                    <div class="p-3 flex justify-between items-center ${c.headerBg} rounded-t-lg border-b border-gray-200">
                        <div class="flex items-center">
                            <h3 class="text-xs font-bold ${color === 'primary' ? 'text-primary-dark' : color === 'info' ? 'text-status-info' : color === 'success' ? 'text-status-success' : 'text-gray-600'} uppercase">${title}</h3>
                            <span class="ml-2 ${c.badge} text-[10px] font-bold px-1.5 rounded-full">${tasks.length}</span>
                        </div>
                        <span class="text-[10px] text-gray-400 font-mono">${totalPoints} pts</span>
                    </div>
                    <div class="flex-1 p-2 space-y-3 overflow-y-auto">
                        ${tasks.map(task => renderKanbanCard(task)).join('')}
                        <button class="w-full py-2 text-xs text-gray-400 hover:text-gray-600 hover:bg-gray-200 rounded border border-transparent hover:border-gray-300 border-dashed transition-all">
                            + Adicionar
                        </button>
                    </div>
                </div>
            `;
        }

        function renderKanbanCard(task) {
            const isBlocked = task.status === 'blocked';
            const isDone = task.status === 'done';

            return `
                <div onclick="openKanbanCard()" class="bg-white p-3 rounded border border-gray-200 shadow-sm card-draggable group hover:border-primary-blue hover:shadow-md ${isDone ? 'opacity-75' : ''} ${isBlocked ? 'border-red-200' : ''} relative" draggable="true" ondragstart="drag(event)" id="card-${task.id}">
                    ${isBlocked ? '<div class="bg-red-500 h-1 w-full absolute top-0 left-0 right-0 rounded-t"></div>' : ''}
                    ${isBlocked ? '<div class="flex items-center mb-1 text-red-600 font-bold text-[10px]"><i class="fa-solid fa-ban mr-1"></i> BLOQUEADO</div>' : ''}
                    <div class="flex justify-between mb-1">
                        <span class="text-[10px] font-mono text-gray-400 ${isDone ? 'line-through' : ''}">#${task.id}</span>
                        <span class="bg-${task.priority === 'P0' ? 'red' : task.priority === 'P1' ? 'orange' : 'gray'}-100 text-${task.priority === 'P0' ? 'red' : task.priority === 'P1' ? 'orange' : 'gray'}-${isDone ? '600' : '800'} text-[10px] px-1 rounded font-bold">${task.priority}</span>
                    </div>
                    <h4 class="text-sm font-semibold text-gray-${isDone ? '500' : '800'} mb-2 leading-tight ${isDone ? 'line-through' : ''}">${task.title}</h4>
                    ${isBlocked && task.blocker ? `<div class="text-xs bg-red-50 text-red-700 p-1.5 rounded border border-red-100 mb-2 italic">"${task.blocker}"</div>` : ''}
                    <div class="flex justify-between items-center mt-3">
                        <div class="flex items-center text-[10px] text-gray-${isDone ? '400' : '500'}">
                            <i class="fa-solid fa-layer-group mr-1 ${task.status === 'in-progress' ? 'text-primary-blue' : ''}"></i> ${task.points} pts
                            ${task.project ? ` • ${task.project}` : ''}
                        </div>
                        <div class="flex items-center space-x-2">
                            ${task.comments ? `<span class="text-[10px] text-gray-400"><i class="fa-regular fa-comment"></i> ${task.comments}</span>` : ''}
                            ${task.assignee ? `<img class="h-5 w-5 rounded-full ${isDone ? 'grayscale opacity-50' : ''}" src="https://ui-avatars.com/api/?name=${task.assignee}&background=random" alt="${task.assignee}">` : '<div class="h-5 w-5 rounded-full bg-gray-100 flex items-center justify-center text-[8px] text-gray-500 border border-gray-200">?</div>'}
                        </div>
                    </div>
                    ${task.deadline && task.status === 'in-progress' ? `<div class="absolute -right-1 -top-1 bg-status-warning text-white text-[9px] px-1.5 py-0.5 rounded shadow-sm font-bold">${task.deadline}</div>` : ''}
                    ${isDone ? '<span class="absolute top-2 right-2 text-green-600 text-[10px]"><i class="fa-solid fa-check"></i></span>' : ''}
                </div>
            `;
        }

        // ========================================
        // VIEW SWITCHING
        // ========================================
        function switchView(viewName, param) {
            // Update nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('bg-primary-lighter', 'text-primary-dark', 'border-l-[3px]', 'border-primary-blue');
                item.classList.add('text-gray-dark', 'hover:bg-gray-100');
            });

            const activeNav = document.querySelector(`[data-view="${viewName}"]`);
            if (activeNav) {
                activeNav.classList.remove('text-gray-dark', 'hover:bg-gray-100');
                activeNav.classList.add('bg-primary-lighter', 'text-primary-dark', 'border-l-[3px]', 'border-primary-blue');
            }

            // Update page title
            const titles = {
                dashboard: 'Visão Geral',
                projetos: 'Projetos',
                kanban: 'Quadro Kanban',
                backlog: 'Backlog do Produto',
                planning: 'Sprint Planning',
                daily: 'Daily Standup',
                review: 'Sprint Review',
                retro: 'Retrospective',
                burndown: 'Burndown Chart',
                velocity: 'Velocity Chart',
                gantt: 'Gantt Chart',
                equipe: 'Gestão de Equipe',
                capacity: 'Capacidade da Equipe',
                cockpit: 'Manager Cockpit',
                settings: 'Configurações'
            };
            document.getElementById('page-title').textContent = titles[viewName] || 'ERP-UzzAI';

            // Render view
            const container = document.getElementById('content-container');
            if (views[viewName]) {
                container.innerHTML = views[viewName]();

                // Initialize Planning with Sprint tab by default
                if (viewName === 'planning') {
                    setTimeout(() => {
                        switchPlanningTab('sprint');
                    }, 0);
                }
            } else {
                container.innerHTML = `<div class="text-center text-gray-500 mt-20"><p>View "${viewName}" em desenvolvimento...</p></div>`;
            }
        }

        // ========================================
        // SIDEBAR TOGGLE
        // ========================================
        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('collapsed');
        }

        // ========================================
        // DRAG AND DROP
        // ========================================
        function allowDrop(ev) {
            ev.preventDefault();
            ev.currentTarget.classList.add('drag-over');
        }

        function drag(ev) {
            ev.dataTransfer.setData("text", ev.target.id);
            ev.target.classList.add('dragging');
        }

        function drop(ev) {
            ev.preventDefault();
            const data = ev.dataTransfer.getData("text");
            const draggedElement = document.getElementById(data);
            draggedElement.classList.remove('dragging');

            document.querySelectorAll('.kanban-col').forEach(col => col.classList.remove('drag-over'));

            const targetCol = ev.target.closest('.kanban-col');
            const contentArea = targetCol.querySelector('.overflow-y-auto');
            if (contentArea) {
                contentArea.insertBefore(draggedElement, contentArea.lastElementChild);
                showToast("Task movida com sucesso!");
            }
        }

        document.addEventListener("dragend", function(event) {
            event.target.classList.remove("dragging");
            document.querySelectorAll('.kanban-col').forEach(col => col.classList.remove('drag-over'));
        });

        // ========================================
        // MODAL FUNCTIONS
        // ========================================
        function openModal(modalId) {
            document.getElementById(modalId).classList.remove('hidden');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.add('hidden');
        }

        // Nova Task
        function openNovaTask() {
            openModal('modalNovaTask');
        }

        function saveNovaTask() {
            showToast('Task criada com sucesso!');
            closeModal('modalNovaTask');
        }

        function calculateGUT() {
            const g = parseInt(document.getElementById('gutG').value);
            const u = parseInt(document.getElementById('gutU').value);
            const t = parseInt(document.getElementById('gutT').value);
            const score = g * u * t;
            document.getElementById('gutScore').textContent = score;
        }

        // Novo Projeto
        function openNovoProjeto() {
            openModal('modalNovoProjeto');
        }

        function saveNovoProjeto() {
            showToast('Projeto criado com sucesso!');
            closeModal('modalNovoProjeto');
        }

        function addTeamMember() {
            const select = document.getElementById('teamMemberSelect');
            const memberId = select.value;
            if (!memberId) return;

            const memberNames = {
                'pedrov': 'Pedro Vitor',
                'luis': 'Luis Boff',
                'vitinho': 'Vitinho',
                'maria': 'Maria Silva'
            };

            const container = document.getElementById('selectedTeamMembers');
            const badge = document.createElement('span');
            badge.className = 'bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-xs font-semibold flex items-center';
            badge.innerHTML = `
                ${memberNames[memberId]}
                <button onclick="this.parentElement.remove()" class="ml-2 text-blue-500 hover:text-blue-700">
                    <i class="fa-solid fa-times"></i>
                </button>
            `;
            container.appendChild(badge);

            // Reset select
            select.value = '';
        }

        // Detalhes do Projeto
        function openDetalheProjeto(projetoId) {
            // Set project name
            const projeto = mockData.projects.find(p => p.id === projetoId);
            if (projeto) {
                document.getElementById('projetoNome').textContent = projeto.name;
            }

            openModal('modalDetalheProjeto');
            switchProjetoTab('overview');
        }

        function switchProjetoTab(tabName) {
            // Update tab buttons
            document.querySelectorAll('.projeto-tab-btn').forEach(btn => {
                if (btn.getAttribute('data-tab') === tabName) {
                    btn.classList.remove('border-transparent', 'text-gray-500');
                    btn.classList.add('border-primary-blue', 'text-primary-blue');
                } else {
                    btn.classList.remove('border-primary-blue', 'text-primary-blue');
                    btn.classList.add('border-transparent', 'text-gray-500');
                }
            });

            // Update content
            const content = document.getElementById('projetoTabContent');
            const projetoTabViews = {
                overview: () => `
                    <div class="space-y-6">
                        <!-- Metrics Grid -->
                        <div class="grid grid-cols-4 gap-4">
                            <div class="bg-white border border-gray-200 rounded-lg p-4">
                                <p class="text-xs font-semibold text-gray-500 mb-1">Status</p>
                                <p class="text-lg font-bold text-green-700">Ativo</p>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-lg p-4">
                                <p class="text-xs font-semibold text-gray-500 mb-1">Progresso</p>
                                <p class="text-lg font-bold text-blue-700">85%</p>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-lg p-4">
                                <p class="text-xs font-semibold text-gray-500 mb-1">Tasks</p>
                                <p class="text-lg font-bold text-gray-900">23 total</p>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-lg p-4">
                                <p class="text-xs font-semibold text-gray-500 mb-1">Team</p>
                                <p class="text-lg font-bold text-gray-900">3 pessoas</p>
                            </div>
                        </div>

                        <!-- Description -->
                        <div class="bg-white border border-gray-200 rounded-lg p-5">
                            <h3 class="text-sm font-bold text-gray-900 mb-3">Descrição do Projeto</h3>
                            <p class="text-sm text-gray-600 leading-relaxed">
                                Sistema de chatbot com IA integrada para atendimento automatizado,
                                com RAG para busca em documentação e multi-tenant architecture.
                            </p>
                        </div>

                        <!-- Tempo: Previsto vs Realizado (NOVO - BARRA HORIZONTAL) -->
                        <div class="bg-gradient-to-r from-blue-50 to-blue-100 border-2 border-blue-200 rounded-lg p-5">
                            <h3 class="text-sm font-bold text-gray-900 mb-1 flex items-center">
                                <i class="fa-solid fa-clock text-blue-600 mr-2"></i>
                                Tempo de Execução
                            </h3>
                            <p class="text-xs text-gray-600 mb-4">Comparação visual: Previsto vs Realizado</p>

                            <div class="space-y-3">
                                <!-- Barra: Tempo Previsto (azul) -->
                                <div>
                                    <div class="flex justify-between items-center mb-1">
                                        <span class="text-xs font-semibold text-gray-700">Previsto</span>
                                        <span class="text-xs font-bold text-blue-700">200h</span>
                                    </div>
                                    <div class="w-full bg-blue-200 rounded-lg h-8 flex items-center px-3">
                                        <div class="w-full bg-blue-500 rounded h-5 flex items-center justify-center" style="width: 100%">
                                            <span class="text-white text-xs font-bold">200 horas estimadas</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Barra: Tempo Realizado (verde/amarelo/vermelho) -->
                                <div>
                                    <div class="flex justify-between items-center mb-1">
                                        <span class="text-xs font-semibold text-gray-700">Realizado</span>
                                        <span class="text-xs font-bold text-green-700">180h (90% - Dentro do previsto! ✓)</span>
                                    </div>
                                    <div class="w-full bg-green-200 rounded-lg h-8 flex items-center px-3">
                                        <div class="w-full bg-green-500 rounded h-5 flex items-center justify-center" style="width: 90%">
                                            <span class="text-white text-xs font-bold">180 horas trabalhadas</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <p class="text-xs text-gray-700 mt-3 p-2 bg-white rounded border border-blue-200">
                                <i class="fa-solid fa-thumbs-up text-green-600 mr-1"></i>
                                <strong>Análise:</strong> Projeto está 10% abaixo do tempo previsto. Excelente performance!
                            </p>
                        </div>

                        <!-- Custo: Previsto vs Realizado (NOVO - BARRA HORIZONTAL) -->
                        <div class="bg-gradient-to-r from-orange-50 to-orange-100 border-2 border-orange-200 rounded-lg p-5">
                            <h3 class="text-sm font-bold text-gray-900 mb-1 flex items-center">
                                <i class="fa-solid fa-coins text-orange-600 mr-2"></i>
                                Orçamento do Projeto
                            </h3>
                            <p class="text-xs text-gray-600 mb-4">Comparação visual: Planejado vs Gasto</p>

                            <div class="space-y-3">
                                <!-- Barra: Custo Planejado (azul) -->
                                <div>
                                    <div class="flex justify-between items-center mb-1">
                                        <span class="text-xs font-semibold text-gray-700">Planejado</span>
                                        <span class="text-xs font-bold text-blue-700">R$ 50.000</span>
                                    </div>
                                    <div class="w-full bg-blue-200 rounded-lg h-8 flex items-center px-3">
                                        <div class="w-full bg-blue-500 rounded h-5 flex items-center justify-center" style="width: 100%">
                                            <span class="text-white text-xs font-bold">R$ 50.000 (Budget)</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Barra: Custo Realizado (verde/amarelo/vermelho) -->
                                <div>
                                    <div class="flex justify-between items-center mb-1">
                                        <span class="text-xs font-semibold text-gray-700">Gasto</span>
                                        <span class="text-xs font-bold text-orange-700">R$ 38.500 (77% - Atenção)</span>
                                    </div>
                                    <div class="w-full bg-orange-200 rounded-lg h-8 flex items-center px-3">
                                        <div class="w-full bg-orange-500 rounded h-5 flex items-center justify-center" style="width: 77%">
                                            <span class="text-white text-xs font-bold">R$ 38.500 gastos</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Barra: Restante -->
                                <div class="p-2 bg-white rounded border border-gray-200">
                                    <div class="flex justify-between items-center">
                                        <span class="text-xs font-semibold text-gray-700">Restante</span>
                                        <span class="text-xs font-bold text-green-700">R$ 11.500 (23%)</span>
                                    </div>
                                </div>
                            </div>

                            <p class="text-xs text-gray-700 mt-3 p-2 bg-white rounded border border-orange-200">
                                <i class="fa-solid fa-triangle-exclamation text-yellow-600 mr-1"></i>
                                <strong>Análise:</strong> Projeto com 85% de progresso mas já gastou 77% do budget. Monitorar custos.
                            </p>
                        </div>
                    </div>
                `,
                backlog: () => `
                    <div class="space-y-4">
                        <div class="flex justify-between items-center">
                            <h3 class="text-lg font-bold text-gray-900">Backlog do Projeto</h3>
                            <button onclick="openNovaTask()" class="bg-primary-blue text-white px-3 py-2 rounded-md text-sm hover:bg-primary-dark">
                                <i class="fa-solid fa-plus mr-1"></i> Nova User Story
                            </button>
                        </div>

                        <!-- User Stories Table -->
                        <div class="bg-white border border-gray-200 rounded-lg overflow-hidden">
                            <table class="w-full text-sm">
                                <thead class="bg-gray-50 border-b border-gray-200">
                                    <tr>
                                        <th class="px-4 py-3 text-left font-semibold text-gray-700">ID</th>
                                        <th class="px-4 py-3 text-left font-semibold text-gray-700">User Story</th>
                                        <th class="px-4 py-3 text-left font-semibold text-gray-700">GUT</th>
                                        <th class="px-4 py-3 text-left font-semibold text-gray-700">BV/W</th>
                                        <th class="px-4 py-3 text-left font-semibold text-gray-700">Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${mockData.tasks.filter(t => t.project === 'CHATBOT').map(task => `
                                        <tr class="border-b border-gray-100 hover:bg-gray-50 cursor-pointer" onclick="openEditarUserStory()">
                                            <td class="px-4 py-3 font-mono text-xs text-gray-500">#${task.id}</td>
                                            <td class="px-4 py-3">
                                                <p class="font-semibold text-gray-900">${task.title}</p>
                                            </td>
                                            <td class="px-4 py-3">
                                                <span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs font-bold">
                                                    ${task.points ? task.points * 25 : 75}
                                                </span>
                                            </td>
                                            <td class="px-4 py-3">
                                                <span class="text-xs text-gray-600">
                                                    <span class="text-green-700 font-bold">${task.points || 5}</span>
                                                    /
                                                    <span class="text-orange-700 font-bold">${task.points ? task.points - 1 : 3}</span>
                                                </span>
                                            </td>
                                            <td class="px-4 py-3">
                                                <span class="px-2 py-1 rounded-full text-xs font-semibold
                                                    ${task.status === 'done' ? 'bg-green-100 text-green-700' :
                                                      task.status === 'in-progress' ? 'bg-blue-100 text-blue-700' :
                                                      'bg-gray-100 text-gray-700'}">
                                                    ${task.status}
                                                </span>
                                            </td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                    </div>
                `,
                sprints: () => `
                    <div class="space-y-4">
                        <h3 class="text-lg font-bold text-gray-900">Sprints do Projeto</h3>

                        <!-- Current Sprint -->
                        <div class="bg-gradient-to-r from-blue-50 to-blue-100 border-2 border-blue-300 rounded-lg p-5">
                            <div class="flex justify-between items-start mb-4">
                                <div>
                                    <span class="bg-blue-600 text-white px-2 py-1 rounded text-xs font-bold">SPRINT ATUAL</span>
                                    <h4 class="text-xl font-bold text-gray-900 mt-2">Sprint-2025-W02</h4>
                                    <p class="text-sm text-gray-600">13/Jan - 24/Jan (3 dias restantes)</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-3xl font-bold text-blue-700">70%</p>
                                    <p class="text-xs text-gray-600">14 de 20 pts</p>
                                </div>
                            </div>
                            <div class="w-full bg-blue-200 rounded-full h-4">
                                <div class="bg-blue-600 h-4 rounded-full transition-all" style="width: 70%"></div>
                            </div>
                        </div>

                        <!-- Previous Sprints -->
                        <div class="grid grid-cols-2 gap-4">
                            <div class="bg-white border border-gray-200 rounded-lg p-4">
                                <h4 class="font-bold text-gray-900">Sprint-2025-W01</h4>
                                <p class="text-xs text-gray-500 mb-2">Completo</p>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">14 pts</span>
                                    <span class="bg-green-100 text-green-700 px-2 py-1 rounded-full text-xs font-bold">100%</span>
                                </div>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-lg p-4">
                                <h4 class="font-bold text-gray-900">Sprint-2024-W52</h4>
                                <p class="text-xs text-gray-500 mb-2">Completo</p>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">18 pts</span>
                                    <span class="bg-green-100 text-green-700 px-2 py-1 rounded-full text-xs font-bold">100%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `,
                equipe: () => `
                    <div class="space-y-4">
                        <h3 class="text-lg font-bold text-gray-900">Equipe do Projeto</h3>

                        <!-- Team Members -->
                        <div class="grid grid-cols-1 gap-4">
                            ${mockData.team.filter(m => m.allocations.some(a => a.project === 'CHATBOT')).map(member => {
                                const allocation = member.allocations.find(a => a.project === 'CHATBOT');
                                return `
                                    <div class="bg-white border border-gray-200 rounded-lg p-4 flex items-center justify-between">
                                        <div class="flex items-center space-x-4">
                                            <img class="w-12 h-12 rounded-full" src="${member.avatar}" alt="${member.name}">
                                            <div>
                                                <h4 class="font-bold text-gray-900">${member.name}</h4>
                                                <p class="text-sm text-gray-600">${member.role}</p>
                                            </div>
                                        </div>
                                        <div class="flex items-center space-x-6">
                                            <div class="text-right">
                                                <p class="text-xs text-gray-500">Alocação neste projeto</p>
                                                <p class="text-lg font-bold text-blue-700">${allocation.percentage}%</p>
                                                <p class="text-xs text-gray-500">${allocation.hours}h/semana</p>
                                            </div>
                                            <div class="text-right">
                                                <p class="text-xs text-gray-500">Velocity</p>
                                                <p class="text-lg font-bold text-gray-900">${member.velocity} pts</p>
                                            </div>
                                        </div>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    </div>
                `,
                timeline: () => `
                    <div class="space-y-4">
                        <h3 class="text-lg font-bold text-gray-900">Timeline do Projeto</h3>

                        <!-- Timeline -->
                        <div class="bg-white border border-gray-200 rounded-lg p-5">
                            <div class="relative">
                                <!-- Timeline line -->
                                <div class="absolute left-4 top-0 bottom-0 w-0.5 bg-gray-300"></div>

                                <!-- Timeline items -->
                                <div class="space-y-6">
                                    <div class="relative pl-10">
                                        <div class="absolute left-2.5 top-1.5 w-3 h-3 bg-green-500 rounded-full border-2 border-white"></div>
                                        <div>
                                            <p class="text-xs text-gray-500">13/Jan/2026</p>
                                            <p class="font-semibold text-gray-900">Projeto iniciado</p>
                                        </div>
                                    </div>

                                    <div class="relative pl-10">
                                        <div class="absolute left-2.5 top-1.5 w-3 h-3 bg-green-500 rounded-full border-2 border-white"></div>
                                        <div>
                                            <p class="text-xs text-gray-500">20/Jan/2026</p>
                                            <p class="font-semibold text-gray-900">MVP v1 lançado</p>
                                        </div>
                                    </div>

                                    <div class="relative pl-10">
                                        <div class="absolute left-2.5 top-1.5 w-3 h-3 bg-blue-500 rounded-full border-2 border-white animate-pulse"></div>
                                        <div>
                                            <p class="text-xs text-blue-600 font-bold">HOJE</p>
                                            <p class="font-semibold text-gray-900">Sprint W02 em andamento</p>
                                        </div>
                                    </div>

                                    <div class="relative pl-10">
                                        <div class="absolute left-2.5 top-1.5 w-3 h-3 bg-gray-300 rounded-full border-2 border-white"></div>
                                        <div>
                                            <p class="text-xs text-gray-500">15/Fev/2026</p>
                                            <p class="font-semibold text-gray-500">Beta Release (Estimado)</p>
                                        </div>
                                    </div>

                                    <div class="relative pl-10">
                                        <div class="absolute left-2.5 top-1.5 w-3 h-3 bg-gray-300 rounded-full border-2 border-white"></div>
                                        <div>
                                            <p class="text-xs text-gray-500">30/Mar/2026</p>
                                            <p class="font-semibold text-gray-500">Launch v1.0 (Estimado)</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `,
                analytics: () => `
                    <div class="space-y-6">
                        <h3 class="text-lg font-bold text-gray-900">Analytics do Projeto</h3>

                        <!-- Health Score -->
                        <div class="bg-gradient-to-r from-green-50 to-green-100 border-2 border-green-300 rounded-lg p-5">
                            <div class="flex justify-between items-center">
                                <div>
                                    <h4 class="text-sm font-bold text-gray-700 mb-1">Project Health Score</h4>
                                    <p class="text-xs text-gray-600">Baseado em velocity, budget e prazos</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-5xl font-bold text-green-700">87</p>
                                    <p class="text-xs text-green-600 font-semibold">Saudável</p>
                                </div>
                            </div>
                        </div>

                        <!-- Metrics Grid -->
                        <div class="grid grid-cols-3 gap-4">
                            <div class="bg-white border border-gray-200 rounded-lg p-4">
                                <p class="text-xs font-semibold text-gray-500 mb-2">Velocity Média</p>
                                <p class="text-2xl font-bold text-blue-700">16 pts</p>
                                <p class="text-xs text-green-600 mt-1">
                                    <i class="fa-solid fa-arrow-up"></i> +12% vs último mês
                                </p>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-lg p-4">
                                <p class="text-xs font-semibold text-gray-500 mb-2">Taxa de Entrega</p>
                                <p class="text-2xl font-bold text-green-700">94%</p>
                                <p class="text-xs text-green-600 mt-1">
                                    <i class="fa-solid fa-check"></i> Acima da meta (90%)
                                </p>
                            </div>
                            <div class="bg-white border border-gray-200 rounded-lg p-4">
                                <p class="text-xs font-semibold text-gray-500 mb-2">Lead Time Médio</p>
                                <p class="text-2xl font-bold text-orange-700">3.2 dias</p>
                                <p class="text-xs text-orange-600 mt-1">
                                    <i class="fa-solid fa-minus"></i> Estável
                                </p>
                            </div>
                        </div>

                        <!-- Burndown Mini -->
                        <div class="bg-white border border-gray-200 rounded-lg p-5">
                            <h4 class="text-sm font-bold text-gray-900 mb-4">Burndown Atual</h4>
                            <div class="text-center text-gray-500 py-8">
                                <i class="fa-solid fa-chart-line text-4xl mb-2"></i>
                                <p class="text-sm">Ver gráfico completo na aba Analytics principal</p>
                            </div>
                        </div>
                    </div>
                `,
                riscos: () => `
                    <div class="space-y-4">
                        <div class="flex justify-between items-center">
                            <h3 class="text-lg font-bold text-gray-900">Riscos do Projeto</h3>
                            <button class="bg-red-600 text-white px-3 py-2 rounded-md text-sm hover:bg-red-700">
                                <i class="fa-solid fa-plus mr-1"></i> Novo Risco
                            </button>
                        </div>

                        <!-- Risks List -->
                        <div class="space-y-3">
                            ${mockData.blockers.filter(b => b.project === 'CHATBOT').map((risk, i) => `
                                <div class="bg-white border-l-4 ${risk.priority === 'Alta' ? 'border-red-500' : 'border-yellow-500'} rounded-lg p-4">
                                    <div class="flex justify-between items-start mb-2">
                                        <div>
                                            <h4 class="font-bold text-gray-900">${risk.title}</h4>
                                            <p class="text-xs text-gray-500">R-CHATBOT-00${i+1}</p>
                                        </div>
                                        <span class="px-2 py-1 rounded-full text-xs font-semibold
                                            ${risk.priority === 'Alta' ? 'bg-red-100 text-red-700' : 'bg-yellow-100 text-yellow-700'}">
                                            ${risk.priority}
                                        </span>
                                    </div>
                                    <div class="flex items-center justify-between text-sm mt-3">
                                        <div class="flex items-center space-x-4">
                                            <span class="text-gray-600">
                                                <i class="fa-solid fa-user mr-1"></i> ${risk.assignee}
                                            </span>
                                            <span class="text-gray-600">
                                                Probabilidade: <strong>4/5</strong>
                                            </span>
                                            <span class="text-gray-600">
                                                Impacto: <strong>5/5</strong>
                                            </span>
                                        </div>
                                        <span class="bg-red-600 text-white px-3 py-1 rounded-full text-xs font-bold">
                                            Severity: 20
                                        </span>
                                    </div>
                                </div>
                            `).join('')}
                        </div>

                        <!-- No risks message if empty -->
                        ${mockData.blockers.filter(b => b.project === 'CHATBOT').length === 0 ? `
                            <div class="bg-green-50 border border-green-200 rounded-lg p-8 text-center">
                                <i class="fa-solid fa-check-circle text-green-600 text-4xl mb-3"></i>
                                <p class="text-green-800 font-semibold">Nenhum risco ativo identificado!</p>
                                <p class="text-sm text-green-600 mt-1">Projeto está saudável</p>
                            </div>
                        ` : ''}
                    </div>
                `
            };

            content.innerHTML = projetoTabViews[tabName]();
        }

        // ========================================
        // PLANNING TAB SWITCHING
        // ========================================
        function switchPlanningTab(tabName) {
            // Update tab buttons
            document.querySelectorAll('.planning-tab-btn').forEach(btn => {
                if (btn.getAttribute('data-tab') === tabName) {
                    btn.classList.remove('border-transparent', 'text-gray-500');
                    btn.classList.add('border-primary-blue', 'text-primary-blue');
                } else {
                    btn.classList.remove('border-primary-blue', 'text-primary-blue');
                    btn.classList.add('border-transparent', 'text-gray-500');
                }
            });

            // Update content
            const content = document.getElementById('planningTabContent');
            content.innerHTML = views.getPlanningTabContent(tabName);
        }

        // Kanban Card Details
        function openKanbanCard() {
            openModal('modalKanbanCard');
        }

        function editKanbanCard() {
            closeModal('modalKanbanCard');
            openEditarUserStory();
        }

        // Editar User Story
        function openEditarUserStory() {
            openModal('modalEditarUserStory');
        }

        function saveEditarUserStory() {
            showToast('User Story atualizada com sucesso!');
            closeModal('modalEditarUserStory');
        }

        // Feedback Obrigatório (NOVO)
        function saveFeedbackExecucao() {
            const oQueAconteceu = document.getElementById('feedbackOQueAconteceu').value;
            const comoEvitar = document.getElementById('feedbackComoEvitar').value;

            // Validação
            if (oQueAconteceu.length < 50) {
                showToast('⚠️ Campo "O que aconteceu?" precisa ter no mínimo 50 caracteres');
                return;
            }
            if (comoEvitar.length < 50) {
                showToast('⚠️ Campo "Como evitar?" precisa ter no mínimo 50 caracteres');
                return;
            }

            // Salvar feedback (simula POST ao backend)
            console.log('📝 Feedback de Execução salvo:', {
                tarefa: '#US-003',
                oQueAconteceu,
                comoEvitar,
                timestamp: new Date().toISOString()
            });

            showToast('✅ Feedback salvo! Tarefa marcada como DONE.');
            closeModal('modalFeedbackExecucao');
        }

        // ========================================
        // TOAST NOTIFICATIONS
        // ========================================
        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'fixed bottom-5 right-5 bg-gray-900 text-white px-4 py-3 rounded-md shadow-lg flex items-center space-x-3 transform transition-all duration-300 translate-y-10 opacity-0 z-50';
            toast.innerHTML = `<i class="fa-solid fa-check-circle text-status-success"></i><span>${message}</span>`;
            document.body.appendChild(toast);

            setTimeout(() => {
                toast.classList.remove('translate-y-10', 'opacity-0');
            }, 10);

            setTimeout(() => {
                toast.classList.add('translate-y-10', 'opacity-0');
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // ========================================
        // INITIALIZE
        // ========================================
        document.addEventListener('DOMContentLoaded', () => {
            switchView('dashboard');
        });
    </script>
</body>
</html>
